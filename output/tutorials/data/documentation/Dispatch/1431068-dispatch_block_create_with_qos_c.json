{
  "abstract": [
    {
      "text": "Creates a new dispatch block from an existing block and the given flags, and assigns it the specified quality-of-service class and relative priority.",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/dispatch"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/dispatch/1431068-dispatch_block_create_with_qos_c"
  },
  "kind": "symbol",
  "legacy_identifier": 1431068,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:@F@dispatch_block_create_with_qos_class",
    "modules": [
      {
        "name": "Dispatch"
      }
    ],
    "platforms": [
      {
        "current": "18.4",
        "introducedAt": "8.0",
        "name": "iOS"
      },
      {
        "current": "18.4",
        "introducedAt": "8.0",
        "name": "iPadOS"
      },
      {
        "current": "18.4",
        "introducedAt": "13.1",
        "name": "Mac Catalyst"
      },
      {
        "current": "15.4",
        "introducedAt": "10.10",
        "name": "macOS"
      },
      {
        "current": "18.4",
        "introducedAt": "9.0",
        "name": "tvOS"
      },
      {
        "current": "2.4",
        "introducedAt": "1.0",
        "name": "visionOS"
      },
      {
        "current": "11.4",
        "introducedAt": "2.0",
        "name": "watchOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Function",
    "symbolKind": "func",
    "title": "dispatch_block_create_with_qos_class"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "Mac Catalyst",
            "macOS",
            "tvOS",
            "visionOS",
            "watchOS"
          ],
          "tokens": [
            {
              "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@dispatch_block_t",
              "text": "dispatch_block_t"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "dispatch_block_create_with_qos_class"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@dispatch_block_flags_t",
              "text": "dispatch_block_flags_t"
            },
            {
              "kind": "text",
              "text": " flags, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_qos_class_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@dispatch_qos_class_t",
              "text": "dispatch_qos_class_t"
            },
            {
              "kind": "text",
              "text": " qos_class, "
            },
            {
              "kind": "keyword",
              "text": "int"
            },
            {
              "kind": "text",
              "text": " relative_priority, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@dispatch_block_t",
              "text": "dispatch_block_t"
            },
            {
              "kind": "text",
              "text": " block);"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Configuration flags for the block object. For possible values, see ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "Passing a value that is not a bitwise OR of valid flags results in ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": " being returned.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "flags"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The QoS class. For possible values, see ",
                  "type": "text"
                },
                {
                  "identifier": "devLink-1750585",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "Passing ",
                  "type": "text"
                },
                {
                  "code": "QOS_CLASS_UNSPECIFIED",
                  "type": "codeVoice"
                },
                {
                  "text": " is equivalent to specifying the ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t/dispatch_block_no_qos_class",
                  "isActive": false,
                  "type": "reference"
                },
                {
                  "text": " flag. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "Passing any other value results in ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": " being returned.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "qos_class"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A relative priority within the QoS class.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "This value is a negative offset from the maximum supported scheduler priority for the given class. Passing a value greater than zero or less than ",
                  "type": "text"
                },
                {
                  "code": "QOS_MIN_RELATIVE_PRIORITY",
                  "type": "codeVoice"
                },
                {
                  "text": " results in ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": " being returned.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "relative_priority"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The block to create the dispatch block from.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "block"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The provided block is copied to the heap and retained by the newly created dispatch block.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The returned dispatch block is intended to be submitted to a dispatch queue with ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/dispatch/1453057-dispatch_async",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " and related functions, but may also be invoked directly. Both operations can be performed an arbitrary number of times but only the first completed execution of a dispatch block can be waited on with ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/dispatch/1431064-dispatch_block_wait",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " or observed with ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/dispatch/1431042-dispatch_block_notify",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "If invoked directly, the returned dispatch block is executed with the assigned QoS class as long as that does not result in a lower QoS class than what is current on the calling thread.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "If the returned dispatch block is submitted to a dispatch queue, the QoS class it is executed with depends on the QoS class assigned to the block, the QoS class assigned to the queue and which of the following flags was specified or defaulted to:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t/dispatch_block_inherit_qos_class",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": " (default for asynchronous execution)",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t/dispatch_block_enforce_qos_class",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": " (default for synchronous execution)",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "If the returned dispatch block is submitted directly to a serial queue and is configured to execute with a specific QoS class, the system makes a best effort to apply the necessary QoS overrides to ensure that blocks submitted earlier to the serial queue are executed at that same QoS class or higher.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "See ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " for more information.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "devLink-1750585": {
      "identifier": "devLink-1750585",
      "title": "Quality of Service Classes (QoS)",
      "type": "link",
      "url": "https://developer.apple.com/library/archive/documentation/Performance/Conceptual/power_efficiency_guidelines_osx/RelatedDocuments.html#//apple_ref/doc/uid/TP40013929-CH20-SW16"
    },
    "doc://com.apple.documentation/documentation/dispatch": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch",
      "kind": "symbol",
      "role": "collection",
      "title": "Dispatch",
      "type": "topic",
      "url": "/documentation/dispatch"
    },
    "doc://com.apple.documentation/documentation/dispatch/1431042-dispatch_block_notify": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch/1431042-dispatch_block_notify",
      "kind": "symbol",
      "role": "symbol",
      "title": "dispatch_block_notify",
      "type": "topic",
      "url": "/documentation/dispatch/1431042-dispatch_block_notify"
    },
    "doc://com.apple.documentation/documentation/dispatch/1431064-dispatch_block_wait": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch/1431064-dispatch_block_wait",
      "kind": "symbol",
      "role": "symbol",
      "title": "dispatch_block_wait",
      "type": "topic",
      "url": "/documentation/dispatch/1431064-dispatch_block_wait"
    },
    "doc://com.apple.documentation/documentation/dispatch/1453057-dispatch_async": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch/1453057-dispatch_async",
      "kind": "symbol",
      "role": "symbol",
      "title": "dispatch_async",
      "type": "topic",
      "url": "/documentation/dispatch/1453057-dispatch_async"
    },
    "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "dispatch_block_flags_t",
      "type": "topic",
      "url": "/documentation/dispatch/dispatch_block_flags_t"
    },
    "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t/dispatch_block_enforce_qos_class": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t/dispatch_block_enforce_qos_class",
      "kind": "symbol",
      "role": "symbol",
      "title": "DISPATCH_BLOCK_ENFORCE_QOS_CLASS",
      "type": "topic",
      "url": "/documentation/dispatch/dispatch_block_flags_t/dispatch_block_enforce_qos_class"
    },
    "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t/dispatch_block_inherit_qos_class": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t/dispatch_block_inherit_qos_class",
      "kind": "symbol",
      "role": "symbol",
      "title": "DISPATCH_BLOCK_INHERIT_QOS_CLASS",
      "type": "topic",
      "url": "/documentation/dispatch/dispatch_block_flags_t/dispatch_block_inherit_qos_class"
    },
    "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t/dispatch_block_no_qos_class": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_flags_t/dispatch_block_no_qos_class",
      "kind": "symbol",
      "role": "symbol",
      "title": "DISPATCH_BLOCK_NO_QOS_CLASS",
      "type": "topic",
      "url": "/documentation/dispatch/dispatch_block_flags_t/dispatch_block_no_qos_class"
    },
    "doc://com.apple.documentation/documentation/dispatch/dispatch_block_t": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_block_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "dispatch_block_t",
      "type": "topic",
      "url": "/documentation/dispatch/dispatch_block_t"
    },
    "doc://com.apple.documentation/documentation/dispatch/dispatch_qos_class_t": {
      "identifier": "doc://com.apple.documentation/documentation/dispatch/dispatch_qos_class_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "dispatch_qos_class_t",
      "type": "topic",
      "url": "/documentation/dispatch/dispatch_qos_class_t"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "paths": [
        "documentation/dispatch/1431068-dispatch_block_create_with_qos_c"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    }
  ]
}

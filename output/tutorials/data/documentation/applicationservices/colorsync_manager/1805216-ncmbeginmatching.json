{
  "abstract": [
    {
      "text": "Sets up a QuickDraw-specific ColorSync matching session, using the specified source and destination profiles. ",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/applicationservices",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805216-ncmbeginmatching"
  },
  "kind": "symbol",
  "legacy_identifier": 1805216,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "Application Services"
      }
    ],
    "role": "pseudoSymbol",
    "symbolKind": "func",
    "title": "NCMBeginMatching"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "platforms": [],
          "tokens": [
            {
              "kind": "text",
              "text": "CMError NCMBeginMatching ("
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   CMProfileRef src,"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   CMProfileRef dst,"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   CMMatchRef *myRef"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": ");"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A profile reference of type ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/applicationservices/cmprofileref",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " that specifies the source profile for the matching session. Starting with ColorSync version 2.5, you can call ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804940-cmgetdefaultprofilebyspace",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " to get the default profile for a specific color space or ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804955-cmgetprofilebyavid",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " to get a profile for a specific display.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "With any version of ColorSync, you can specify a ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": " value to indicate the ColorSync system profile. Note, however, that starting with version 2.5, use of the system profile has changed.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "See the QuickDraw Reference for a description of the PixMap data type.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "src"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A profile reference of type ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/applicationservices/cmprofileref",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " that specifies the destination profile for the matching session. Starting with ColorSync version 2.5, you can call ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804940-cmgetdefaultprofilebyspace",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " to get the default profile for a specific color space or ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804955-cmgetprofilebyavid",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " to get a profile for a specific display.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "With any version of ColorSync, you can specify a ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": " value to indicate the ColorSync system profile. Note, however, that starting with version 2.5, use of the system profile has changed.See the QuickDraw Reference for a description of the PixMap data type.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "dst"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A pointer to a matching session. On return, it specifies the QuickDraw-specific matching session that was set up. See the QuickDraw Reference for a description of the PixMap data type.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "myRef"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "A ",
              "type": "text"
            },
            {
              "code": "CMError",
              "type": "codeVoice"
            },
            {
              "text": " value. See ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager#1670295",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The ",
              "type": "text"
            },
            {
              "code": "NCMBeginMatching",
              "type": "codeVoice"
            },
            {
              "text": " function sets up a QuickDraw-specific matching session, telling the ColorSync Manager to match all colors drawn to the current graphics device using the specified source and destination profiles. ",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The ",
              "type": "text"
            },
            {
              "code": "NCMBeginMatching",
              "type": "codeVoice"
            },
            {
              "text": " function returns a reference to the color-matching session. You must later pass this reference to the function ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805220-cmendmatching",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " to conclude the session.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The source and destination profiles define how the match is to occur. Passing ",
              "type": "text"
            },
            {
              "code": "NULL",
              "type": "codeVoice"
            },
            {
              "text": " for either the source or destination profile is equivalent to passing the system profile. If the current device is a screen device, matching to all screen devices occurs.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The ",
              "type": "text"
            },
            {
              "code": "NCMBeginMatching",
              "type": "codeVoice"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "code": "CMEndMatching",
              "type": "codeVoice"
            },
            {
              "text": " functions can be nested. In such cases, the ColorSync Manager matches to the most recently added profiles first. Therefore, if you want to use the ",
              "type": "text"
            },
            {
              "code": "NCMBeginMatching",
              "type": "codeVoice"
            },
            {
              "text": "– ",
              "type": "text"
            },
            {
              "code": "CMEndMatching",
              "type": "codeVoice"
            },
            {
              "text": " pair to perform a page preview—which typically entails color matching from a source device (scanner) to a destination device (printer) to a preview device (display)— you first call ",
              "type": "text"
            },
            {
              "code": "NCMBeginMatching",
              "type": "codeVoice"
            },
            {
              "text": " with the printer-to-display profiles, and then call ",
              "type": "text"
            },
            {
              "code": "NCMBeginMatching",
              "type": "codeVoice"
            },
            {
              "text": " with the scanner-to-printer profiles. The ColorSync Manager then matches all drawing from the scanner to the printer and then back to the display. The print preview process entails multiprofile transformations. The ColorSync Manager general purpose functions (which include the use of concatenated profiles well suited to print-preview processing) offer an easier and faster way to do this. These functions are described in “Matching Colors Using General Purpose Functions”.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "If you call ",
              "type": "text"
            },
            {
              "code": "NCMBeginMatching",
              "type": "codeVoice"
            },
            {
              "text": " before drawing to the screen’s graphics device (as opposed to an offscreen device), you must call ",
              "type": "text"
            },
            {
              "code": "CMEndMatching",
              "type": "codeVoice"
            },
            {
              "text": " to finish a matching session before calling ",
              "type": "text"
            },
            {
              "code": "WaitNextEvent",
              "type": "codeVoice"
            },
            {
              "text": " or any other routine (such as Window Manager routines) that could draw to the screen. Failing to do so will cause unwanted matching to occur. Furthermore, if a device has color matching enabled, you cannot call the ",
              "type": "text"
            },
            {
              "code": "CopyBits",
              "type": "codeVoice"
            },
            {
              "text": " procedure to copy from it to itself unless the source and destination rectangles are the same.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Even if you call the ",
              "type": "text"
            },
            {
              "code": "NCMBeginMatching",
              "type": "codeVoice"
            },
            {
              "text": " function before calling the QuickDraw ",
              "type": "text"
            },
            {
              "code": "DrawPicture",
              "type": "codeVoice"
            },
            {
              "text": " function, the ColorSync picture comments such as ",
              "type": "text"
            },
            {
              "code": "cmEnableMatching",
              "type": "codeVoice"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "code": "cmDisableMatching",
              "type": "codeVoice"
            },
            {
              "text": " are not acknowledged. For the ColorSync Manager to recognize these comments and allow their use, you must call the function ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805229-ncmuseprofilecomment",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " for color matching using picture comments.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "This function causes matching for the specified devices rather than for the current color graphics port.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The ",
              "type": "text"
            },
            {
              "code": "NCMBeginMatching",
              "type": "codeVoice"
            },
            {
              "text": " function uses QuickDraw and performs color matching in a manner acceptable to most applications. However, if your application needs a finer level of control over color matching, it can use the general purpose functions described in “Matching Colors Using General Purpose Functions”. ",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "1819434",
          "level": 3,
          "text": "Version-Notes",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The parameter descriptions for ",
              "type": "text"
            },
            {
              "code": "src",
              "type": "codeVoice"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "code": "dst",
              "type": "codeVoice"
            },
            {
              "text": " describe changes in how this function is used starting with ColorSync version 2.5.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/applicationservices": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices",
      "kind": "symbol",
      "role": "collection",
      "title": "Application Services",
      "type": "topic",
      "url": "/documentation/applicationservices"
    },
    "doc://com.apple.documentation/documentation/applicationservices/cmprofileref": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/cmprofileref",
      "kind": "symbol",
      "role": "symbol",
      "title": "CMProfileRef",
      "type": "topic",
      "url": "/documentation/applicationservices/cmprofileref"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager",
      "kind": "article",
      "role": "collectionGroup",
      "title": "ColorSync Manager",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager#1670295": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager#1670295",
      "kind": "article",
      "role": "task",
      "title": "Result Codes",
      "type": "section",
      "url": "/documentation/applicationservices/colorsync_manager#1670295"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804940-cmgetdefaultprofilebyspace": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804940-cmgetdefaultprofilebyspace",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMGetDefaultProfileBySpace",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804940-cmgetdefaultprofilebyspace"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804955-cmgetprofilebyavid": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804955-cmgetprofilebyavid",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMGetProfileByAVID",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804955-cmgetprofilebyavid"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805211-cwmatchpixmap": {
      "abstract": [
        {
          "text": "Matches a pixel map in place based on a specified color world. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805211-cwmatchpixmap",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CWMatchPixMap",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1805211-cwmatchpixmap"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805214-cwcheckpixmap": {
      "abstract": [
        {
          "text": "Checks the colors of a pixel map using the profiles of a specified color world to determine whether the colors are in the gamut of the destination device. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805214-cwcheckpixmap",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CWCheckPixMap",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1805214-cwcheckpixmap"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805216-ncmbeginmatching": {
      "abstract": [
        {
          "text": "Sets up a QuickDraw-specific ColorSync matching session, using the specified source and destination profiles. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805216-ncmbeginmatching",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "NCMBeginMatching",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1805216-ncmbeginmatching"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805220-cmendmatching": {
      "abstract": [
        {
          "text": "Concludes a QuickDraw-specific ColorSync matching session initiated by a previous call to the ",
          "type": "text"
        },
        {
          "code": "NCMBeginMatching",
          "type": "codeVoice"
        },
        {
          "text": " function. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805220-cmendmatching",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMEndMatching",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1805220-cmendmatching"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805223-ncmdrawmatchedpicture": {
      "abstract": [
        {
          "text": "Matches a picture’s colors to a destination device’s color gamut, as the picture is drawn, using the specified destination profile.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805223-ncmdrawmatchedpicture",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "NCMDrawMatchedPicture",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1805223-ncmdrawmatchedpicture"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805227-cmenablematchingcomment": {
      "abstract": [
        {
          "text": "Inserts a comment into the currently open picture to turn matching on or off. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805227-cmenablematchingcomment",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMEnableMatchingComment",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1805227-cmenablematchingcomment"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805229-ncmuseprofilecomment": {
      "abstract": [
        {
          "text": "Automatically embeds a profile or a profile identifier into an open picture.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805229-ncmuseprofilecomment",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "NCMUseProfileComment",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1805229-ncmuseprofilecomment"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805211-cwmatchpixmap",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805214-cwcheckpixmap",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805220-cmendmatching",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805223-ncmdrawmatchedpicture",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805227-cmenablematchingcomment",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1805229-ncmuseprofilecomment"
      ],
      "title": "Working With QuickDraw"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/applicationservices/colorsync_manager/1805216-ncmbeginmatching"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    }
  ]
}

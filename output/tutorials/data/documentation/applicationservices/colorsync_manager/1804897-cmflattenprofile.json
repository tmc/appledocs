{
  "abstract": [
    {
      "text": "Transfers a profile stored in an independent disk file to an external profile format that can be embedded in a graphics document.",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/applicationservices",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804897-cmflattenprofile"
  },
  "kind": "symbol",
  "legacy_identifier": 1804897,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "Application Services"
      }
    ],
    "role": "pseudoSymbol",
    "symbolKind": "func",
    "title": "CMFlattenProfile"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "platforms": [],
          "tokens": [
            {
              "kind": "text",
              "text": "CMError CMFlattenProfile ("
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   CMProfileRef prof,"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   UInt32 flags,"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   CMFlattenUPP proc,"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   void *refCon,"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": "   Boolean *preferredCMMnotfound"
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": ");"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A profile reference of type ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/applicationservices/cmprofileref",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " to the profile to flatten. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "prof"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Reserved for future use. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "flags"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A pointer to a function that you provide to perform the low-level data transfer. For more information, see the function ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/applicationservices/cmflattenprocptr",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": ". ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "proc"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A pointer to a reference constant for application data which the color management module (CMM) passes to the ",
                  "type": "text"
                },
                {
                  "code": "CMFlattenProcPtr",
                  "type": "codeVoice"
                },
                {
                  "text": " function each time it calls the function. For example, the reference constant may point to a data structure that holds information required by the ",
                  "type": "text"
                },
                {
                  "code": "CMFlattenProcPtr",
                  "type": "codeVoice"
                },
                {
                  "text": " function to perform the data transfer, such as the reference number to a disk file in which the flattened profile is to be stored.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "Starting with ColorSync version 2.5, the ColorSync Manager calls your transfer function directly, without going through the preferred, or any, CMM.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [],
              "type": "paragraph"
            }
          ],
          "name": "refCon"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A pointer to a flag for whether the preferred CMM was found. On return, has the value ",
                  "type": "text"
                },
                {
                  "code": "true",
                  "type": "codeVoice"
                },
                {
                  "text": " if the CMM specified by the profile was not available to perform flattening or does not support this function and the default CMM was used. Has the value ",
                  "type": "text"
                },
                {
                  "code": "false",
                  "type": "codeVoice"
                },
                {
                  "text": " if the profile’s preferred CMM is able to perform flattening.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "Starting with ColorSync 2.5, the ColorSync Manager calls your transfer function directly, without going through the preferred, or any, CMM. On return, the value of ",
                  "type": "text"
                },
                {
                  "code": "preferredCMMnotfound",
                  "type": "codeVoice"
                },
                {
                  "text": " is guaranteed to be ",
                  "type": "text"
                },
                {
                  "code": "false",
                  "type": "codeVoice"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [],
              "type": "paragraph"
            }
          ],
          "name": "preferredCMMnotfound"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "A ",
              "type": "text"
            },
            {
              "code": "CMError",
              "type": "codeVoice"
            },
            {
              "text": " value. See ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager#1670295",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The ColorSync Manager passes to the CMM the pointer to your profile-flattening function. The CMM calls your function ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/applicationservices/cmflattenprocptr",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " to perform the actual data transfer.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "To unflatten a profile embedded in a graphics document to an independent disk file, use the function “Accessing Profile Elements”. ",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "1819320",
          "level": 3,
          "text": "Version-Notes",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Prior to version 2.5, the ColorSync Manager dispatches the ",
              "type": "text"
            },
            {
              "code": "CMFlattenProfile",
              "type": "codeVoice"
            },
            {
              "text": " function to the CMM specified by the profile whose reference you provide. If the preferred CMM is unavailable or it does not support this function, then the default CMM is used.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Starting with ColorSync version 2.5, the ColorSync Manager calls your transfer function directly, without going through the preferred, or any, CMM. As a result, the value returned in the ",
              "type": "text"
            },
            {
              "code": "preferredCMMnotfound",
              "type": "codeVoice"
            },
            {
              "text": " parameter is guaranteed to be ",
              "type": "text"
            },
            {
              "code": "false",
              "type": "codeVoice"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/applicationservices": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices",
      "kind": "symbol",
      "role": "collection",
      "title": "Application Services",
      "type": "topic",
      "url": "/documentation/applicationservices"
    },
    "doc://com.apple.documentation/documentation/applicationservices/cmflattenprocptr": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/cmflattenprocptr",
      "kind": "symbol",
      "role": "symbol",
      "title": "CMFlattenProcPtr",
      "type": "topic",
      "url": "/documentation/applicationservices/cmflattenprocptr"
    },
    "doc://com.apple.documentation/documentation/applicationservices/cmprofileref": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/cmprofileref",
      "kind": "symbol",
      "role": "symbol",
      "title": "CMProfileRef",
      "type": "topic",
      "url": "/documentation/applicationservices/cmprofileref"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager",
      "kind": "article",
      "role": "collectionGroup",
      "title": "ColorSync Manager",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager#1670295": {
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager#1670295",
      "kind": "article",
      "role": "task",
      "title": "Result Codes",
      "type": "section",
      "url": "/documentation/applicationservices/colorsync_manager#1670295"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804853-cmopenprofile": {
      "abstract": [
        {
          "text": "Opens the specified profile and returns a reference to the profile.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804853-cmopenprofile",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMOpenProfile",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804853-cmopenprofile"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804856-cmvalidateprofile": {
      "abstract": [
        {
          "text": "Indicates whether the specified profile contains the minimum set of elements required by the current color management module (CMM) for color matching or color checking.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804856-cmvalidateprofile",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMValidateProfile",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804856-cmvalidateprofile"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804861-cmcloseprofile": {
      "abstract": [
        {
          "text": "Decrements the reference count for the specified profile reference and, if the reference count reaches 0, frees all private memory and other resources associated with the profile.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804861-cmcloseprofile",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMCloseProfile",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804861-cmcloseprofile"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804864-cmupdateprofile": {
      "abstract": [
        {
          "text": "Saves modifications to the specified profile.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804864-cmupdateprofile",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMUpdateProfile",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804864-cmupdateprofile"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804870-cmcopyprofile": {
      "abstract": [
        {
          "text": "Duplicates the specified existing profile.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804870-cmcopyprofile",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMCopyProfile",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804870-cmcopyprofile"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804872-cmprofilemodified": {
      "abstract": [
        {
          "text": "Indicates whether the specified profile has been modified since it was created or last updated.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804872-cmprofilemodified",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMProfileModified",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804872-cmprofilemodified"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804876-cmgetprofilemd5": {
      "abstract": [
        {
          "text": "Gets the MD5 checksum from the profile header (message digest)",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804876-cmgetprofilemd5",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMGetProfileMD5",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804876-cmgetprofilemd5"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804879-cmgetprofileheader": {
      "abstract": [
        {
          "text": "Obtains the profile header for the specified profile. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804879-cmgetprofileheader",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMGetProfileHeader",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804879-cmgetprofileheader"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804882-cmsetprofileheader": {
      "abstract": [
        {
          "text": "Sets the header for the specified profile. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804882-cmsetprofileheader",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMSetProfileHeader",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804882-cmsetprofileheader"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804885-cmgetprofilelocation": {
      "abstract": [
        {
          "text": "Obtains the location of a profile based on the specified profile reference.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804885-cmgetprofilelocation",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMGetProfileLocation",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804885-cmgetprofilelocation"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804889-ncmgetprofilelocation": {
      "abstract": [
        {
          "text": "Obtains either a profile location structure for a specified profile or the size of the location structure for the profile.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804889-ncmgetprofilelocation",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "NCMGetProfileLocation",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804889-ncmgetprofilelocation"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804891-cmcloneprofileref": {
      "abstract": [
        {
          "text": "Increments the reference count for the specified profile reference.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804891-cmcloneprofileref",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMCloneProfileRef",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804891-cmcloneprofileref"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804894-cmgetprofilerefcount": {
      "abstract": [
        {
          "text": "Obtains the current reference count for the specified profile.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804894-cmgetprofilerefcount",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMGetProfileRefCount",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804894-cmgetprofilerefcount"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804897-cmflattenprofile": {
      "abstract": [
        {
          "text": "Transfers a profile stored in an independent disk file to an external profile format that can be embedded in a graphics document.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804897-cmflattenprofile",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "CMFlattenProfile",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804897-cmflattenprofile"
    },
    "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804901-ncmunflattenprofile": {
      "abstract": [
        {
          "text": "Unflattens a previously flattened profile.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804901-ncmunflattenprofile",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "NCMUnflattenProfile",
      "type": "topic",
      "url": "/documentation/applicationservices/colorsync_manager/1804901-ncmunflattenprofile"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804853-cmopenprofile",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804856-cmvalidateprofile",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804861-cmcloseprofile",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804864-cmupdateprofile",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804870-cmcopyprofile",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804872-cmprofilemodified",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804876-cmgetprofilemd5",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804879-cmgetprofileheader",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804882-cmsetprofileheader",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804885-cmgetprofilelocation",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804889-ncmgetprofilelocation",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804891-cmcloneprofileref",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804894-cmgetprofilerefcount",
        "doc://com.apple.documentation/documentation/applicationservices/colorsync_manager/1804901-ncmunflattenprofile"
      ],
      "title": "Accessing Profiles"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/applicationservices/colorsync_manager/1804897-cmflattenprofile"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    }
  ]
}

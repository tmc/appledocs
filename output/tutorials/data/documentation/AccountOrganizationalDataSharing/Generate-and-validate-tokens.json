{
  "abstract": [
    {
      "text": "Validate an authorization grant code delivered to your app to obtain tokens, or validate an existing refresh token.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "data",
    "url": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/Generate-and-validate-tokens"
  },
  "kind": "symbol",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "rest:oauth2:post:auth-oauth2-v2-token",
    "modules": [
      {
        "name": "Account & Organizational Data Sharing"
      }
    ],
    "navigatorTitle": [
      {
        "kind": "identifier",
        "text": "Generate and validate tokens"
      }
    ],
    "platforms": [
      {
        "beta": false,
        "introducedAt": "1.0",
        "name": "AccountOrganizationalDataSharing"
      }
    ],
    "role": "symbol",
    "roleHeading": "Web Endpoint",
    "symbolKind": "httpRequest",
    "title": "Generate and validate tokens"
  },
  "primaryContentSections": [
    {
      "kind": "restEndpoint",
      "title": "URL",
      "tokens": [
        {
          "kind": "method",
          "text": "POST"
        },
        {
          "kind": "text",
          "text": " "
        },
        {
          "kind": "baseURL",
          "text": "https://appleid.apple.com/"
        },
        {
          "kind": "path",
          "text": "auth/oauth2/v2/token"
        }
      ]
    },
    {
      "bodyContentType": [
        {
          "kind": "text",
          "text": "form-data"
        }
      ],
      "content": [
        {
          "inlineContent": [
            {
              "text": "The list of input parameters required for the server to validate the authorization code or refresh token.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "restBody",
      "mimeType": "application/x-www-form-urlencoded",
      "parameters": [
        {
          "attributes": [],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The identifier (App ID or Services ID) for your app. To help prevent the possibility of exposing sensitive data to the end user, the identifier must not include your Team ID.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "client_id",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "attributes": [],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A secret JWT, generated by the developer, that uses the Account and Organizational Data Sharing private key associated with your developer account. Authorization code and refresh token validation requests require this parameter.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "client_secret",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "attributes": [],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The authorization code received in an authorization response sent to your app. The code is single-use only and valid for five minutes. Authorization code validation requests require this parameter.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "code",
          "required": false,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "attributes": [],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The grant type determines how the client app interacts with the validation server. Authorization code and refresh token validation requests require this parameter. For authorization code validation, use ",
                  "type": "text"
                },
                {
                  "code": "authorization_code",
                  "type": "codeVoice"
                },
                {
                  "text": ". For refresh token validation requests, use ",
                  "type": "text"
                },
                {
                  "code": "refresh_token",
                  "type": "codeVoice"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "grant_type",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "attributes": [],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The destination URI provided in the authorization request when authorizing a user with your app, if applicable. The URI must use the HTTPS protocol, include a domain name, and canâ€™t contain an IP address or ",
                  "type": "text"
                },
                {
                  "code": "localhost",
                  "type": "codeVoice"
                },
                {
                  "text": ". Authorization code requests require this parameter.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "redirect_uri",
          "required": false,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "attributes": [],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The refresh token received from the validation server during an authorization request. Refresh token validation requests require this parameter.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "refresh_token",
          "required": false,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        }
      ],
      "title": "HTTP Body"
    },
    {
      "items": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The request was successful.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimeType": "application/json",
          "reason": "OK",
          "status": 200,
          "type": [
            {
              "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/TokenResponse",
              "kind": "typeIdentifier",
              "preciseIdentifier": "data:oauth2:TokenResponse",
              "text": "TokenResponse"
            }
          ]
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The server was unable to process the request.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimeType": "application/json",
          "reason": "Bad Request",
          "status": 400,
          "type": [
            {
              "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/ErrorResponse",
              "kind": "typeIdentifier",
              "preciseIdentifier": "data:oauth2:ErrorResponse",
              "text": "ErrorResponse"
            }
          ]
        }
      ],
      "kind": "restResponses",
      "title": "Response Codes"
    },
    {
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The validation server returns a ",
              "type": "text"
            },
            {
              "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/TokenResponse",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " object in the response body of a successful validation request. Use this endpoint to either authorize a user by validating the authorization code received by your app, or by validating an existing refresh token to verify a user session or obtain access tokens.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Validate-the-authorization-grant-code",
          "level": 3,
          "text": "Validate the authorization grant code",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When you send an authorization request to the validation server, include the following form data parameters:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "client_id",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "client_secret",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "code",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "grant_type",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "redirect_uri",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "When authorizing a user with your app, include the ",
                  "type": "text"
                },
                {
                  "code": "redirect_uri",
                  "type": "codeVoice"
                },
                {
                  "text": " parameter only if the application provided a ",
                  "type": "text"
                },
                {
                  "code": "redirect_uri",
                  "type": "codeVoice"
                },
                {
                  "text": " in the initial authorization request.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "text": "For information on how to create the JWT that you use as the client secret, see ",
              "type": "text"
            },
            {
              "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/creating-a-client-secret",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The following is an example authorization validation request URL via ",
              "type": "text"
            },
            {
              "code": "curl",
              "type": "codeVoice"
            },
            {
              "text": ":",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "curl -v POST \"https://appleid.apple.com/auth/oauth2/v2/token\" \\",
            "-H 'content-type: application/x-www-form-urlencoded' \\",
            "-d 'client_id=CLIENT_ID' \\",
            "-d 'client_secret=CLIENT_SECRET' \\",
            "-d 'code=CODE' \\",
            "-d 'grant_type=authorization_code' \\",
            "-d 'redirect_uri=REDIRECT_URI'"
          ],
          "syntax": "sh",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "After the server validates the authorization code, the endpoint returns the identity token, an access token, and a refresh token. The following is an example authorization validation response:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "\t\"access_token\": \"adg61...670r9\",",
            "\t\"token_type\": \"Bearer\",",
            "\t\"expires_in\": 3600,",
            "\t\"refresh_token\": \"rca7...lABoQ\",",
            "\t\"id_token\": \"eyJra...96sZg\"",
            "}"
          ],
          "syntax": "js",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Use the refresh token to verify the user session from the server and obtain access tokens.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Validate-an-existing-refresh-token",
          "level": 3,
          "text": "Validate an existing refresh token",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When performing a validation request, you must include the following form data parameters:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "client_id",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "client_secret",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "grant_type",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "refresh_token",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "For information on how to create the JWT you use as the client secret, see ",
              "type": "text"
            },
            {
              "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/creating-a-client-secret",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The following is an example validation request URL using ",
              "type": "text"
            },
            {
              "code": "curl",
              "type": "codeVoice"
            },
            {
              "text": ":",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "curl -v POST \"https://appleid.apple.com/auth/oauth2/v2/token\" \\",
            "-H 'content-type: application/x-www-form-urlencoded' \\",
            "-d 'client_id=CLIENT_ID' \\",
            "-d 'client_secret=CLIENT_SECRET' \\",
            "-d 'grant_type=refresh_token' \\",
            "-d 'refresh_token=REFRESH_TOKEN'"
          ],
          "syntax": "sh",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "After the server validates the refresh token, the endpoint returns the identity token and an access token. The following is an example refresh token validation response:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"access_token\": \"beg510...670r9\",",
            "  \"token_type\": \"Bearer\",",
            "  \"expires_in\": 3600,",
            "  \"id_token\": \"eyJra...96sZg\"",
            "}"
          ],
          "syntax": "js",
          "type": "codeListing"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing": {
      "abstract": [
        {
          "text": "Provide people with the ability to authorize your apps and websites that access information about them on Apple REST services, like Roster API.",
          "type": "text"
        }
      ],
      "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing",
      "kind": "symbol",
      "role": "collection",
      "title": "Account & Organizational Data Sharing",
      "type": "topic",
      "url": "/documentation/accountorganizationaldatasharing"
    },
    "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/ErrorResponse": {
      "abstract": [
        {
          "text": "The error object returned after an unsuccessful request.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "object "
        },
        {
          "kind": "identifier",
          "text": "ErrorResponse"
        }
      ],
      "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/ErrorResponse",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "ErrorResponse"
        }
      ],
      "role": "symbol",
      "title": "ErrorResponse",
      "type": "topic",
      "url": "/documentation/accountorganizationaldatasharing/errorresponse"
    },
    "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/Fetch-Apple's-public-key-for-verifying-token-signature": {
      "abstract": [
        {
          "text": "Retrieve the public key associated with the cryptographic identity Apple uses to sign the token.",
          "type": "text"
        }
      ],
      "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/Fetch-Apple's-public-key-for-verifying-token-signature",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Fetch Apple's public key for verifying token signature"
        }
      ],
      "role": "symbol",
      "title": "Fetch Apple's public key for verifying token signature",
      "type": "topic",
      "url": "/documentation/accountorganizationaldatasharing/fetch-apple's-public-key-for-verifying-token-signature"
    },
    "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/Generate-and-validate-tokens": {
      "abstract": [
        {
          "text": "Validate an authorization grant code delivered to your app to obtain tokens, or validate an existing refresh token.",
          "type": "text"
        }
      ],
      "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/Generate-and-validate-tokens",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Generate and validate tokens"
        }
      ],
      "role": "symbol",
      "title": "Generate and validate tokens",
      "type": "topic",
      "url": "/documentation/accountorganizationaldatasharing/generate-and-validate-tokens"
    },
    "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/TokenResponse": {
      "abstract": [
        {
          "text": "The response token object returned on a successful request.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "object "
        },
        {
          "kind": "identifier",
          "text": "TokenResponse"
        }
      ],
      "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/TokenResponse",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "TokenResponse"
        }
      ],
      "role": "symbol",
      "title": "TokenResponse",
      "type": "topic",
      "url": "/documentation/accountorganizationaldatasharing/tokenresponse"
    },
    "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/creating-a-client-secret": {
      "abstract": [
        {
          "text": "Generate a signed token to identify your client application.",
          "type": "text"
        }
      ],
      "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/creating-a-client-secret",
      "kind": "article",
      "role": "article",
      "title": "Creating a client secret",
      "type": "topic",
      "url": "/documentation/accountorganizationaldatasharing/creating-a-client-secret"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Generating-tokens",
      "generated": true,
      "identifiers": [
        "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/creating-a-client-secret",
        "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/Fetch-Apple's-public-key-for-verifying-token-signature"
      ],
      "title": "Generating tokens"
    }
  ],
  "variants": [
    {
      "paths": [
        "/documentation/accountorganizationaldatasharing/generate-and-validate-tokens"
      ],
      "traits": [
        {
          "interfaceLanguage": "data"
        }
      ]
    }
  ]
}

{
  "abstract": [
    {
      "text": "Creates a bitmap image from an existing image and an image mask.",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coregraphics",
        "doc://com.apple.documentation/documentation/coregraphics/cgimage"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.documentation/documentation/coregraphics/cgimage/1456337-masking"
  },
  "kind": "symbol",
  "legacy_identifier": 1456337,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:@F@CGImageCreateWithMask",
    "fragments": [
      {
        "kind": "text",
        "text": "func "
      },
      {
        "kind": "identifier",
        "text": "masking"
      },
      {
        "kind": "text",
        "text": "(CGImage) -> CGImage?"
      }
    ],
    "modules": [
      {
        "name": "Core Graphics"
      }
    ],
    "parent": {
      "title": "CGImage"
    },
    "platforms": [
      {
        "current": "18.4",
        "introducedAt": "2.0",
        "name": "iOS"
      },
      {
        "current": "18.4",
        "introducedAt": "2.0",
        "name": "iPadOS"
      },
      {
        "current": "18.4",
        "introducedAt": "13.1",
        "name": "Mac Catalyst"
      },
      {
        "current": "15.4",
        "introducedAt": "10.4",
        "name": "macOS"
      },
      {
        "current": "18.4",
        "introducedAt": "9.0",
        "name": "tvOS"
      },
      {
        "current": "2.4",
        "introducedAt": "1.0",
        "name": "visionOS"
      },
      {
        "current": "11.4",
        "introducedAt": "2.0",
        "name": "watchOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Instance Method",
    "symbolKind": "instm",
    "title": "masking(_:)"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "swift"
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "Mac Catalyst",
            "macOS",
            "tvOS",
            "visionOS",
            "watchOS"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "func"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "masking"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "externalParam",
              "text": "_"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "mask"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimage",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGImageRef",
              "text": "CGImage"
            },
            {
              "kind": "text",
              "text": ") -> "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimage",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@CGImageRef",
              "text": "CGImage"
            },
            {
              "kind": "text",
              "text": "?"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "swift"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A mask. If the mask is an image, it must be in the DeviceGray color space, must not have an alpha component, and may not itself be masked by an image mask or a masking color. If the mask is not the same size as the image specified by the ",
                  "type": "text"
                },
                {
                  "code": "image",
                  "type": "codeVoice"
                },
                {
                  "text": " parameter, the mask is scaled to fit the image.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "mask"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "An image created by masking ",
              "type": "text"
            },
            {
              "code": "image",
              "type": "codeVoice"
            },
            {
              "text": " with ",
              "type": "text"
            },
            {
              "code": "mask",
              "type": "codeVoice"
            },
            {
              "text": ". You are responsible for releasing this object by calling ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/coregraphics/1556742-cgimagerelease",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The resulting image depends on whether the ",
              "type": "text"
            },
            {
              "code": "mask",
              "type": "codeVoice"
            },
            {
              "text": " parameter is an image mask or an image. If the ",
              "type": "text"
            },
            {
              "code": "mask",
              "type": "codeVoice"
            },
            {
              "text": " parameter is an image mask, then the source samples of the image mask act as an inverse alpha value. That is, if the value of a source sample in the image mask is S, then the corresponding region in ",
              "type": "text"
            },
            {
              "code": "image",
              "type": "codeVoice"
            },
            {
              "text": " is blended with the destination using an alpha value of (1-S). For example, if S is 1, then the region is not painted, while if S is 0, the region is fully painted.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "If the ",
              "type": "text"
            },
            {
              "code": "mask",
              "type": "codeVoice"
            },
            {
              "text": " parameter is an image, then it serves as an alpha mask for blending the image onto the destination. The source samples of ",
              "type": "text"
            },
            {
              "code": "mask",
              "type": "codeVoice"
            },
            {
              "text": "' act as an alpha value. If the value of the source sample in mask is S, then the corresponding region in image is blended with the destination with an alpha of S. For example, if S is 0, then the region is not painted, while if S is 1, the region is fully painted.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coregraphics": {
      "identifier": "doc://com.apple.documentation/documentation/coregraphics",
      "kind": "symbol",
      "role": "collection",
      "title": "Core Graphics",
      "type": "topic",
      "url": "/documentation/coregraphics"
    },
    "doc://com.apple.documentation/documentation/coregraphics/1556742-cgimagerelease": {
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/1556742-cgimagerelease",
      "kind": "symbol",
      "role": "symbol",
      "title": "CGImageRelease",
      "type": "topic",
      "url": "/documentation/coregraphics/1556742-cgimagerelease"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgimage": {
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimage",
      "kind": "symbol",
      "role": "symbol",
      "title": "CGImage",
      "type": "topic",
      "url": "/documentation/coregraphics/cgimage"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgimage/1454358-copy": {
      "abstract": [
        {
          "text": "Creates a bitmap image by masking an existing bitmap image with the provided color values.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "copy"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "maskingColorComponents"
        },
        {
          "kind": "text",
          "text": ": [CGFloat]) -> CGImage?"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimage/1454358-copy",
      "kind": "symbol",
      "role": "symbol",
      "title": "copy(maskingColorComponents:)",
      "type": "topic",
      "url": "/documentation/coregraphics/cgimage/1454358-copy"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgimage/1454683-cropping": {
      "abstract": [
        {
          "text": "Creates a bitmap image using the data contained within a subregion of an existing bitmap image.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "cropping"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "to"
        },
        {
          "kind": "text",
          "text": ": CGRect) -> CGImage?"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimage/1454683-cropping",
      "kind": "symbol",
      "role": "symbol",
      "title": "cropping(to:)",
      "type": "topic",
      "url": "/documentation/coregraphics/cgimage/1454683-cropping"
    },
    "doc://com.apple.documentation/documentation/coregraphics/cgimage/1456337-masking": {
      "abstract": [
        {
          "text": "Creates a bitmap image from an existing image and an image mask.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "masking"
        },
        {
          "kind": "text",
          "text": "(CGImage) -> CGImage?"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coregraphics/cgimage/1456337-masking",
      "kind": "symbol",
      "role": "symbol",
      "title": "masking(_:)",
      "type": "topic",
      "url": "/documentation/coregraphics/cgimage/1456337-masking"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/coregraphics/cgimage/1454683-cropping",
        "doc://com.apple.documentation/documentation/coregraphics/cgimage/1454358-copy"
      ],
      "title": "Creating Images by Modifying an Image"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/coregraphics/1456337-cgimagecreatewithmask"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    },
    {
      "paths": [
        "documentation/coregraphics/cgimage/1456337-masking"
      ],
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ]
    }
  ]
}

{
  "abstract": [
    {
      "text": "Create JSON Web Tokens signed with your private key to authorize requests for App Store Server API and External Purchase Server API.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "data",
    "url": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/generating-json-web-tokens-for-api-requests"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "App Store Server API"
      }
    ],
    "role": "article",
    "roleHeading": "Article",
    "title": "Generating JSON Web Tokens for API requests"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "JSON Web Token (JWT) is an open standard (",
              "type": "text"
            },
            {
              "identifier": "https://tools.ietf.org/html/rfc7519",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ") that defines a way to securely transmit information. The ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/ExternalPurchaseServerAPI",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " require a JWT to authorize each request you make to the API. You create the token, signing it with the private key you downloaded from App Store Connect. For more information about creating keys, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/creating-api-keys-to-authorize-api-requests",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "To generate a signed JWT:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Create the JWT header.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Create the JWT payload.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Sign the JWT.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "orderedList"
        },
        {
          "inlineContent": [
            {
              "text": "Include the signed JWT in the authorization header of each API request. Generate a new signed JWT for each new request.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "The App Store Server Library provides an API client and creates JWTs for use with the ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": ". For more information, see ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/simplifying-your-implementation-by-using-the-app-store-server-library",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Tip",
          "style": "tip",
          "type": "aside"
        },
        {
          "anchor": "Create-the-JWT-header",
          "level": 3,
          "text": "Create the JWT header",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "To create a JWT to communicate with the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " or ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/ExternalPurchaseServerAPI",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ", use the following fields and values in the header:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "header": "row",
          "rows": [
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "Header Field",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Value",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "alg",
                      "type": "codeVoice"
                    },
                    {
                      "text": " - Encryption Algorithm",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "code": "ES256",
                      "type": "codeVoice"
                    },
                    {
                      "text": "  ",
                      "type": "text"
                    },
                    {
                      "identifier": "spacer",
                      "type": "image"
                    },
                    {
                      "text": " All JWTs must be signed with ES256 encryption",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "kid",
                      "type": "codeVoice"
                    },
                    {
                      "text": " - Key ID",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Your private key ID from App Store Connect (Ex: ",
                      "type": "text"
                    },
                    {
                      "code": "2X9R4HXF34",
                      "type": "codeVoice"
                    },
                    {
                      "text": ")",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "typ",
                      "type": "codeVoice"
                    },
                    {
                      "text": " - Token Type",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "code": "JWT",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ]
          ],
          "type": "table"
        },
        {
          "inlineContent": [
            {
              "text": "To get your key ID, copy it from App Store Connect by logging in to ",
              "type": "text"
            },
            {
              "identifier": "https://appstoreconnect.apple.com/",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ", then:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Select Users and Access, then select the Keys tab.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The key IDs appear in a column under the Active heading. Hover the cursor next to a key ID to display the Copy Key ID link.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Click Copy Key ID.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "orderedList"
        },
        {
          "inlineContent": [
            {
              "text": "If you have more than one API key, copy the key ID of the private key that you use to sign the JWT.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Here’s an example of a JWT header:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "\"alg\": \"ES256\",",
            "\"kid\": \"2X9R4HXF34\",",
            "\"typ\": \"JWT\"",
            "}"
          ],
          "syntax": "javascript",
          "type": "codeListing"
        },
        {
          "anchor": "Create-the-JWT-payload",
          "level": 3,
          "text": "Create the JWT payload",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The JWT payload contains information specific to the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/ExternalPurchaseServerAPI",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ", such as issuer ID and expiration time. Use the following fields — also known as JWT claims — to include these values in the JWT payload:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "header": "row",
          "rows": [
            [
              [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "Payload Field",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "Value",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "iss",
                      "type": "codeVoice"
                    },
                    {
                      "text": " - Issuer",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Your issuer ID from the Keys page in App Store Connect (Ex: “",
                      "type": "text"
                    },
                    {
                      "code": "57246542-96fe-1a63-e053-0824d011072a\"",
                      "type": "codeVoice"
                    },
                    {
                      "text": ")",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "iat",
                      "type": "codeVoice"
                    },
                    {
                      "text": " - Issued At",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "The time at which you issue the token, in UNIX time, in seconds (Ex: ",
                      "type": "text"
                    },
                    {
                      "code": "1623085200",
                      "type": "codeVoice"
                    },
                    {
                      "text": ")",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "exp",
                      "type": "codeVoice"
                    },
                    {
                      "text": " - Expiration Time",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "The token’s expiration time, in UNIX time, in seconds. Tokens that expire more than 60 minutes after the time in ",
                      "type": "text"
                    },
                    {
                      "code": "iat",
                      "type": "codeVoice"
                    },
                    {
                      "text": " are not valid (Ex: ",
                      "type": "text"
                    },
                    {
                      "code": "1623086400",
                      "type": "codeVoice"
                    },
                    {
                      "text": ")",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "aud",
                      "type": "codeVoice"
                    },
                    {
                      "text": " - Audience",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "code": "appstoreconnect-v1",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "bid",
                      "type": "codeVoice"
                    },
                    {
                      "text": " - Bundle ID",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Your app’s bundle ID (Ex: ",
                      "type": "text"
                    },
                    {
                      "code": "“com.example.testbundleid”)",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ]
          ],
          "type": "table"
        },
        {
          "inlineContent": [
            {
              "text": "To get your issuer ID, log in to ",
              "type": "text"
            },
            {
              "identifier": "https://appstoreconnect.apple.com/",
              "isActive": true,
              "overridingTitle": "App Store Connect",
              "overridingTitleInlineContent": [
                {
                  "text": "App Store Connect",
                  "type": "text"
                }
              ],
              "type": "reference"
            },
            {
              "text": ", then:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Select Users and Access, then select the Keys tab.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The issuer ID appears near the top of the page. To copy the issuer ID, click Copy next to the ID.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "orderedList"
        },
        {
          "inlineContent": [
            {
              "text": "Here’s an example of a JWT payload:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"iss\": \"57246542-96fe-1a63e053-0824d011072a\",",
            "  \"iat\": 1623085200,",
            "  \"exp\": 1623086400,",
            "  \"aud\": \"appstoreconnect-v1\",",
            "  \"bid\": \"com.example.testbundleid\"",
            "}"
          ],
          "syntax": "javascript",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Note that the JWT is valid for up to one hour after the time you indicate in the ",
              "type": "text"
            },
            {
              "code": "iat",
              "type": "codeVoice"
            },
            {
              "text": " field, or it expires sooner if you set the ",
              "type": "text"
            },
            {
              "code": "exp",
              "type": "codeVoice"
            },
            {
              "text": " field for an earlier time.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Sign-the-JWT",
          "level": 3,
          "text": "Sign the JWT",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Use the private key associated with the key ID you specified in the header to sign the token using ES256 encryption.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "There are a variety of open source libraries available online for creating and signing JWT tokens. See ",
              "type": "text"
            },
            {
              "identifier": "https://jwt.io/",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " for more information.  For calls to the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ", consider using the App Store Server Library to create the JWTs instead. For more information, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/simplifying-your-implementation-by-using-the-app-store-server-library",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Include-the-JWT-in-the-authorization-header-of-the-request",
          "level": 3,
          "text": "Include the JWT in the authorization header of the request",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "After you create and sign the JWT, provide it in the request’s authorization header as a bearer token.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The following example for the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " shows a ",
              "type": "text"
            },
            {
              "code": "curl",
              "type": "codeVoice"
            },
            {
              "text": " command using a bearer token. Replace the text ",
              "type": "text"
            },
            {
              "code": "[signed token]",
              "type": "codeVoice"
            },
            {
              "text": " with the value of the signed JWT itself. Replace ",
              "type": "text"
            },
            {
              "code": "{transactionId}",
              "type": "codeVoice"
            },
            {
              "text": " with a transaction identifier of your customer.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "curl -v -H 'Authorization: Bearer [signed token]' ",
            "\"https://api.storekit.itunes.apple.com/inApps/v1/subscriptions/{transactionId}\""
          ],
          "syntax": "other",
          "type": "codeListing"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI": {
      "abstract": [
        {
          "text": "Manage your customers’ App Store transactions from your server.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI",
      "kind": "symbol",
      "role": "collection",
      "title": "App Store Server API",
      "type": "topic",
      "url": "/documentation/appstoreserverapi"
    },
    "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/app-store-server-api-changelog": {
      "abstract": [
        {
          "text": "Learn about new features and updates in the App Store Server API.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/app-store-server-api-changelog",
      "kind": "article",
      "role": "article",
      "title": "App Store Server API changelog",
      "type": "topic",
      "url": "/documentation/appstoreserverapi/app-store-server-api-changelog"
    },
    "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/creating-api-keys-to-authorize-api-requests": {
      "abstract": [
        {
          "text": "Create API keys you use to sign JSON Web Tokens and authorize API requests.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/creating-api-keys-to-authorize-api-requests",
      "kind": "article",
      "role": "article",
      "title": "Creating API keys to authorize API requests",
      "type": "topic",
      "url": "/documentation/appstoreserverapi/creating-api-keys-to-authorize-api-requests"
    },
    "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/identifying-rate-limits": {
      "abstract": [
        {
          "text": "Recognize the rate limits that apply to App Store Server API endpoints and handle them in your code.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/identifying-rate-limits",
      "kind": "article",
      "role": "article",
      "title": "Identifying rate limits",
      "type": "topic",
      "url": "/documentation/appstoreserverapi/identifying-rate-limits"
    },
    "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/simplifying-your-implementation-by-using-the-app-store-server-library": {
      "abstract": [
        {
          "text": "Use Apple’s open source library to create JSON Web Tokens (JWT) to authorize your calls, verify transactions, extract transaction identifiers from receipts, and more.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/simplifying-your-implementation-by-using-the-app-store-server-library",
      "kind": "article",
      "role": "article",
      "title": "Simplifying your implementation by using the App Store Server Library",
      "type": "topic",
      "url": "/documentation/appstoreserverapi/simplifying-your-implementation-by-using-the-app-store-server-library"
    },
    "doc://com.apple.documentation/documentation/ExternalPurchaseServerAPI": {
      "abstract": [
        {
          "text": "Send and manage reports you send to Apple for tokens you receive when your app provides external purchases for digital goods and services.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/ExternalPurchaseServerAPI",
      "kind": "symbol",
      "role": "collection",
      "title": "External Purchase Server API",
      "type": "topic",
      "url": "/documentation/ExternalPurchaseServerAPI"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "https://appstoreconnect.apple.com/": {
      "identifier": "https://appstoreconnect.apple.com/",
      "title": "App Store Connect",
      "titleInlineContent": [
        {
          "text": "App Store Connect",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://appstoreconnect.apple.com/"
    },
    "https://jwt.io/": {
      "identifier": "https://jwt.io/",
      "title": "JWT.io",
      "titleInlineContent": [
        {
          "text": "JWT.io",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://jwt.io/"
    },
    "https://tools.ietf.org/html/rfc7519": {
      "identifier": "https://tools.ietf.org/html/rfc7519",
      "title": "RFC 7519",
      "titleInlineContent": [
        {
          "text": "RFC 7519",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://tools.ietf.org/html/rfc7519"
    },
    "spacer": {
      "alt": null,
      "identifier": "spacer",
      "type": "image",
      "variants": [
        {
          "traits": [
            "1x",
            "light"
          ],
          "url": "https://docs-assets.developer.apple.com/published/67dc4b07a8d84366d4cc0e812eb40b4a/spacer.png"
        }
      ]
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Essentials",
      "generated": true,
      "identifiers": [
        "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/simplifying-your-implementation-by-using-the-app-store-server-library",
        "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/creating-api-keys-to-authorize-api-requests",
        "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/identifying-rate-limits",
        "doc://com.apple.appstoreserverapi/documentation/AppStoreServerAPI/app-store-server-api-changelog"
      ],
      "title": "Essentials"
    }
  ],
  "variants": [
    {
      "paths": [
        "/documentation/appstoreserverapi/generating-json-web-tokens-for-api-requests"
      ],
      "traits": [
        {
          "interfaceLanguage": "data"
        }
      ]
    }
  ]
}

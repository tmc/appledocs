{
  "abstract": [
    {
      "text": "Use sample group structures to represent encoder delay for AAC sound tracks.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.qtff/documentation/quicktime-file-format",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Media_data_atom_types",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Sound_media",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Appendix_G_Audio_priming_handling_encoder_delay_in_AAC"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Summary_using_track_structures_to_represent_encoder_delay"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "QuickTime File Format"
      }
    ],
    "role": "article",
    "roleHeading": "Article",
    "title": "Representing encoder delay with track structures"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "Overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When using sample group structures in representing encoder delay for AAC sound tracks:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Include a version 1 sample group description atom with grouping type set to ",
                      "type": "text"
                    },
                    {
                      "code": "‘roll’",
                      "type": "codeVoice"
                    },
                    {
                      "text": ". Set default length to ",
                      "type": "text"
                    },
                    {
                      "code": "2",
                      "type": "codeVoice"
                    },
                    {
                      "text": " (bytes) for audio entries. Follow that with the payload data: the typical value is ",
                      "type": "text"
                    },
                    {
                      "code": "-1",
                      "type": "codeVoice"
                    },
                    {
                      "text": ", meaning one preceding AAC packet, which is the theoretical minimum decoder delay of 1024 samples.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Include a version 0 sample-to-group atom with a ",
                      "type": "text"
                    },
                    {
                      "code": "'roll'",
                      "type": "codeVoice"
                    },
                    {
                      "text": " grouping type. By including this, you associate the AAC packets with the corresponding sample group description atom. All AAC packets including the encoder delay must be associated with the sample group in the table data’s sample count field. Typically, the sample count for this sample-to-group atom’s table data corresponds with the number of media samples in the track.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "These two sample group structure atoms in addition to the edit list atom, properly composed, form a complete implementation to explicitly represent the temporal position of the source audio samples in an AAC encoded track.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Appendix_G_Audio_priming_handling_encoder_delay_in_AAC": {
      "abstract": [
        {
          "text": "Position a source audio signal in a sound track to handle encoder delay.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Appendix_G_Audio_priming_handling_encoder_delay_in_AAC",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Audio priming-handling encoder delay in AAC",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/appendix_g_audio_priming_handling_encoder_delay_in_aac"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Background_AAC_encoding": {
      "abstract": [
        {
          "text": "AAC requires data beyond the source PCM audio samples in order to correctly encode and decode audio samples due to the nature of the encoding algorithm.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Background_AAC_encoding",
      "kind": "article",
      "role": "article",
      "title": "AAC encoding background",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/background_aac_encoding"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Example_representing_encoder_delay_explicitly": {
      "abstract": [
        {
          "text": "Review an example that represents the temporal position of 5 seconds of 48kHz PCM audio encoded in a 48kHz AAC sound track.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Example_representing_encoder_delay_explicitly",
      "kind": "article",
      "role": "article",
      "title": "Representing encoder delay explicitly",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/example_representing_encoder_delay_explicitly"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Historical_solution_implicit_encoder_delay": {
      "abstract": [
        {
          "text": "Implicit encoder delay uses the most common delay of 2112 audio samples.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Historical_solution_implicit_encoder_delay",
      "kind": "article",
      "role": "article",
      "title": "Historical solution for implicit encoder delay",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/historical_solution_implicit_encoder_delay"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Media_data_atom_types": {
      "abstract": [
        {
          "text": "Store different types of media data, including video, sound, subtitles, and more.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Media_data_atom_types",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Media data atom types",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/media_data_atom_types"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Sound_media": {
      "abstract": [
        {
          "text": "Store compressed and uncompressed audio data in QuickTime movies.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Sound_media",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Sound media",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/sound_media"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/The_timing_and_synchronization_problem": {
      "abstract": [
        {
          "text": "Trim the silent priming samples to preserve correct synchronization.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/The_timing_and_synchronization_problem",
      "kind": "article",
      "role": "article",
      "title": "The timing and synchronization problem",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/the_timing_and_synchronization_problem"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Using_track_structures_to_represent_encode_delay_explictly": {
      "abstract": [
        {
          "text": "Represent encoder delay explicitly with an edit list atom and sample group structures.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Using_track_structures_to_represent_encode_delay_explictly",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Using track structures to represent encoder delay explicitly",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/using_track_structures_to_represent_encode_delay_explictly"
    },
    "doc://com.apple.qtff/documentation/quicktime-file-format": {
      "abstract": [
        {
          "text": "An object-oriented file format for the storage and exchange of digital media between devices, applications, and operating systems.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/quicktime-file-format",
      "kind": "symbol",
      "role": "collection",
      "title": "QuickTime File Format",
      "type": "topic",
      "url": "/documentation/quicktime-file-format"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Handling-encoder-delay",
      "generated": true,
      "identifiers": [
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Background_AAC_encoding",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/The_timing_and_synchronization_problem",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Historical_solution_implicit_encoder_delay",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Using_track_structures_to_represent_encode_delay_explictly",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Example_representing_encoder_delay_explicitly"
      ],
      "title": "Handling encoder delay"
    }
  ],
  "variants": [
    {
      "paths": [
        "/documentation/quicktime-file-format/summary_using_track_structures_to_represent_encoder_delay"
      ],
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ]
    }
  ]
}

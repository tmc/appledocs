{
  "abstract": [
    {
      "text": "Send data to another media handler instead of presenting media directly.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.qtff/documentation/quicktime-file-format",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Media_data_atom_types"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Creating_movies_with_modifier_tracks"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "QuickTime File Format"
      }
    ],
    "role": "article",
    "roleHeading": "Article",
    "title": "Creating movies with modifier tracks"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "Overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "QuickTime 2.1 added additional functionality for media handlers. By way of modifier tracks, a media handler can send its data to another media handler rather than presenting its media directly. See ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Modifier_tracks",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " for a complete discussion of this feature.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "To create a movie with modifier tracks, first you create a movie with all the desired tracks, then you create the modifier track. To link the modifier track to the track that it modifies, you use the ",
              "type": "text"
            },
            {
              "code": "AddTrackReference",
              "type": "codeVoice"
            },
            {
              "text": " function as shown in the following listing.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "long addedIndex;",
            "AddTrackReference(aVideoTrack, aModifierTrack,",
            "                    kTrackModifierReference, &addedIndex);"
          ],
          "syntax": "c",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "The reference doesn’t completely describe the modifier track’s relationship to the track it modifies. Instead, the reference simply tells the modifier track to send its data to the specified track. The receiving track doesn’t “know” what it should do with that data. A single track may also be receiving data from more than one modifier track.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "To describe how each modifier input should be used, each track’s media also has an input map. The media’s input map describes how the data being sent to each input of a track should be interpreted by the receiving track. After creating the reference, it is necessary to update the receiving track’s media input map. When ",
              "type": "text"
            },
            {
              "code": "AddTrackReference",
              "type": "codeVoice"
            },
            {
              "text": " is called, it returns the index of the reference added. That index is the index of the input that needs to be described in the media input map. If the modifier track created above contains regions to change the shape of the video track, the code shown in the following listing updates the input map appropriately.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "QTAtomContainer inputMap;",
            "QTAtom inputAtom;",
            "OSType inputType;",
            " ",
            " ",
            "Media aVideoMedia = GetTrackMedia(aVideoTrack);",
            "GetMediaInputMap (aVideoMedia, &inputMap);",
            " ",
            "QTInsertChild(inputMap, kParentAtomIsContainer, kTrackModifierInput,",
            "        addedIndex, 0,0, nil, &inputAtom);",
            " ",
            "inputType = kTrackModifierTypeClip;",
            "QTInsertChild (inputMap, inputAtom, kTrackModifierType, 1, 0,",
            "        sizeof(inputType), &inputType, nil);",
            " ",
            "SetMediaInputMap(aVideoMedia, inputMap);",
            "QTDisposeAtomContainer(inputMap);"
          ],
          "syntax": "c",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "The media input map allows you to store additional information for each input. In the preceding example, only the type of the input is specified. In other types of references, you may need to specify additional data.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "When a modifier track is playing an empty track edit, or is disabled or deleted, all receiving tracks are notified that the track input is inactive. When an input becomes inactive, it is reset to its default value. For example, if a track is receiving data from a clip modifier track and that input becomes inactive, the shape of the track reverts to the shape it would have if there were no clip modifier track.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Chapter_lists": {
      "abstract": [
        {
          "text": "A chapter list provides a set of named entry points into a movie.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Chapter_lists",
      "kind": "article",
      "role": "article",
      "title": "Chapter lists",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/chapter_lists"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Media_data_atom_types": {
      "abstract": [
        {
          "text": "Store different types of media data, including video, sound, subtitles, and more.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Media_data_atom_types",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Media data atom types",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/media_data_atom_types"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Modifier_tracks": {
      "abstract": [
        {
          "text": "Create dynamic movies with modifier tracks that send data to another track.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Modifier_tracks",
      "kind": "article",
      "role": "article",
      "title": "Modifier tracks",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/modifier_tracks"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Streaming_media": {
      "abstract": [
        {
          "text": "Store streaming data in a streaming media track for QuickTime movies.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Streaming_media",
      "kind": "article",
      "role": "article",
      "title": "Streaming media",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/streaming_media"
    },
    "doc://com.apple.qtff/documentation/QuickTime-File-Format/Track_references": {
      "abstract": [
        {
          "text": "Relate a movie’s tracks to one another with track references.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/QuickTime-File-Format/Track_references",
      "kind": "article",
      "role": "article",
      "title": "Track references",
      "type": "topic",
      "url": "/documentation/quicktime-file-format/track_references"
    },
    "doc://com.apple.qtff/documentation/quicktime-file-format": {
      "abstract": [
        {
          "text": "An object-oriented file format for the storage and exchange of digital media between devices, applications, and operating systems.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.qtff/documentation/quicktime-file-format",
      "kind": "symbol",
      "role": "collection",
      "title": "QuickTime File Format",
      "type": "topic",
      "url": "/documentation/quicktime-file-format"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Track-features",
      "generated": true,
      "identifiers": [
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Modifier_tracks",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Track_references",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Chapter_lists",
        "doc://com.apple.qtff/documentation/QuickTime-File-Format/Streaming_media"
      ],
      "title": "Track features"
    }
  ],
  "variants": [
    {
      "paths": [
        "/documentation/quicktime-file-format/creating_movies_with_modifier_tracks"
      ],
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ]
    }
  ]
}

{
  "abstract": [
    {
      "text": "Sets the function used to create the value objects of the MDQuery.",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/file_metadata",
        "doc://com.apple.documentation/documentation/coreservices/file_metadata/mdquery"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.documentation/documentation/coreservices/1413017-mdquerysetcreatevaluefunction"
  },
  "kind": "symbol",
  "legacy_identifier": 1413017,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:@F@MDQuerySetCreateValueFunction",
    "fragments": [
      {
        "kind": "text",
        "text": "func "
      },
      {
        "kind": "identifier",
        "text": "MDQuerySetCreateValueFunction"
      },
      {
        "kind": "text",
        "text": "(MDQuery!, MDQueryCreateValueFunction!, UnsafeMutableRawPointer!, UnsafePointer<CFArrayCallBacks>!)"
      }
    ],
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "current": "15.4",
        "introducedAt": "10.4",
        "name": "macOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Function",
    "symbolKind": "func",
    "title": "MDQuerySetCreateValueFunction(_:_:_:_:)"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "swift"
          ],
          "platforms": [
            "macOS"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "func"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "MDQuerySetCreateValueFunction"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "externalParam",
              "text": "_"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "query"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/coreservices/mdquery",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@MDQueryRef",
              "text": "MDQuery"
            },
            {
              "kind": "text",
              "text": "!"
            },
            {
              "kind": "text",
              "text": ", "
            },
            {
              "kind": "externalParam",
              "text": "_"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "func"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/coreservices/mdquerycreatevaluefunction",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@MDQueryCreateValueFunction",
              "text": "MDQueryCreateValueFunction"
            },
            {
              "kind": "text",
              "text": "!"
            },
            {
              "kind": "text",
              "text": ", "
            },
            {
              "kind": "externalParam",
              "text": "_"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "context"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "identifier": "doc://com.apple.Swift/documentation/Swift/UnsafeMutableRawPointer",
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:Sv",
              "text": "UnsafeMutableRawPointer"
            },
            {
              "kind": "text",
              "text": "!"
            },
            {
              "kind": "text",
              "text": ", "
            },
            {
              "kind": "externalParam",
              "text": "_"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "cb"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "identifier": "doc://com.apple.Swift/documentation/Swift/UnsafePointer",
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:SP",
              "text": "UnsafePointer"
            },
            {
              "kind": "text",
              "text": "<"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfarraycallbacks",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@SA@CFArrayCallBacks",
              "text": "CFArrayCallBacks"
            },
            {
              "kind": "text",
              "text": ">!"
            },
            {
              "kind": "text",
              "text": ")"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "swift"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The query.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "query"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The callback function the MDQuery should use to create the value list values, such as those returned by the function ",
                  "type": "text"
                },
                {
                  "code": "MDQueryCopyValuesOfAttribute",
                  "type": "codeVoice"
                },
                {
                  "text": ". This parameter may be ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": ", in which case any previous value creation settings are cancelled and the MDQuery will subsequently produce the default CFTypeRefs. If a function is specified and is not of type ",
                  "type": "text"
                },
                {
                  "code": "MDQueryCreateValueFunction",
                  "type": "codeVoice"
                },
                {
                  "text": " or does not behave as a ",
                  "type": "text"
                },
                {
                  "code": "MDQueryCreateValueFunction",
                  "type": "codeVoice"
                },
                {
                  "text": " must, the behavior is undefined.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "func"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A pointer-sized user-defined value, that is passed as the third parameter to the create function. MDQuery does not use this value, does not retain the context in any way, and requires that the context be valid for the lifetime of the query. If the context is not what is expected by the create function, the behavior is undefined.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "context"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A pointer to a CFArrayCallBacks structure initialized with the callbacks for the query to use to manage the created value objects. A copy of the contents of the callbacks structure is made, so that a pointer to a structure on the stack can be passed in, or can be reused for multiple query creations. Only version 0 of the ",
                  "type": "text"
                },
                {
                  "code": "CFArrayCallBacks",
                  "type": "codeVoice"
                },
                {
                  "text": " is supported. The retain field may be ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": ", in which case the MDQuery will not add a retain to the created values. The release field may be ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": ", in which case the MDQuery will do nothing to remove the query's retain (such as the one it gets from the create function) on the value objects when the query is destroyed. If the ",
                  "type": "text"
                },
                {
                  "code": "copyDescription",
                  "type": "codeVoice"
                },
                {
                  "text": " field is ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": ", the query will create a simple description for the value objects. If the ",
                  "type": "text"
                },
                {
                  "code": "equal",
                  "type": "codeVoice"
                },
                {
                  "text": " field is ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": ", the query will use pointer equality to test for equality of values. This callbacks parameter itself may be ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": " in which case it is treated as a valid version 0 structure with all fields ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": ". Otherwise, if any of the fields are not valid pointers to functions of the correct type, or this parameter is not a valid pointer to a ",
                  "type": "text"
                },
                {
                  "code": "CFArrayCallBacks",
                  "type": "codeVoice"
                },
                {
                  "text": " callbacks structure, the behavior is undefined. If any of the value values returned from the create function is not one understood by one or more of the callback functions, the behavior when those callback functions are used is undefined. For example, if the create function can return ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": ", then ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": " must be understood by the callback functions as a possible parameter. The retain and release callbacks must be a matched set, you should not assume that the retain function will be unused or that additional reference counts will not be taken on the created results.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "cb"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Values created after a create function is set will be created using the newly specified function, but existing values are not modified. It is not advisable to change this function after ",
              "type": "text"
            },
            {
              "code": "MDQueryExecute",
              "type": "codeVoice"
            },
            {
              "text": " has been called with the query.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.Swift/documentation/Swift/UnsafeMutableRawPointer": {
      "identifier": "doc://com.apple.Swift/documentation/Swift/UnsafeMutableRawPointer",
      "kind": "symbol",
      "role": "symbol",
      "title": "UnsafeMutableRawPointer",
      "type": "topic",
      "url": "/documentation/swift/unsafemutablerawpointer"
    },
    "doc://com.apple.Swift/documentation/Swift/UnsafePointer": {
      "identifier": "doc://com.apple.Swift/documentation/Swift/UnsafePointer",
      "kind": "symbol",
      "role": "symbol",
      "title": "UnsafePointer",
      "type": "topic",
      "url": "/documentation/swift/unsafepointer"
    },
    "doc://com.apple.documentation/documentation/corefoundation/cfarraycallbacks": {
      "identifier": "doc://com.apple.documentation/documentation/corefoundation/cfarraycallbacks",
      "kind": "symbol",
      "role": "symbol",
      "title": "CFArrayCallBacks",
      "type": "topic",
      "url": "/documentation/corefoundation/cfarraycallbacks"
    },
    "doc://com.apple.documentation/documentation/coreservices": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "kind": "symbol",
      "role": "collection",
      "title": "Core Services",
      "type": "topic",
      "url": "/documentation/coreservices"
    },
    "doc://com.apple.documentation/documentation/coreservices/1413017-mdquerysetcreatevaluefunction": {
      "abstract": [
        {
          "text": "Sets the function used to create the value objects of the MDQuery.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "MDQuerySetCreateValueFunction"
        },
        {
          "kind": "text",
          "text": "(MDQuery!, MDQueryCreateValueFunction!, UnsafeMutableRawPointer!, UnsafePointer<CFArrayCallBacks>!)"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1413017-mdquerysetcreatevaluefunction",
      "kind": "symbol",
      "role": "symbol",
      "title": "MDQuerySetCreateValueFunction(_:_:_:_:)",
      "type": "topic",
      "url": "/documentation/coreservices/1413017-mdquerysetcreatevaluefunction"
    },
    "doc://com.apple.documentation/documentation/coreservices/1413064-mdquerysetcreateresultfunction": {
      "abstract": [
        {
          "text": "Sets the function used to create the result objects of the MDQuery.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "MDQuerySetCreateResultFunction"
        },
        {
          "kind": "text",
          "text": "(MDQuery!, MDQueryCreateResultFunction!, UnsafeMutableRawPointer!, UnsafePointer<CFArrayCallBacks>!)"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1413064-mdquerysetcreateresultfunction",
      "kind": "symbol",
      "role": "symbol",
      "title": "MDQuerySetCreateResultFunction(_:_:_:_:)",
      "type": "topic",
      "url": "/documentation/coreservices/1413064-mdquerysetcreateresultfunction"
    },
    "doc://com.apple.documentation/documentation/coreservices/1413087-mdquerysetsortcomparator": {
      "abstract": [
        {
          "text": "Sets the function used to sort the results of an MDQuery.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "MDQuerySetSortComparator"
        },
        {
          "kind": "text",
          "text": "(MDQuery!, MDQuerySortComparatorFunction!, UnsafeMutableRawPointer!)"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1413087-mdquerysetsortcomparator",
      "kind": "symbol",
      "role": "symbol",
      "title": "MDQuerySetSortComparator(_:_:_:)",
      "type": "topic",
      "url": "/documentation/coreservices/1413087-mdquerysetsortcomparator"
    },
    "doc://com.apple.documentation/documentation/coreservices/file_metadata": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/file_metadata",
      "kind": "article",
      "role": "collectionGroup",
      "title": "File Metadata",
      "type": "topic",
      "url": "/documentation/coreservices/file_metadata"
    },
    "doc://com.apple.documentation/documentation/coreservices/file_metadata/mdquery": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/file_metadata/mdquery",
      "kind": "article",
      "role": "collectionGroup",
      "title": "MDQuery",
      "type": "topic",
      "url": "/documentation/coreservices/file_metadata/mdquery"
    },
    "doc://com.apple.documentation/documentation/coreservices/mdquery": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/mdquery",
      "kind": "symbol",
      "role": "symbol",
      "title": "MDQuery",
      "type": "topic",
      "url": "/documentation/coreservices/mdquery"
    },
    "doc://com.apple.documentation/documentation/coreservices/mdquerycreatevaluefunction": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/mdquerycreatevaluefunction",
      "kind": "symbol",
      "role": "symbol",
      "title": "MDQueryCreateValueFunction",
      "type": "topic",
      "url": "/documentation/coreservices/mdquerycreatevaluefunction"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1413064-mdquerysetcreateresultfunction",
        "doc://com.apple.documentation/documentation/coreservices/1413087-mdquerysetsortcomparator"
      ],
      "title": "Setting Callback Functions"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/coreservices/1413017-mdquerysetcreatevaluefunction"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    },
    {
      "paths": [
        "documentation/coreservices/1413017-mdquerysetcreatevaluefunction"
      ],
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ]
    }
  ]
}

{
  "abstract": [
    {
      "text": "Converts a Unicode text string to the destination encodingyou specify. ",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/coreservices",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core",
        "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/coreservices/1433542-convertfromunicodetotext"
  },
  "kind": "symbol",
  "legacy_identifier": 1433542,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:@F@ConvertFromUnicodeToText",
    "modules": [
      {
        "name": "Core Services"
      }
    ],
    "platforms": [
      {
        "current": "15.4",
        "introducedAt": "10.0",
        "name": "macOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Function",
    "symbolKind": "func",
    "title": "ConvertFromUnicodeToText"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "platforms": [
            "macOS"
          ],
          "tokens": [
            {
              "identifier": "symbol-1586802",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSStatus",
              "text": "OSStatus"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "ConvertFromUnicodeToText"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodetotextinfo",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@UnicodeToTextInfo",
              "text": "UnicodeToTextInfo"
            },
            {
              "kind": "text",
              "text": " iUnicodeToTextInfo, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/bytecount",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " iUnicodeLen, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/unichar",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@UniChar",
              "text": "UniChar"
            },
            {
              "kind": "text",
              "text": " iUnicodeStr[], "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/optionbits",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OptionBits",
              "text": "OptionBits"
            },
            {
              "kind": "text",
              "text": " iControlFlags, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/itemcount",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " iOffsetCount, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteOffset",
              "text": "ByteOffset"
            },
            {
              "kind": "text",
              "text": " iOffsetArray[], "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/itemcount",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ItemCount",
              "text": "ItemCount"
            },
            {
              "kind": "text",
              "text": " *oOffsetCount, "
            },
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteOffset",
              "text": "ByteOffset"
            },
            {
              "kind": "text",
              "text": " oOffsetArray[], "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/bytecount",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " iOutputBufLen, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/bytecount",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " *oInputRead, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/bytecount",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@ByteCount",
              "text": "ByteCount"
            },
            {
              "kind": "text",
              "text": " *oOutputLen, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/logicaladdress",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@LogicalAddress",
              "text": "LogicalAddress"
            },
            {
              "kind": "text",
              "text": " oOutputStr);"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A Unicode converter object of type ",
                  "type": "text"
                },
                {
                  "code": "UnicodeToTextInfo",
                  "type": "codeVoice"
                },
                {
                  "text": " for converting text from Unicode. You use the function ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433522-createunicodetotextinfo",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " or ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433550-createunicodetotextinfobyencodin",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " to obtain a Unicode converter object to specify for this parameter. This function modifies the contents of the ",
                  "type": "text"
                },
                {
                  "code": "iUnicodeToTextInfo",
                  "type": "codeVoice"
                },
                {
                  "text": " parameter. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "iUnicodeToTextInfo"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The length in bytes of the Unicode string to be converted. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "iUnicodeLen"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A pointer to the Unicode string to be converted. If the input text is UTF-8, which is supported for versions 1.2.1 or later of the converter, you must cast the UTF-8 buffer pointer to ",
                  "type": "text"
                },
                {
                  "code": "ConstUniCharArrayPtr",
                  "type": "codeVoice"
                },
                {
                  "text": " before you can pass it as this parameter. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "iUnicodeStr"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Conversion control flags. You can use ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433493-conversion_masks",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " and ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/coreservices/1433620-directionality_masks",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " to set the ",
                  "type": "text"
                },
                {
                  "code": "iControlFlags",
                  "type": "codeVoice"
                },
                {
                  "text": " parameter. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "iControlFlags"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The number of offsets contained in the array provided by the ",
                  "type": "text"
                },
                {
                  "code": "iOffsetArray",
                  "type": "codeVoice"
                },
                {
                  "text": " parameter. Your application supplies this value. If you don’t want offsets returned to you, specify ",
                  "type": "text"
                },
                {
                  "code": "0",
                  "type": "codeVoice"
                },
                {
                  "text": " (zero)for this parameter. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "iOffsetCount"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "An array of type ",
                  "type": "text"
                },
                {
                  "code": "ByteOffset",
                  "type": "codeVoice"
                },
                {
                  "text": ". On input, you specify the array that gives an ordered list of significant byte offsets pertaining to the Unicode source string to be converted. These offsets may identify font or style changes, for example, in the source string. If you don’t want offsets returned to your application, specify ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": " for this parameter and ",
                  "type": "text"
                },
                {
                  "code": "0",
                  "type": "codeVoice"
                },
                {
                  "text": " (zero)for ",
                  "type": "text"
                },
                {
                  "code": "iOffsetCount",
                  "type": "codeVoice"
                },
                {
                  "text": ". All offsets must be less than ",
                  "type": "text"
                },
                {
                  "code": "iUnicodeLen",
                  "type": "codeVoice"
                },
                {
                  "text": ". ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "iOffsetArray"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "On return, a pointer to the number of offsets that were mapped in the output stream.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "oOffsetCount"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "An array of type ",
                  "type": "text"
                },
                {
                  "code": "ByteOffset",
                  "type": "codeVoice"
                },
                {
                  "text": ". On return, this array contains the corresponding new offsets for the converted string in the new encoding.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "oOffsetArray"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The length in bytes of the output buffer pointed to by the ",
                  "type": "text"
                },
                {
                  "code": "oOutputStr",
                  "type": "codeVoice"
                },
                {
                  "text": " parameter. Your application supplies this buffer to hold the returned converted string. The ",
                  "type": "text"
                },
                {
                  "code": "oOutputLen",
                  "type": "codeVoice"
                },
                {
                  "text": " parameter may return a byte count that is less than this value if the converted byte string is smaller than the buffer size you allocated.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "iOutputBufLen"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "On return, a pointer to a the number of bytes of the Unicode string that were converted. If the function returns a ",
                  "type": "text"
                },
                {
                  "code": "kTECUnmappableElementErr",
                  "type": "codeVoice"
                },
                {
                  "text": " result code, this parameter returns the number of bytes that were converted before the error occurred.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "oInputRead"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "On return, a pointer to the length in bytes of the converted text stream.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "oOutputLen"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A value of type ",
                  "type": "text"
                },
                {
                  "code": "LogicalAddress",
                  "type": "codeVoice"
                },
                {
                  "text": ". On input, this value points to a buffer for the converted string. On return, the buffer holds the converted text string. (For guidelines on estimating the size of the buffer needed, see the following discussion. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "oOutputStr"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "A resultcode. See ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "This function can also map offsets for style or font informationfrom the source text string to the returned converted string. Theconverter reads the application-supplied offsets and returns thecorresponding new offsets in the converted string. If you do notwant font or style information offsets mapped to the resulting string,you should pass ",
              "type": "text"
            },
            {
              "code": "NULL",
              "type": "codeVoice"
            },
            {
              "text": " for ",
              "type": "text"
            },
            {
              "code": "iOffsetArray",
              "type": "codeVoice"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "code": "0 ",
              "type": "codeVoice"
            },
            {
              "text": " (zero) for ",
              "type": "text"
            },
            {
              "code": "iOffsetCount",
              "type": "codeVoice"
            },
            {
              "text": ". ",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Your application must allocate a buffer to hold the resultingconverted string and pass a pointer to the buffer in the ",
              "type": "text"
            },
            {
              "code": "oOutputStr",
              "type": "codeVoice"
            },
            {
              "text": " parameter.To determine the size of the output buffer to allocate, you shouldconsider the size and content of the Unicode source string in relationto the type of encoding to which it will be converted. For example,for many encodings, such as MacRoman and Shift-JIS, the size ofthe returned string will be between half the size and the same sizeas the source Unicode string. However, for some encodings that arenot Mac OS ones, such as EUC-JP, which has some 3-byte charactersfor Kanji, the returned string could be larger than the source Unicodestring. For MacArabic and MacHebrew, the result will usually beless than half the size of the Unicode string.  ",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/coreservices": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices",
      "kind": "symbol",
      "role": "collection",
      "title": "Core Services",
      "type": "topic",
      "url": "/documentation/coreservices"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433493-conversion_masks": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433493-conversion_masks",
      "kind": "symbol",
      "role": "containerSymbol",
      "title": "Conversion Masks",
      "type": "topic",
      "url": "/documentation/coreservices/1433493-conversion_masks"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433509-changeunicodetotextinfo": {
      "abstract": [
        {
          "text": "Changes the mapping information contained in the specifiedUnicode converter object used to convert Unicode text to a non-Unicodeencoding. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433509-changeunicodetotextinfo",
      "kind": "symbol",
      "role": "symbol",
      "title": "ChangeUnicodeToTextInfo",
      "type": "topic",
      "url": "/documentation/coreservices/1433509-changeunicodetotextinfo"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433522-createunicodetotextinfo": {
      "abstract": [
        {
          "text": "Creates and returns a Unicode converter object containinginformation required for converting strings from Unicode to a non-Unicodeencoding. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433522-createunicodetotextinfo",
      "kind": "symbol",
      "role": "symbol",
      "title": "CreateUnicodeToTextInfo",
      "type": "topic",
      "url": "/documentation/coreservices/1433522-createunicodetotextinfo"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433542-convertfromunicodetotext": {
      "abstract": [
        {
          "text": "Converts a Unicode text string to the destination encodingyou specify. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433542-convertfromunicodetotext",
      "kind": "symbol",
      "role": "symbol",
      "title": "ConvertFromUnicodeToText",
      "type": "topic",
      "url": "/documentation/coreservices/1433542-convertfromunicodetotext"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433550-createunicodetotextinfobyencodin": {
      "abstract": [
        {
          "text": "Based on the given text encoding specification for theconverted text, creates and returns a Unicode converter object containinginformation required for converting strings from Unicode to thespecified non-Unicode encoding.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433550-createunicodetotextinfobyencodin",
      "kind": "symbol",
      "role": "symbol",
      "title": "CreateUnicodeToTextInfoByEncoding",
      "type": "topic",
      "url": "/documentation/coreservices/1433550-createunicodetotextinfobyencodin"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433564-disposeunicodetotextinfo": {
      "abstract": [
        {
          "text": "Releases the memory allocated for the specified Unicodeconverter object. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433564-disposeunicodetotextinfo",
      "kind": "symbol",
      "role": "symbol",
      "title": "DisposeUnicodeToTextInfo",
      "type": "topic",
      "url": "/documentation/coreservices/1433564-disposeunicodetotextinfo"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433620-directionality_masks": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433620-directionality_masks",
      "kind": "symbol",
      "role": "containerSymbol",
      "title": "Directionality Masks",
      "type": "topic",
      "url": "/documentation/coreservices/1433620-directionality_masks"
    },
    "doc://com.apple.documentation/documentation/coreservices/1433647-resetunicodetotextinfo": {
      "abstract": [
        {
          "text": "Reinitializes all state information kept by a Unicodeconverter object.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/coreservices/1433647-resetunicodetotextinfo",
      "kind": "symbol",
      "role": "symbol",
      "title": "ResetUnicodeToTextInfo",
      "type": "topic",
      "url": "/documentation/coreservices/1433647-resetunicodetotextinfo"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Carbon Core",
      "type": "topic",
      "url": "/documentation/coreservices/carbon_core"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Text Encoding Conversion Manager",
      "type": "topic",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager"
    },
    "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324",
      "kind": "article",
      "role": "task",
      "title": "Result Codes",
      "type": "section",
      "url": "/documentation/coreservices/carbon_core/text_encoding_conversion_manager#1664324"
    },
    "doc://com.apple.documentation/documentation/coreservices/unicodetotextinfo": {
      "identifier": "doc://com.apple.documentation/documentation/coreservices/unicodetotextinfo",
      "kind": "symbol",
      "role": "symbol",
      "title": "UnicodeToTextInfo",
      "type": "topic",
      "url": "/documentation/coreservices/unicodetotextinfo"
    },
    "doc://com.apple.documentation/documentation/kernel/bytecount": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/bytecount",
      "kind": "symbol",
      "role": "symbol",
      "title": "ByteCount",
      "type": "topic",
      "url": "/documentation/kernel/bytecount"
    },
    "doc://com.apple.documentation/documentation/kernel/itemcount": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/itemcount",
      "kind": "symbol",
      "role": "symbol",
      "title": "ItemCount",
      "type": "topic",
      "url": "/documentation/kernel/itemcount"
    },
    "doc://com.apple.documentation/documentation/kernel/logicaladdress": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/logicaladdress",
      "kind": "symbol",
      "role": "symbol",
      "title": "LogicalAddress",
      "type": "topic",
      "url": "/documentation/kernel/logicaladdress"
    },
    "doc://com.apple.documentation/documentation/kernel/optionbits": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/optionbits",
      "kind": "symbol",
      "role": "symbol",
      "title": "OptionBits",
      "type": "topic",
      "url": "/documentation/kernel/optionbits"
    },
    "doc://com.apple.documentation/documentation/kernel/unichar": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/unichar",
      "kind": "symbol",
      "role": "symbol",
      "title": "UniChar",
      "type": "topic",
      "url": "/documentation/kernel/unichar"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/coreservices/1433509-changeunicodetotextinfo",
        "doc://com.apple.documentation/documentation/coreservices/1433522-createunicodetotextinfo",
        "doc://com.apple.documentation/documentation/coreservices/1433550-createunicodetotextinfobyencodin",
        "doc://com.apple.documentation/documentation/coreservices/1433564-disposeunicodetotextinfo",
        "doc://com.apple.documentation/documentation/coreservices/1433647-resetunicodetotextinfo"
      ],
      "title": "Converting From Unicode"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/coreservices/1433542-convertfromunicodetotext"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    }
  ]
}

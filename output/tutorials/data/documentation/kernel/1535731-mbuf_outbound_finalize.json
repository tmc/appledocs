{
  "abstract": [],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/kernel",
        "doc://com.apple.documentation/documentation/kernel/deprecated_symbols"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/kernel/1535731-mbuf_outbound_finalize"
  },
  "kind": "symbol",
  "legacy_identifier": 1535731,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:@F@mbuf_outbound_finalize",
    "modules": [
      {
        "name": "Kernel"
      }
    ],
    "platforms": [
      {
        "current": "15.4",
        "deprecated": true,
        "deprecatedAt": "10.15.4",
        "introducedAt": "10.4",
        "name": "macOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Function",
    "symbolKind": "func",
    "title": "mbuf_outbound_finalize"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "platforms": [
            "macOS"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "mbuf_outbound_finalize"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/mbuf_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@mbuf_t",
              "text": "mbuf_t"
            },
            {
              "kind": "text",
              "text": " mbuf, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/u_int32_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@u_int32_t",
              "text": "u_int32_t"
            },
            {
              "kind": "text",
              "text": " protocol_family, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/size_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@size_t",
              "text": "size_t"
            },
            {
              "kind": "text",
              "text": " protocol_offset);"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The mbuf that should be finalized.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "mbuf"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The protocol family of the packet in the mbuf.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "protocol_family"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The offset from the start of the mbuf to the protocol header. For an IP packet with an ethernet header, this would be the length of an ethernet header.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "protocol_offset"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "This function will \"finalize\" the packet allowing your code to inspect the final packet.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "There are a number of operations that are performed in hardware, such as calculating checksums. This function will perform in software the various opterations that were scheduled to be done in hardware. Future operations may include IPSec processing or vlan support. If you are redirecting a packet to a new interface which may not have the same hardware support or encapsulating the packet, you should call this function to force the stack to calculate and fill out the checksums. This will bypass hardware checksums but give you a complete packet to work with. If you need to inspect aspects of the packet which may be generated by hardware, you must call this function to get an aproximate final packet. If you plan to modify the packet in any way, you should call this function.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "This function should be called before modifying any outbound packets.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "This function may be called at various levels, in some cases additional headers may have already been prepended, such as the case of a packet seen by an interface filter. To handle this, the caller must pass the protocol family of the packet as well as the offset from the start of the packet to the protocol header.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/kernel": {
      "identifier": "doc://com.apple.documentation/documentation/kernel",
      "kind": "symbol",
      "role": "collection",
      "title": "Kernel",
      "type": "topic",
      "url": "/documentation/kernel"
    },
    "doc://com.apple.documentation/documentation/kernel/deprecated_symbols": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/deprecated_symbols",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Deprecated Symbols",
      "type": "topic",
      "url": "/documentation/kernel/deprecated_symbols"
    },
    "doc://com.apple.documentation/documentation/kernel/mbuf_t": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/mbuf_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "mbuf_t",
      "type": "topic",
      "url": "/documentation/kernel/mbuf_t"
    },
    "doc://com.apple.documentation/documentation/kernel/size_t": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/size_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "size_t",
      "type": "topic",
      "url": "/documentation/kernel/size_t"
    },
    "doc://com.apple.documentation/documentation/kernel/u_int32_t": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/u_int32_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "u_int32_t",
      "type": "topic",
      "url": "/documentation/kernel/u_int32_t"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "paths": [
        "documentation/kernel/1535731-mbuf_outbound_finalize"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    }
  ]
}

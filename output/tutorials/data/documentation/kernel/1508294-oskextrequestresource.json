{
  "abstract": [
    {
      "text": "Requests data from a nonlocalized resource file in a kext bundle on disk.",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/kernel",
        "doc://com.apple.documentation/documentation/kernel/kern"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/kernel/1508294-oskextrequestresource"
  },
  "kind": "symbol",
  "legacy_identifier": 1508294,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:@F@OSKextRequestResource",
    "modules": [
      {
        "name": "Kernel"
      }
    ],
    "platforms": [
      {
        "current": "15.4",
        "introducedAt": "10.6",
        "name": "macOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Function",
    "symbolKind": "func",
    "title": "OSKextRequestResource"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "platforms": [
            "macOS"
          ],
          "tokens": [
            {
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSReturn",
              "text": "OSReturn"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "OSKextRequestResource"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "keyword",
              "text": "char"
            },
            {
              "kind": "text",
              "text": " *kextIdentifier, "
            },
            {
              "kind": "keyword",
              "text": "const"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "keyword",
              "text": "char"
            },
            {
              "kind": "text",
              "text": " *resourceName, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/oskextrequestresourcecallback",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSKextRequestResourceCallback",
              "text": "OSKextRequestResourceCallback"
            },
            {
              "kind": "text",
              "text": " callback, "
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " *context, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/oskextrequesttag",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@OSKextRequestTag",
              "text": "OSKextRequestTag"
            },
            {
              "kind": "text",
              "text": " *requestTagOut);"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The CFBundleIdentifier of the kext from which to read the file.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "kextIdentifier"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The name of the resource file to read.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "resourceName"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A pointer to a callback function; the address must be within a currently-loaded kext.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "callback"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A pointer to arbitrary run-time data that will be passed to the callback when it is invoked. May be ",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "context"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "If non-",
                  "type": "text"
                },
                {
                  "code": "NULL",
                  "type": "codeVoice"
                },
                {
                  "text": ", filled on success with a tag identifying the pending request (or on failure with ",
                  "type": "text"
                },
                {
                  "code": "kOSKextRequestTagInvalid",
                  "type": "codeVoice"
                },
                {
                  "text": "; can be used with ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/kernel/1508350-oskextcancelrequest",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "requestTagOut"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "code": "kOSReturnSuccess",
              "type": "codeVoice"
            },
            {
              "text": " if the request is successfully queued. ",
              "type": "text"
            },
            {
              "code": "kOSKextReturnInvalidArgument",
              "type": "codeVoice"
            },
            {
              "text": " if ",
              "type": "text"
            },
            {
              "code": "kextIdentifier",
              "type": "codeVoice"
            },
            {
              "text": " or ",
              "type": "text"
            },
            {
              "code": "resourceName",
              "type": "codeVoice"
            },
            {
              "text": " or if ",
              "type": "text"
            },
            {
              "code": "callback",
              "type": "codeVoice"
            },
            {
              "text": " is not an address within a loaded kext executable. ",
              "type": "text"
            },
            {
              "code": "kOSKextReturnStopping",
              "type": "codeVoice"
            },
            {
              "text": " if an unload attempt is being made on the kext containing ",
              "type": "text"
            },
            {
              "code": "callback",
              "type": "codeVoice"
            },
            {
              "text": ". Other ",
              "type": "text"
            },
            {
              "code": "OSKextReturn...",
              "type": "codeVoice"
            },
            {
              "text": " errors are possible.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "This function queues an asynchronous request to the user-space kext daemon kextd(8); requests for resources early in system startup will not be fulfilled until that daemon starts. Requests made by a kext while that kext is loading (specifically in the kext's module start routine) will not be fulfilled until after the start routine returns and the kext is completely loaded. Kexts requesting resources should be sure to perform appropriate locking in the callback function.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Kext resources are stored in the kext's on-disk bundle under the Resources subdirectory. See ",
              "type": "text"
            },
            {
              "identifier": "devLink-1696005",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " for an overview of bundle structure. The localization context of the kext daemon (namely that of the superuser) will be used in retrieving resources; kext resources intended for use in the kernel should generally not be localized.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "code": "callback",
              "type": "codeVoice"
            },
            {
              "text": " is guaranteed to be invoked except when:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "identifier": "doc://com.apple.documentation/documentation/kernel/1508350-oskextcancelrequest",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": " is used to cancel the request. In this case the kext gets the ",
                      "type": "text"
                    },
                    {
                      "code": "context",
                      "type": "codeVoice"
                    },
                    {
                      "text": " pointer and can clean it up.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The request is made during a kext's module start routine and the start routine returns an error. In this case, callbacks cannot be safely invoked, so the kext should clean up all request contexts when returning the error from the start routine.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "Kexts with pending requests are not subject to autounload, but requests are subject to timeout after a few minutes. If that amount of time passes with no response from user space, ",
              "type": "text"
            },
            {
              "code": "callback",
              "type": "codeVoice"
            },
            {
              "text": " is invoked with a result of. ",
              "type": "text"
            },
            {
              "code": "kOSKextReturnTimeout",
              "type": "codeVoice"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Kexts that are explicitly unloaded have all pending request callbacks invoked with a result of ",
              "type": "text"
            },
            {
              "code": "kOSKextReturnStopping",
              "type": "codeVoice"
            },
            {
              "text": ". The kext must handle these callbacks, even if its stop routine will prevent unloading. If the kext does prevent unloading, it can reissue resource requests outside of the stop function.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "devLink-1696005": {
      "identifier": "devLink-1696005",
      "title": "Bundle Programming Guide",
      "type": "link",
      "url": "https://developer.apple.com/library/archive/documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html#//apple_ref/doc/uid/10000123i"
    },
    "doc://com.apple.documentation/documentation/kernel": {
      "identifier": "doc://com.apple.documentation/documentation/kernel",
      "kind": "symbol",
      "role": "collection",
      "title": "Kernel",
      "type": "topic",
      "url": "/documentation/kernel"
    },
    "doc://com.apple.documentation/documentation/kernel/1508272-oskextretainkextwithloadtag": {
      "abstract": [
        {
          "text": "Retain a loaded kext based on its load tag, and enable autounload for that kext.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/1508272-oskextretainkextwithloadtag",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextRetainKextWithLoadTag",
      "type": "topic",
      "url": "/documentation/kernel/1508272-oskextretainkextwithloadtag"
    },
    "doc://com.apple.documentation/documentation/kernel/1508294-oskextrequestresource": {
      "abstract": [
        {
          "text": "Requests data from a nonlocalized resource file in a kext bundle on disk.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/1508294-oskextrequestresource",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextRequestResource",
      "type": "topic",
      "url": "/documentation/kernel/1508294-oskextrequestresource"
    },
    "doc://com.apple.documentation/documentation/kernel/1508305-oskextgetcurrentidentifier": {
      "abstract": [
        {
          "text": "Returns the CFBundleIdentifier for the calling kext as a C string.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/1508305-oskextgetcurrentidentifier",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextGetCurrentIdentifier",
      "type": "topic",
      "url": "/documentation/kernel/1508305-oskextgetcurrentidentifier"
    },
    "doc://com.apple.documentation/documentation/kernel/1508323-oskextloadkextwithidentifier": {
      "abstract": [
        {
          "text": "Request that a kext be loaded.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/1508323-oskextloadkextwithidentifier",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextLoadKextWithIdentifier",
      "type": "topic",
      "url": "/documentation/kernel/1508323-oskextloadkextwithidentifier"
    },
    "doc://com.apple.documentation/documentation/kernel/1508326-oskextgetcurrentversionstring": {
      "abstract": [
        {
          "text": "Returns the CFBundleVersion for the calling kext as a C string.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/1508326-oskextgetcurrentversionstring",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextGetCurrentVersionString",
      "type": "topic",
      "url": "/documentation/kernel/1508326-oskextgetcurrentversionstring"
    },
    "doc://com.apple.documentation/documentation/kernel/1508333-oskextgrabpgodata": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/1508333-oskextgrabpgodata",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextGrabPgoData",
      "type": "topic",
      "url": "/documentation/kernel/1508333-oskextgrabpgodata"
    },
    "doc://com.apple.documentation/documentation/kernel/1508336-oskextgetcurrentloadtag": {
      "abstract": [
        {
          "text": "Returns the run-time load tag for the calling kext as an ",
          "type": "text"
        },
        {
          "code": "OSKextLoadTag",
          "type": "codeVoice"
        },
        {
          "text": ".",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/1508336-oskextgetcurrentloadtag",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextGetCurrentLoadTag",
      "type": "topic",
      "url": "/documentation/kernel/1508336-oskextgetcurrentloadtag"
    },
    "doc://com.apple.documentation/documentation/kernel/1508339-oskextreleasekextwithloadtag": {
      "abstract": [
        {
          "text": "Release a loaded kext based on its load tag.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/1508339-oskextreleasekextwithloadtag",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextReleaseKextWithLoadTag",
      "type": "topic",
      "url": "/documentation/kernel/1508339-oskextreleasekextwithloadtag"
    },
    "doc://com.apple.documentation/documentation/kernel/1508350-oskextcancelrequest": {
      "abstract": [
        {
          "text": "Cancels a pending user-space kext request without invoking the callback.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/1508350-oskextcancelrequest",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextCancelRequest",
      "type": "topic",
      "url": "/documentation/kernel/1508350-oskextcancelrequest"
    },
    "doc://com.apple.documentation/documentation/kernel/1520989-kextd_ping": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/1520989-kextd_ping",
      "kind": "symbol",
      "role": "symbol",
      "title": "kextd_ping",
      "type": "topic",
      "url": "/documentation/kernel/1520989-kextd_ping"
    },
    "doc://com.apple.documentation/documentation/kernel/1577598-kext_alloc": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/1577598-kext_alloc",
      "kind": "symbol",
      "role": "symbol",
      "title": "kext_alloc",
      "type": "topic",
      "url": "/documentation/kernel/1577598-kext_alloc"
    },
    "doc://com.apple.documentation/documentation/kernel/1577599-kext_alloc_init": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/1577599-kext_alloc_init",
      "kind": "symbol",
      "role": "symbol",
      "title": "kext_alloc_init",
      "type": "topic",
      "url": "/documentation/kernel/1577599-kext_alloc_init"
    },
    "doc://com.apple.documentation/documentation/kernel/1577600-kext_free": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/1577600-kext_free",
      "kind": "symbol",
      "role": "symbol",
      "title": "kext_free",
      "type": "topic",
      "url": "/documentation/kernel/1577600-kext_free"
    },
    "doc://com.apple.documentation/documentation/kernel/1588829-kext_request": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/1588829-kext_request",
      "kind": "symbol",
      "role": "symbol",
      "title": "kext_request",
      "type": "topic",
      "url": "/documentation/kernel/1588829-kext_request"
    },
    "doc://com.apple.documentation/documentation/kernel/1646297-oskextresetpgocountersunlock": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/1646297-oskextresetpgocountersunlock",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextResetPgoCountersUnlock",
      "type": "topic",
      "url": "/documentation/kernel/1646297-oskextresetpgocountersunlock"
    },
    "doc://com.apple.documentation/documentation/kernel/1646298-oskextresetpgocounters": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/1646298-oskextresetpgocounters",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextResetPgoCounters",
      "type": "topic",
      "url": "/documentation/kernel/1646298-oskextresetpgocounters"
    },
    "doc://com.apple.documentation/documentation/kernel/1646299-oskextresetpgocounterslock": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/1646299-oskextresetpgocounterslock",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextResetPgoCountersLock",
      "type": "topic",
      "url": "/documentation/kernel/1646299-oskextresetpgocounterslock"
    },
    "doc://com.apple.documentation/documentation/kernel/kern": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/kern",
      "kind": "article",
      "role": "collectionGroup",
      "title": "kern",
      "type": "topic",
      "url": "/documentation/kernel/kern"
    },
    "doc://com.apple.documentation/documentation/kernel/oskextrequestresourcecallback": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/oskextrequestresourcecallback",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextRequestResourceCallback",
      "type": "topic",
      "url": "/documentation/kernel/oskextrequestresourcecallback"
    },
    "doc://com.apple.documentation/documentation/kernel/oskextrequesttag": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/oskextrequesttag",
      "kind": "symbol",
      "role": "symbol",
      "title": "OSKextRequestTag",
      "type": "topic",
      "url": "/documentation/kernel/oskextrequesttag"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/kernel/1577598-kext_alloc",
        "doc://com.apple.documentation/documentation/kernel/1577599-kext_alloc_init",
        "doc://com.apple.documentation/documentation/kernel/1577600-kext_free",
        "doc://com.apple.documentation/documentation/kernel/1588829-kext_request",
        "doc://com.apple.documentation/documentation/kernel/1520989-kextd_ping",
        "doc://com.apple.documentation/documentation/kernel/1508350-oskextcancelrequest",
        "doc://com.apple.documentation/documentation/kernel/1508305-oskextgetcurrentidentifier",
        "doc://com.apple.documentation/documentation/kernel/1508336-oskextgetcurrentloadtag",
        "doc://com.apple.documentation/documentation/kernel/1508326-oskextgetcurrentversionstring",
        "doc://com.apple.documentation/documentation/kernel/1508333-oskextgrabpgodata",
        "doc://com.apple.documentation/documentation/kernel/1508323-oskextloadkextwithidentifier",
        "doc://com.apple.documentation/documentation/kernel/1508339-oskextreleasekextwithloadtag",
        "doc://com.apple.documentation/documentation/kernel/1646298-oskextresetpgocounters",
        "doc://com.apple.documentation/documentation/kernel/1646299-oskextresetpgocounterslock",
        "doc://com.apple.documentation/documentation/kernel/1646297-oskextresetpgocountersunlock",
        "doc://com.apple.documentation/documentation/kernel/1508272-oskextretainkextwithloadtag"
      ],
      "title": "kext"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/kernel/1508294-oskextrequestresource"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    }
  ]
}

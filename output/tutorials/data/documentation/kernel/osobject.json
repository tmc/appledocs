{"abstract":[{"type":"text","text":"OSObject is the concrete root class of the Libkern and I/O Kit C++ class hierarchy."}],"documentVersion":0,"hierarchy":{"paths":[["doc://com.apple.documentation/documentation/technologies","doc://com.apple.documentation/documentation/kernel","doc://com.apple.documentation/documentation/kernel/iokit_fundamentals","doc://com.apple.documentation/documentation/kernel/libkern/data_types"],["doc://com.apple.documentation/documentation/technologies","doc://com.apple.documentation/documentation/kernel","doc://com.apple.documentation/documentation/kernel/libkern","doc://com.apple.documentation/documentation/kernel/libkern/data_types"]]},"identifier":{"url":"doc://com.apple.documentation/documentation/kernel/osobject","interfaceLanguage":"occ"},"legacy_identifier":1452486,"kind":"symbol","metadata":{"title":"OSObject","role":"symbol","roleHeading":"Class","modules":[{"name":"Kernel"}],"platforms":[{"name":"macOS","introducedAt":"10.0","current":"15.4"}],"externalID":"c:@S@OSObject","symbolKind":"cl"},"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"traits":[{"interfaceLanguage":"occ"}],"paths":["documentation/kernel/osobject"]}],"references":{"doc://com.apple.documentation/documentation/kernel":{"title":"Kernel","identifier":"doc://com.apple.documentation/documentation/kernel","url":"/documentation/kernel","type":"topic","kind":"symbol","role":"collection"},"doc://com.apple.documentation/documentation/kernel/iokit_fundamentals":{"title":"IOKit Fundamentals","identifier":"doc://com.apple.documentation/documentation/kernel/iokit_fundamentals","url":"/documentation/kernel/iokit_fundamentals","type":"topic","kind":"article","role":"collectionGroup"},"doc://com.apple.documentation/documentation/kernel/libkern/data_types":{"title":"Data Types","identifier":"doc://com.apple.documentation/documentation/kernel/libkern/data_types","url":"/documentation/kernel/libkern/data_types","type":"topic","kind":"article","role":"collectionGroup"},"doc://com.apple.documentation/documentation/kernel/libkern":{"title":"libkern","identifier":"doc://com.apple.documentation/documentation/kernel/libkern","url":"/documentation/kernel/libkern","type":"topic","kind":"article","role":"collectionGroup"},"doc://com.apple.documentation/documentation/kernel/osmetaclassbase":{"title":"OSMetaClassBase","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osmetaclassbase","kind":"symbol","role":"symbol","url":"/documentation/kernel/osmetaclassbase","abstract":[{"type":"text","text":"OSMetaClassBase is the abstract bootstrap class for the Libkern and I/O Kit run-time type information system."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941146-free":{"title":"free","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941146-free","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941146-free","abstract":[{"type":"text","text":"Deallocates/releases resources held by the object."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941147-getretaincount":{"title":"getRetainCount","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941147-getretaincount","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941147-getretaincount","abstract":[{"type":"text","text":"Returns the reference count of the object."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941148-init":{"title":"init","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941148-init","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941148-init","abstract":[{"type":"text","text":"Initializes a newly-allocated object."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941149-operator_delete":{"title":"operator delete","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941149-operator_delete","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941149-operator_delete","abstract":[{"type":"text","text":"Frees the memory of the object itself."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941150-operator_new":{"title":"operator new","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941150-operator_new","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941150-operator_new","abstract":[{"type":"text","text":"Allocates memory for an instance of the class."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941151-release":{"title":"release()","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941151-release","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941151-release","abstract":[{"type":"text","text":"Releases a reference to the object, freeing it immediately if the reference count drops to zero."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941153-release":{"title":"release(int)","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941153-release","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941153-release","abstract":[{"type":"text","text":"Releases a reference to an object, freeing it immediately if the reference count drops below the specified threshold."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941154-retain":{"title":"retain","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941154-retain","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941154-retain","abstract":[{"type":"text","text":"Retains a reference to the object."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941155-serialize":{"title":"serialize","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941155-serialize","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941155-serialize","abstract":[{"type":"text","text":"Overridden by subclasses to archive the receiver into the provided OSSerialize object."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941156-taggedrelease":{"title":"taggedRelease(const void *)","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941156-taggedrelease","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941156-taggedrelease","abstract":[{"type":"text","text":"Releases a tagged reference to an object, freeing it immediately if the reference count drops to zero."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941157-taggedrelease":{"title":"taggedRelease(const void *, const int)","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941157-taggedrelease","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941157-taggedrelease","abstract":[{"type":"text","text":"Releases a tagged reference to an object, freeing it immediately if the reference count drops below the specified threshold."}]},"doc://com.apple.documentation/documentation/kernel/osobject/1941158-taggedretain":{"title":"taggedRetain","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1941158-taggedretain","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/osobject/1941158-taggedretain","abstract":[{"type":"text","text":"Retains a reference to the object with an optional tag used for reference-tracking."}]},"doc://com.apple.documentation/documentation/kernel/osobject/3180939-copydispatchqueue":{"title":"CopyDispatchQueue","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3180939-copydispatchqueue","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3180939-copydispatchqueue","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"CopyDispatchQueue"}]},"doc://com.apple.documentation/documentation/kernel/osobject/3180941-dispatch":{"title":"Dispatch","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3180941-dispatch","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3180941-dispatch","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"Dispatch"}]},"doc://com.apple.documentation/documentation/kernel/osobject/3180942-setdispatchqueue":{"title":"SetDispatchQueue","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3180942-setdispatchqueue","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3180942-setdispatchqueue","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"SetDispatchQueue"}]},"doc://com.apple.documentation/documentation/kernel/osobject/3180944-free":{"title":"free","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3180944-free","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3180944-free","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"free"}]},"doc://com.apple.documentation/documentation/kernel/osobject/1546718-getmetaclass":{"title":"getMetaClass","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1546718-getmetaclass","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/1546718-getmetaclass","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"getMetaClass"}]},"doc://com.apple.documentation/documentation/kernel/osobject/1546715-getretaincount":{"title":"getRetainCount","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1546715-getretaincount","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/1546715-getretaincount","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"getRetainCount"}]},"doc://com.apple.documentation/documentation/kernel/osobject/3180945-init":{"title":"init","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3180945-init","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3180945-init","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"init"}]},"doc://com.apple.documentation/documentation/kernel/osobject/1546709-release":{"title":"release","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1546709-release","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/1546709-release","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"release"}]},"doc://com.apple.documentation/documentation/kernel/osobject/3180946-release":{"title":"release","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3180946-release","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3180946-release","abstract":[{"type":"text","text":"Releases the OSObject instance"}],"fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"release"}]},"doc://com.apple.documentation/documentation/kernel/osobject/3180947-retain":{"title":"retain","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3180947-retain","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3180947-retain","abstract":[{"type":"text","text":"Retains the OSObject instance"}],"fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"retain"}]},"doc://com.apple.documentation/documentation/kernel/osobject/1546714-serialize":{"title":"serialize","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1546714-serialize","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/1546714-serialize","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"serialize"}]},"doc://com.apple.documentation/documentation/kernel/osobject/1546712-taggedrelease":{"title":"taggedRelease","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1546712-taggedrelease","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/1546712-taggedrelease","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"taggedRelease"}]},"doc://com.apple.documentation/documentation/kernel/osobject/3516839-taggedrelease":{"title":"taggedRelease","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3516839-taggedrelease","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3516839-taggedrelease","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"taggedRelease"}]},"doc://com.apple.documentation/documentation/kernel/osobject/1546708-taggedretain":{"title":"taggedRetain","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/1546708-taggedretain","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/1546708-taggedretain","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"taggedRetain"}]},"doc://com.apple.documentation/documentation/kernel/osobject/3075311-copydispatchqueue_invoke":{"title":"CopyDispatchQueue_Invoke","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3075311-copydispatchqueue_invoke","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3075311-copydispatchqueue_invoke","fragments":[{"kind":"text","text":"+ "},{"kind":"identifier","text":"CopyDispatchQueue_Invoke"}]},"doc://com.apple.documentation/documentation/kernel/osobject/3075323-setdispatchqueue_invoke":{"title":"SetDispatchQueue_Invoke","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject/3075323-setdispatchqueue_invoke","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject/3075323-setdispatchqueue_invoke","fragments":[{"kind":"text","text":"+ "},{"kind":"identifier","text":"SetDispatchQueue_Invoke"}]},"doc://com.apple.documentation/documentation/kernel/ossymbol":{"title":"OSSymbol","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ossymbol","kind":"symbol","role":"symbol","url":"/documentation/kernel/ossymbol","abstract":[{"type":"text","text":"OSSymbol wraps a C string in a unique C++ object for use as keys in Libkern collections."}]},"doc://com.apple.documentation/documentation/kernel/osobject":{"title":"OSObject","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobject","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobject","abstract":[{"type":"text","text":"OSObject is the concrete root class of the Libkern and I/O Kit C++ class hierarchy."}]},"doc://com.apple.documentation/documentation/kernel/osmetaclass":{"title":"OSMetaClass","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osmetaclass","kind":"symbol","role":"symbol","url":"/documentation/kernel/osmetaclass"},"doc://com.apple.documentation/documentation/kernel/osobjectptr":{"title":"OSObjectPtr","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobjectptr","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobjectptr"},"doc://com.apple.documentation/documentation/kernel/osobjectref":{"title":"OSObjectRef","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osobjectref","kind":"symbol","role":"symbol","url":"/documentation/kernel/osobjectref"},"doc://com.apple.documentation/documentation/kernel/libkern/data_types/additional_types":{"title":"Additional Types","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/libkern/data_types/additional_types","kind":"article","role":"collectionGroup","url":"/documentation/kernel/libkern/data_types/additional_types","abstract":[{"type":"text","text":"Find custom type definitions and pointer types for standard classes. "}]},"doc://com.apple.documentation/documentation/technologies":{"type":"topic","identifier":"doc://com.apple.documentation/documentation/technologies","url":"/documentation/technologies","kind":"technologies","title":"Technologies"}},"relationshipsSections":[{"kind":"relationships","title":"Inherits From","type":"inheritsFrom","identifiers":["doc://com.apple.documentation/documentation/kernel/osmetaclassbase"]}],"topicSections":[{"kind":"taskGroup","title":"Miscellaneous","identifiers":["doc://com.apple.documentation/documentation/kernel/osobject/1941146-free","doc://com.apple.documentation/documentation/kernel/osobject/1941147-getretaincount","doc://com.apple.documentation/documentation/kernel/osobject/1941148-init","doc://com.apple.documentation/documentation/kernel/osobject/1941149-operator_delete","doc://com.apple.documentation/documentation/kernel/osobject/1941150-operator_new","doc://com.apple.documentation/documentation/kernel/osobject/1941151-release","doc://com.apple.documentation/documentation/kernel/osobject/1941153-release","doc://com.apple.documentation/documentation/kernel/osobject/1941154-retain","doc://com.apple.documentation/documentation/kernel/osobject/1941155-serialize","doc://com.apple.documentation/documentation/kernel/osobject/1941156-taggedrelease","doc://com.apple.documentation/documentation/kernel/osobject/1941157-taggedrelease","doc://com.apple.documentation/documentation/kernel/osobject/1941158-taggedretain"],"anchor":"1944371"},{"kind":"taskGroup","title":"Instance Methods","identifiers":["doc://com.apple.documentation/documentation/kernel/osobject/3180939-copydispatchqueue","doc://com.apple.documentation/documentation/kernel/osobject/3180941-dispatch","doc://com.apple.documentation/documentation/kernel/osobject/3180942-setdispatchqueue","doc://com.apple.documentation/documentation/kernel/osobject/3180944-free","doc://com.apple.documentation/documentation/kernel/osobject/1546718-getmetaclass","doc://com.apple.documentation/documentation/kernel/osobject/1546715-getretaincount","doc://com.apple.documentation/documentation/kernel/osobject/3180945-init","doc://com.apple.documentation/documentation/kernel/osobject/1546709-release","doc://com.apple.documentation/documentation/kernel/osobject/3180946-release","doc://com.apple.documentation/documentation/kernel/osobject/3180947-retain","doc://com.apple.documentation/documentation/kernel/osobject/1546714-serialize","doc://com.apple.documentation/documentation/kernel/osobject/1546712-taggedrelease","doc://com.apple.documentation/documentation/kernel/osobject/3516839-taggedrelease","doc://com.apple.documentation/documentation/kernel/osobject/1546708-taggedretain"],"anchor":"3516990"},{"kind":"taskGroup","title":"Type Methods","identifiers":["doc://com.apple.documentation/documentation/kernel/osobject/3075311-copydispatchqueue_invoke","doc://com.apple.documentation/documentation/kernel/osobject/3075323-setdispatchqueue_invoke"],"anchor":"3516991"}],"seeAlsoSections":[{"identifiers":["doc://com.apple.documentation/documentation/kernel/ossymbol","doc://com.apple.documentation/documentation/kernel/osmetaclass","doc://com.apple.documentation/documentation/kernel/osmetaclassbase","doc://com.apple.documentation/documentation/kernel/osobjectptr","doc://com.apple.documentation/documentation/kernel/osobjectref","doc://com.apple.documentation/documentation/kernel/libkern/data_types/additional_types"],"title":"Base Types","generated":true}],"primaryContentSections":[{"kind":"declarations","declarations":[{"languages":["occ"],"tokens":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"OSObject"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","preciseIdentifier":"c:@S@OSMetaClassBase","identifier":"doc://com.apple.documentation/documentation/kernel/osmetaclassbase","text":"OSMetaClassBase"}],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"text":"Overview","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"OSObject defines the minimal functionality required of Libkern and I/O Kit C++ classes: tie-in to the run-time type information facility, the dynamic allocation/initialization paradigm, and reference counting. While kernel extensions are free to use their own C++ classes internally, any interaction they have with Libkern or the I/O Kit will require classes ultimately derived from OSObject."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Run-Time Type Information"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"OSObject is derived from the abstract root class OSMetaClassBase, which declares (and defines many of) the primitives on which the run-time type information facility is based. A parallel inheritance hierarchy of metaclass objects provides run-time introspection, including access to class names, inheritance, and safe type-casting. See OSMetaClass for more information."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Dynamic Allocation/Initialization"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The kernel-resident C++ runtime does not support exceptions, so Libkern classes cannot use standard C++ object constructors and destructors, which use exceptions to report errors. To support error-handling during instance creation, then, OSObject separates object allocation from initialization. You can create a new OSObject-derived instance with the "},{"type":"codeVoice","code":"new"},{"type":"text","text":" operator, but this does nothing more than allocate memory and initialize the reference count to 1. Following this, you must call a designated initialization function and check its "},{"type":"codeVoice","code":"bool"},{"type":"text","text":" return value. If the initialization fails, you must immediately call release on the instance and handle the failure in whatever way is appropriate. Many Libkern and I/O Kit classes define static instance-creation functions (beginning with the word \"with\") to make construction a one-step process for clients."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Reference Counting"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"OSObject provides reference counting services using the retain, release(), release(int freeWhen) and free functions. The public interface to the reference counting is retain, and release; release(int freeWhen) is provided for objects that have internal retain cycles."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In general, a subclass is expected to only override free. It may also choose to override release(int freeWhen) if the object has a circular retain count, as noted above."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Use Restrictions"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"With very few exceptions in the I/O Kit, all Libkern-based C++ classes, functions, and macros are "},{"type":"strong","inlineContent":[{"type":"text","text":"unsafe"}]},{"type":"text","text":" to use in a primary interrupt context. Consult the I/O Kit documentation related to primary interrupts for more information."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Concurrency Protection"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The basic features of OSObject are thread-safe. Most Libkern subclasses are not, and require locking or other protection if instances are shared between threads. I/O Kit driver objects are either designed for use within thread-safe contexts or designed to inherently be thread-safe. Always check the individual class documentation to see what steps are necessary for concurrent use of instances."}]}]}],"legalNotices":{"copyright":"Copyright &copy; 2025 Apple Inc. All rights reserved.","termsOfUse":"https://www.apple.com/legal/internet-services/terms/site.html","privacyPolicy":"https://www.apple.com/privacy/privacy-policy"}}
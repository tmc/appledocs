{
  "abstract": [
    {
      "text": "Generates a physical scatter/gather for the current DMA command",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/kernel",
        "doc://com.apple.documentation/documentation/kernel/iokit_fundamentals",
        "doc://com.apple.documentation/documentation/kernel/iokit_fundamentals/memory",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811150-geniovmsegments"
  },
  "kind": "symbol",
  "legacy_identifier": 1811150,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "Kernel"
      }
    ],
    "parent": {
      "title": "IODMACommand"
    },
    "role": "pseudoSymbol",
    "symbolKind": "instm",
    "title": "genIOVMSegments"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "platforms": [],
          "tokens": [
            {
              "kind": "text",
              "text": "virtual IOReturn genIOVMSegments("
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": " UInt64 *offset, "
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": " void *segments, "
            },
            {
              "kind": "text",
              "text": "\n"
            },
            {
              "kind": "text",
              "text": " UInt32 *numSegments); "
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "input/output parameter, defines the starting and ending offset in the memory descriptor, relative to any offset passed to the prepare() method.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "offset"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Void pointer to base of output physical scatter/gather list. Always passed directly onto the SegmentFunction.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "segments"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Input/output parameter Number of segments that can fit in the segment array and returns number of segments generated.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "numSegments"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "kIOReturnSuccess on success, kIOReturnOverrun if the memory descriptor is exhausted, kIOReturnMessageTooLarge if the output segment function's address bits has insufficient resolution for a segment, kIOReturnNotReady if the DMA command has not be prepared, kIOReturnBadArgument if the DMA command doesn't have a memory descriptor yet or some of the parameters are NULL and kIOReturnNotReady if the DMA command is not prepared.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Generates a list of physical segments from the given memory descriptor, relative to the current position of the descriptor. The constraints that are set during initialisation will be respected. This function maintains the state across multiple calls for efficiency. However the state is discarded if the new offset is not the expected one.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/kernel": {
      "identifier": "doc://com.apple.documentation/documentation/kernel",
      "kind": "symbol",
      "role": "collection",
      "title": "Kernel",
      "type": "topic",
      "url": "/documentation/kernel"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand",
      "kind": "symbol",
      "role": "symbol",
      "title": "IODMACommand",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547715-clearmemorydescriptor": {
      "abstract": [
        {
          "text": "Clears the DMACommand's current memory descriptor",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "clearMemoryDescriptor"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547715-clearmemorydescriptor",
      "kind": "symbol",
      "role": "symbol",
      "title": "clearMemoryDescriptor",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1547715-clearmemorydescriptor"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547720-geniovmsegments": {
      "abstract": [
        {
          "text": "Generates a physical scatter/gather for the current DMA command",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "genIOVMSegments"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547720-geniovmsegments",
      "kind": "symbol",
      "role": "symbol",
      "title": "genIOVMSegments",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1547720-geniovmsegments"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547722-gen64iovmsegments": {
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "gen64IOVMSegments"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547722-gen64iovmsegments",
      "kind": "symbol",
      "role": "symbol",
      "title": "gen64IOVMSegments",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1547722-gen64iovmsegments"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547727-setmemorydescriptor": {
      "abstract": [
        {
          "text": "Sets and resets the DMACommand's current memory descriptor",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "setMemoryDescriptor"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547727-setmemorydescriptor",
      "kind": "symbol",
      "role": "symbol",
      "title": "setMemoryDescriptor",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1547727-setmemorydescriptor"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547729-createcopybuffer": {
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "createCopyBuffer"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547729-createcopybuffer",
      "kind": "symbol",
      "role": "symbol",
      "title": "createCopyBuffer",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1547729-createcopybuffer"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547736-getiomemorydescriptor": {
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "getIOMemoryDescriptor"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547736-getiomemorydescriptor",
      "kind": "symbol",
      "role": "symbol",
      "title": "getIOMemoryDescriptor",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1547736-getiomemorydescriptor"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547749-gen32iovmsegments": {
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "gen32IOVMSegments"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547749-gen32iovmsegments",
      "kind": "symbol",
      "role": "symbol",
      "title": "gen32IOVMSegments",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1547749-gen32iovmsegments"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547753-getmemorydescriptor": {
      "abstract": [
        {
          "text": "Get the current memory descriptor",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "getMemoryDescriptor"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547753-getmemorydescriptor",
      "kind": "symbol",
      "role": "symbol",
      "title": "getMemoryDescriptor",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1547753-getmemorydescriptor"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547765-getpreparedoffsetandlength": {
      "abstract": [
        {
          "text": "Returns the offset and length into the target IOMemoryDescriptor of a prepared IODDMACommand.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "getPreparedOffsetAndLength"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547765-getpreparedoffsetandlength",
      "kind": "symbol",
      "role": "symbol",
      "title": "getPreparedOffsetAndLength",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1547765-getpreparedoffsetandlength"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811032-clearmemorydescriptor": {
      "abstract": [
        {
          "text": "Clears the DMACommand's current memory descriptor",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811032-clearmemorydescriptor",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "clearMemoryDescriptor",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1811032-clearmemorydescriptor"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811104-gen32iovmsegments": {
      "abstract": [
        {
          "text": "Helper function for a type checked call to genIOVMSegments(qv), for use with an IODMACommand set up with the output function kIODMACommandOutputHost32, kIODMACommandOutputBig32, or kIODMACommandOutputLittle32. If the output function of the IODMACommand is not a 32 bit function, results will be incorrect.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811104-gen32iovmsegments",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "gen32IOVMSegments",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1811104-gen32iovmsegments"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811126-gen64iovmsegments": {
      "abstract": [
        {
          "text": "Helper function for a type checked call to genIOVMSegments(qv), for use with an IODMACommand set up with the output function kIODMACommandOutputHost64, kIODMACommandOutputBig64, or kIODMACommandOutputLittle64. If the output function of the IODMACommand is not a 64 bit function, results will be incorrect.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811126-gen64iovmsegments",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "gen64IOVMSegments",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1811126-gen64iovmsegments"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811150-geniovmsegments": {
      "abstract": [
        {
          "text": "Generates a physical scatter/gather for the current DMA command",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811150-geniovmsegments",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "genIOVMSegments",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1811150-geniovmsegments"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811175-getmemorydescriptor": {
      "abstract": [
        {
          "text": "Get the current memory descriptor",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811175-getmemorydescriptor",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "getMemoryDescriptor",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1811175-getmemorydescriptor"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811194-getpreparedoffsetandlength": {
      "abstract": [
        {
          "text": "Returns the offset and length into the target IOMemoryDescriptor of a prepared IODDMACommand.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811194-getpreparedoffsetandlength",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "getPreparedOffsetAndLength",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1811194-getpreparedoffsetandlength"
    },
    "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811308-setmemorydescriptor": {
      "abstract": [
        {
          "text": "Sets and resets the DMACommand's current memory descriptor",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811308-setmemorydescriptor",
      "kind": "symbol",
      "role": "pseudoSymbol",
      "title": "setMemoryDescriptor",
      "type": "topic",
      "url": "/documentation/kernel/iodmacommand/1811308-setmemorydescriptor"
    },
    "doc://com.apple.documentation/documentation/kernel/iokit_fundamentals": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/iokit_fundamentals",
      "kind": "article",
      "role": "collectionGroup",
      "title": "IOKit Fundamentals",
      "type": "topic",
      "url": "/documentation/kernel/iokit_fundamentals"
    },
    "doc://com.apple.documentation/documentation/kernel/iokit_fundamentals/memory": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/iokit_fundamentals/memory",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Memory",
      "type": "topic",
      "url": "/documentation/kernel/iokit_fundamentals/memory"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811308-setmemorydescriptor",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547727-setmemorydescriptor",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811032-clearmemorydescriptor",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547715-clearmemorydescriptor",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811175-getmemorydescriptor",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547753-getmemorydescriptor",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547736-getiomemorydescriptor",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811194-getpreparedoffsetandlength",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547765-getpreparedoffsetandlength",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547720-geniovmsegments",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811104-gen32iovmsegments",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547749-gen32iovmsegments",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1811126-gen64iovmsegments",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547722-gen64iovmsegments",
        "doc://com.apple.documentation/documentation/kernel/iodmacommand/1547729-createcopybuffer"
      ],
      "title": "Configuring the Memory Descriptor"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/kernel/iodmacommand/1811150-geniovmsegments",
        "documentation/driverkit/iodmacommand/1811150-geniovmsegments"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    }
  ]
}

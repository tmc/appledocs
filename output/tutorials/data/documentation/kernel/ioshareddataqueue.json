{"abstract":[{"type":"text","text":"A generic queue designed to pass data both from the kernel to a user process and from a user process to the kernel."}],"documentVersion":0,"hierarchy":{"paths":[["doc://com.apple.documentation/documentation/technologies","doc://com.apple.documentation/documentation/kernel","doc://com.apple.documentation/documentation/kernel/iokit_fundamentals"]]},"identifier":{"url":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue","interfaceLanguage":"occ"},"legacy_identifier":1562875,"kind":"symbol","metadata":{"title":"IOSharedDataQueue","role":"symbol","roleHeading":"Class","modules":[{"name":"Kernel"}],"platforms":[{"name":"macOS","introducedAt":"10.5","current":"15.4"}],"externalID":"c:@S@IOSharedDataQueue","symbolKind":"cl"},"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"traits":[{"interfaceLanguage":"occ"}],"paths":["documentation/kernel/ioshareddataqueue"]}],"references":{"doc://com.apple.documentation/documentation/kernel":{"title":"Kernel","identifier":"doc://com.apple.documentation/documentation/kernel","url":"/documentation/kernel","type":"topic","kind":"symbol","role":"collection"},"doc://com.apple.documentation/documentation/kernel/iokit_fundamentals":{"title":"IOKit Fundamentals","identifier":"doc://com.apple.documentation/documentation/kernel/iokit_fundamentals","url":"/documentation/kernel/iokit_fundamentals","type":"topic","kind":"article","role":"collectionGroup"},"doc://com.apple.documentation/documentation/kernel/iodataqueue":{"title":"IODataQueue","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/iodataqueue","kind":"symbol","role":"symbol","url":"/documentation/kernel/iodataqueue"},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810190-dequeue":{"title":"dequeue","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810190-dequeue","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/ioshareddataqueue/1810190-dequeue","abstract":[{"type":"text","text":"Dequeues the next available entry on the queue and copies it into the given data pointer."}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810240-getmemorydescriptor":{"title":"getMemoryDescriptor","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810240-getmemorydescriptor","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/ioshareddataqueue/1810240-getmemorydescriptor","abstract":[{"type":"text","text":"Returns a memory descriptor covering the IODataQueueMemory region."}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810293-initwithcapacity":{"title":"initWithCapacity","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810293-initwithcapacity","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/ioshareddataqueue/1810293-initwithcapacity","abstract":[{"type":"text","text":"Initializes an IOSharedDataQueue instance with the capacity specified in the size parameter."}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810347-peek":{"title":"peek","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810347-peek","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/ioshareddataqueue/1810347-peek","abstract":[{"type":"text","text":"Used to peek at the next entry on the queue."}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810400-withcapacity":{"title":"withCapacity","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810400-withcapacity","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/ioshareddataqueue/1810400-withcapacity","abstract":[{"type":"text","text":"Static method that creates a new IOSharedDataQueue instance with the capacity specified in the size parameter."}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810447-withentries":{"title":"withEntries","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810447-withentries","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/ioshareddataqueue/1810447-withentries","abstract":[{"type":"text","text":"Static method that creates a new IOSharedDataQueue instance with the specified number of entries of the given size."}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/reserved":{"title":"_reserved","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/reserved","kind":"symbol","role":"pseudoSymbol","url":"/documentation/kernel/ioshareddataqueue/reserved","abstract":[]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562870-dequeue":{"title":"dequeue","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562870-dequeue","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562870-dequeue","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"dequeue"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562880-enqueue":{"title":"enqueue","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562880-enqueue","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562880-enqueue","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"enqueue"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562879-free":{"title":"free","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562879-free","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562879-free","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"free"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562877-getmemorydescriptor":{"title":"getMemoryDescriptor","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562877-getmemorydescriptor","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562877-getmemorydescriptor","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"getMemoryDescriptor"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562878-getmetaclass":{"title":"getMetaClass","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562878-getmetaclass","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562878-getmetaclass","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"getMetaClass"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562873-getqueuesize":{"title":"getQueueSize","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562873-getqueuesize","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562873-getqueuesize","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"getQueueSize"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562876-initwithcapacity":{"title":"initWithCapacity","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562876-initwithcapacity","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562876-initwithcapacity","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"initWithCapacity"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562872-peek":{"title":"peek","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562872-peek","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562872-peek","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"peek"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562874-setqueuesize":{"title":"setQueueSize","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562874-setqueuesize","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562874-setqueuesize","fragments":[{"kind":"text","text":"- "},{"kind":"identifier","text":"setQueueSize"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562871-withcapacity":{"title":"withCapacity","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562871-withcapacity","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562871-withcapacity","fragments":[{"kind":"text","text":"+ "},{"kind":"identifier","text":"withCapacity"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562881-withentries":{"title":"withEntries","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562881-withentries","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue/1562881-withentries","fragments":[{"kind":"text","text":"+ "},{"kind":"identifier","text":"withEntries"}]},"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue":{"title":"IOSharedDataQueue","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/ioshareddataqueue","kind":"symbol","role":"symbol","url":"/documentation/kernel/ioshareddataqueue","abstract":[{"type":"text","text":"A generic queue designed to pass data both from the kernel to a user process and from a user process to the kernel."}]},"doc://com.apple.documentation/documentation/kernel/iosharedinterruptcontroller":{"title":"IOSharedInterruptController","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/iosharedinterruptcontroller","kind":"symbol","role":"symbol","url":"/documentation/kernel/iosharedinterruptcontroller"},"doc://com.apple.documentation/documentation/kernel/iouserclient":{"title":"IOUserClient","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/iouserclient","kind":"symbol","role":"symbol","url":"/documentation/kernel/iouserclient","abstract":[{"type":"text","text":"Provides a basis for communication between client applications and I/O Kit objects."}]},"doc://com.apple.documentation/documentation/kernel/iostreamuserclient":{"title":"IOStreamUserClient","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/iostreamuserclient","kind":"symbol","role":"symbol","url":"/documentation/kernel/iostreamuserclient"},"doc://com.apple.documentation/documentation/kernel/iostream":{"title":"IOStream","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/iostream","kind":"symbol","role":"symbol","url":"/documentation/kernel/iostream","abstract":[{"type":"text","text":"A class representing a stream of data buffers passed from kernel to user space and back again."}]},"doc://com.apple.documentation/documentation/kernel/iostreambuffer":{"title":"IOStreamBuffer","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/iostreambuffer","kind":"symbol","role":"symbol","url":"/documentation/kernel/iostreambuffer","abstract":[{"type":"text","text":"A class representing a data buffer that is part of an IOStream."}]},"doc://com.apple.documentation/documentation/kernel/osaction_iouserclient_kernelcompletion":{"title":"OSAction_IOUserClient_KernelCompletion","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osaction_iouserclient_kernelcompletion","kind":"symbol","role":"symbol","url":"/documentation/kernel/osaction_iouserclient_kernelcompletion"},"doc://com.apple.documentation/documentation/kernel/osaction_iouserclient_kernelcompletioninterface":{"title":"OSAction_IOUserClient_KernelCompletionInterface","type":"topic","identifier":"doc://com.apple.documentation/documentation/kernel/osaction_iouserclient_kernelcompletioninterface","kind":"symbol","role":"symbol","url":"/documentation/kernel/osaction_iouserclient_kernelcompletioninterface"},"doc://com.apple.documentation/documentation/technologies":{"type":"topic","identifier":"doc://com.apple.documentation/documentation/technologies","url":"/documentation/technologies","kind":"technologies","title":"Technologies"}},"relationshipsSections":[{"kind":"relationships","title":"Inherits From","type":"inheritsFrom","identifiers":["doc://com.apple.documentation/documentation/kernel/iodataqueue"]}],"topicSections":[{"kind":"taskGroup","title":"Miscellaneous","identifiers":["doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810190-dequeue","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810240-getmemorydescriptor","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810293-initwithcapacity","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810347-peek","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810400-withcapacity","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1810447-withentries"],"anchor":"1818639"},{"kind":"taskGroup","title":"Instance Variables","identifiers":["doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/reserved"],"anchor":"1818657"},{"kind":"taskGroup","title":"Instance Methods","identifiers":["doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562870-dequeue","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562880-enqueue","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562879-free","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562877-getmemorydescriptor","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562878-getmetaclass","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562873-getqueuesize","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562876-initwithcapacity","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562872-peek","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562874-setqueuesize"],"anchor":"2860007"},{"kind":"taskGroup","title":"Type Methods","identifiers":["doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562871-withcapacity","doc://com.apple.documentation/documentation/kernel/ioshareddataqueue/1562881-withentries"],"anchor":"2860008"}],"seeAlsoSections":[{"identifiers":["doc://com.apple.documentation/documentation/kernel/iosharedinterruptcontroller","doc://com.apple.documentation/documentation/kernel/iouserclient","doc://com.apple.documentation/documentation/kernel/iostreamuserclient","doc://com.apple.documentation/documentation/kernel/iostream","doc://com.apple.documentation/documentation/kernel/iostreambuffer","doc://com.apple.documentation/documentation/kernel/osaction_iouserclient_kernelcompletion","doc://com.apple.documentation/documentation/kernel/osaction_iouserclient_kernelcompletioninterface"],"title":"User-Space Interactions","generated":true}],"primaryContentSections":[{"kind":"declarations","declarations":[{"languages":["occ"],"tokens":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"IOSharedDataQueue"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","preciseIdentifier":"c:@S@IODataQueue","identifier":"doc://com.apple.documentation/documentation/kernel/iodataqueue","text":"IODataQueue"}],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"text":"Overview","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The IOSharedDataQueue class is designed to also allow a user process to queue data to kernel code. IOSharedDataQueue objects are designed to be used in a single producer / single consumer situation. As such, there are no locks on the data itself. Because the kernel enqueue and user-space dequeue methods follow a strict set of guidelines, no locks are necessary to maintain the integrity of the data struct."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Each data entry can be variable sized, but the entire size of the queue data region (including overhead for each entry) must be specified up front."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order for the IODataQueue instance to notify the user process that data is available, a notification mach port must be set. When the queue is empty and a new entry is added, a message is sent to the specified port."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to make the data queue memory available to a user process, the method getMemoryDescriptor() must be used to get an IOMemoryDescriptor instance that can be mapped into a user process. Typically, the clientMemoryForType() method on an IOUserClient instance will be used to request the IOMemoryDescriptor and then return it to be mapped into the user process."}]}]}],"legalNotices":{"copyright":"Copyright &copy; 2025 Apple Inc. All rights reserved.","termsOfUse":"https://www.apple.com/legal/internet-services/terms/site.html","privacyPolicy":"https://www.apple.com/privacy/privacy-policy"}}
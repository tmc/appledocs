{
  "abstract": [],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/kernel",
        "doc://com.apple.documentation/documentation/kernel/deprecated_symbols"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/kernel/1535681-mbuf_allocpacket_list"
  },
  "kind": "symbol",
  "legacy_identifier": 1535681,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:@F@mbuf_allocpacket_list",
    "modules": [
      {
        "name": "Kernel"
      }
    ],
    "platforms": [
      {
        "current": "15.4",
        "deprecated": true,
        "deprecatedAt": "10.15.4",
        "introducedAt": "10.4",
        "name": "macOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Function",
    "symbolKind": "func",
    "title": "mbuf_allocpacket_list"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "platforms": [
            "macOS"
          ],
          "tokens": [
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/errno_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@errno_t",
              "text": "errno_t"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "mbuf_allocpacket_list"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "unsigned"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "keyword",
              "text": "int"
            },
            {
              "kind": "text",
              "text": " numpkts, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/mbuf_how_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@mbuf_how_t",
              "text": "mbuf_how_t"
            },
            {
              "kind": "text",
              "text": " how, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/size_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@size_t",
              "text": "size_t"
            },
            {
              "kind": "text",
              "text": " packetlen, "
            },
            {
              "kind": "keyword",
              "text": "unsigned"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "keyword",
              "text": "int"
            },
            {
              "kind": "text",
              "text": " *maxchunks, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/kernel/mbuf_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@mbuf_t",
              "text": "mbuf_t"
            },
            {
              "kind": "text",
              "text": " *mbuf);"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Number of packets to allocate",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "numpkts"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Blocking or non-blocking",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "how"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The total length of the packet mbuf to be allocated. The length must be greater than zero.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "packetlen"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "An input/output pointer to the maximum number of mbufs segments making up the chain. On input, if maxchunks is zero, or the value pointed to by maxchunks is zero, the packet will be made of as few or as many buffer segments as necessary to fit the length. The allocation will fail with ENOBUFS if the number of segments requested is too small and the sum of the maximum size of each individual segment is less than the packet length. On output, if the allocation succeed and maxchunks is non zero, it will point to the actual number of segments allocated. Additional notes for packetlen greater than 4096 bytes: the caller may pass a non-NULL maxchunks and initialize it with zero such that upon success, it can find out whether or not the system configuration allows for larger than 4096 bytes cluster allocations, by checking on the value pointed to by maxchunks. E.g. a request for 9018 bytes may result in 1 chunk when jumbo clusters are available, or 3 chunks otherwise.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "maxchunks"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "success, *mbuf will be a reference to the new mbuf.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Upon"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Returns 0 upon success or the following error code: EINVAL - Invalid parameter ENOMEM - Not enough memory available ENOBUFS - Buffers not big enough for the maximum number of chunks requested",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Allocate a linked list of packets. According to the requested length, each packet will made of a chain of one or more mbufs. The mbuf type will be set to MBUF_TYPE_DATA. The caller may specify the maximum number of element for each mbuf chain making up a packet.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/kernel": {
      "identifier": "doc://com.apple.documentation/documentation/kernel",
      "kind": "symbol",
      "role": "collection",
      "title": "Kernel",
      "type": "topic",
      "url": "/documentation/kernel"
    },
    "doc://com.apple.documentation/documentation/kernel/deprecated_symbols": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/deprecated_symbols",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Deprecated Symbols",
      "type": "topic",
      "url": "/documentation/kernel/deprecated_symbols"
    },
    "doc://com.apple.documentation/documentation/kernel/errno_t": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/errno_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "errno_t",
      "type": "topic",
      "url": "/documentation/kernel/errno_t"
    },
    "doc://com.apple.documentation/documentation/kernel/mbuf_how_t": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/mbuf_how_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "mbuf_how_t",
      "type": "topic",
      "url": "/documentation/kernel/mbuf_how_t"
    },
    "doc://com.apple.documentation/documentation/kernel/mbuf_t": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/mbuf_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "mbuf_t",
      "type": "topic",
      "url": "/documentation/kernel/mbuf_t"
    },
    "doc://com.apple.documentation/documentation/kernel/size_t": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/size_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "size_t",
      "type": "topic",
      "url": "/documentation/kernel/size_t"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "paths": [
        "documentation/kernel/1535681-mbuf_allocpacket_list"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    }
  ]
}

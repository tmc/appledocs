{
  "abstract": [
    {
      "text": "Interrupt the kernel on a target Mac and attach a remote debugger to it.",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/kernel"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/kernel/generating_a_non-maskable_interrupt"
  },
  "kind": "article",
  "legacy_identifier": 3624913,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "Kernel"
      }
    ],
    "role": "article",
    "roleHeading": "Article",
    "title": "Generating a Non-Maskable Interrupt"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Debugging many types of kernel-level problems requires a second Mac computer to run the debugger. On your target Mac, configure the ",
              "type": "text"
            },
            {
              "code": "debug",
              "type": "codeVoice"
            },
            {
              "text": " boot arg with the options you need to support non-maskable interrupts (NMIs). The ",
              "type": "text"
            },
            {
              "code": "DB_NMI",
              "type": "codeVoice"
            },
            {
              "text": " (",
              "type": "text"
            },
            {
              "code": "0x4",
              "type": "codeVoice"
            },
            {
              "text": ") flag causes the kernel on the target Mac to wait for a debuger to attach when an NMI occurs; add other flags as needed. After an NMI occurs, use the debugger on your second Mac to examine the system and diagnose any issues.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "For information about how to configure your Mac to debug kernel processes, sign in and download the Kernel Debug Kit from ",
              "type": "text"
            },
            {
              "identifier": "link-3618660",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ". ",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "3624910",
          "level": 3,
          "text": "Trigger a Non-Maskable Interrupt Manually",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The following table lists the keys you press to trigger an NMI on different types of Mac. ",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "header": "row",
          "metadata": {
            "anchor": "3624912",
            "title": "Table 1"
          },
          "rows": [
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "Mac",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Key presses",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "Apple silicon",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Command (Left) + Command (Right) + Delete",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "Intel-based Mac (with Apple T2 Security Chip)",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Command (Left) + Command (Right) + Delete",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "Intel-based Mac (without Apple T2 Security Chip)",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Command (Left) + Command (Right) + Power Button",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ]
          ],
          "type": "table"
        },
        {
          "inlineContent": [
            {
              "text": "For information about which Intel-based Mac computers have the Apple T2 Security Chip, see ",
              "type": "text"
            },
            {
              "identifier": "link-3625571",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "3624911",
          "level": 3,
          "text": "Configure a One-Button NMI",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "To trigger an NMI manually using only the target Mac’s power button, add the ",
              "type": "text"
            },
            {
              "code": "DB_NMI_BTN_ENA",
              "type": "codeVoice"
            },
            {
              "text": " (",
              "type": "text"
            },
            {
              "code": "0x8000",
              "type": "codeVoice"
            },
            {
              "text": ") flag to the ",
              "type": "text"
            },
            {
              "code": "debug",
              "type": "codeVoice"
            },
            {
              "text": " boot arg. Using only the power button makes it possible to trigger an NMI early in the Mac’s boot sequence. For example, you can trigger an NMI before the system loads the USB keyboard driver, or trigger one on systems with no keyboard at all. Combine this flag with the ",
              "type": "text"
            },
            {
              "code": "DB_NMI",
              "type": "codeVoice"
            },
            {
              "text": " flag and set the boot args on your target Mac as shown in the following example:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "sudo nvram boot-args=\"<current settings> debug=0x8004\""
          ],
          "metadata": {
            "anchor": "3624914",
            "title": "Listing 1"
          },
          "syntax": "other",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "When you set one or more debug flags, the target Mac retains the designated capabilities until you remove the flags using the ",
              "type": "text"
            },
            {
              "code": "nvram",
              "type": "codeVoice"
            },
            {
              "text": " tool. To remove all boot args, run the ",
              "type": "text"
            },
            {
              "code": "nvram",
              "type": "codeVoice"
            },
            {
              "text": " tool with the ",
              "type": "text"
            },
            {
              "code": "-d",
              "type": "codeVoice"
            },
            {
              "text": " option, as shown in the following example:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "sudo nvram -d boot-args"
          ],
          "metadata": {
            "anchor": "3624915",
            "title": "Listing 2"
          },
          "syntax": "other",
          "type": "codeListing"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Adding the ",
                  "type": "text"
                },
                {
                  "code": "DB_NMI_BTN_ENA",
                  "type": "codeVoice"
                },
                {
                  "text": " flag prevents you from pressing your Mac’s power button to display the UI to shutdown, restart, or sleep the computer. Similarly, you cannot press the button to wake the computer while it’s asleep. You may still press and hold the button for eight to ten seconds to shut down the Mac. ",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "style": "important",
          "type": "aside"
        },
        {
          "inlineContent": [],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.Apple-Silicon/documentation/Apple-Silicon/debugging-a-custom-kernel-extension": {
      "abstract": [
        {
          "text": "Configure your system to enable the debugging of custom kernel extensions from a second Mac.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.Apple-Silicon/documentation/Apple-Silicon/debugging-a-custom-kernel-extension",
      "kind": "article",
      "role": "article",
      "title": "Debugging a Custom Kernel Extension",
      "type": "topic",
      "url": "/documentation/apple-silicon/debugging-a-custom-kernel-extension"
    },
    "doc://com.apple.Apple-Silicon/documentation/Apple-Silicon/installing-a-custom-kernel-extension": {
      "abstract": [
        {
          "text": "Install kernel extensions using a custom installer package, and help users understand the installation process.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.Apple-Silicon/documentation/Apple-Silicon/installing-a-custom-kernel-extension",
      "kind": "article",
      "role": "article",
      "title": "Installing a Custom Kernel Extension",
      "type": "topic",
      "url": "/documentation/apple-silicon/installing-a-custom-kernel-extension"
    },
    "doc://com.apple.documentation/documentation/kernel": {
      "identifier": "doc://com.apple.documentation/documentation/kernel",
      "kind": "symbol",
      "role": "collection",
      "title": "Kernel",
      "type": "topic",
      "url": "/documentation/kernel"
    },
    "doc://com.apple.documentation/documentation/kernel/generating_a_non-maskable_interrupt": {
      "abstract": [
        {
          "text": "Interrupt the kernel on a target Mac and attach a remote debugger to it.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/generating_a_non-maskable_interrupt",
      "kind": "article",
      "role": "article",
      "title": "Generating a Non-Maskable Interrupt",
      "type": "topic",
      "url": "/documentation/kernel/generating_a_non-maskable_interrupt"
    },
    "doc://com.apple.documentation/documentation/kernel/generating_a_non-maskable_interrupt#3624912": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/generating_a_non-maskable_interrupt#3624912",
      "kind": "article",
      "role": "table",
      "title": "Table 1",
      "type": "section",
      "url": "/documentation/kernel/generating_a_non-maskable_interrupt#3624912"
    },
    "doc://com.apple.documentation/documentation/kernel/generating_a_non-maskable_interrupt#3624914": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/generating_a_non-maskable_interrupt#3624914",
      "kind": "article",
      "role": "codeListing",
      "title": "Listing 1",
      "type": "section",
      "url": "/documentation/kernel/generating_a_non-maskable_interrupt#3624914"
    },
    "doc://com.apple.documentation/documentation/kernel/generating_a_non-maskable_interrupt#3624915": {
      "identifier": "doc://com.apple.documentation/documentation/kernel/generating_a_non-maskable_interrupt#3624915",
      "kind": "article",
      "role": "codeListing",
      "title": "Listing 2",
      "type": "section",
      "url": "/documentation/kernel/generating_a_non-maskable_interrupt#3624915"
    },
    "doc://com.apple.documentation/documentation/kernel/implementing_drivers_system_extensions_and_kexts": {
      "abstract": [
        {
          "text": "Create drivers and system extensions to communicate with hardware and provide low-level services, and only use kernel extensions for a few tasks. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/kernel/implementing_drivers_system_extensions_and_kexts",
      "kind": "article",
      "role": "article",
      "title": "Implementing drivers, system extensions, and kexts",
      "type": "topic",
      "url": "/documentation/kernel/implementing_drivers_system_extensions_and_kexts"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "link-3618660": {
      "identifier": "link-3618660",
      "kind": "article",
      "role": "link",
      "title": "https://developer.apple.com/download/more/",
      "type": "topic",
      "url": "https://developer.apple.com/download/more/"
    },
    "link-3625571": {
      "identifier": "link-3625571",
      "kind": "article",
      "role": "link",
      "title": "About the Apple T2 Security Chip",
      "type": "topic",
      "url": "https://support.apple.com/en-us/HT208862"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/kernel/implementing_drivers_system_extensions_and_kexts",
        "doc://com.apple.Apple-Silicon/documentation/Apple-Silicon/installing-a-custom-kernel-extension",
        "doc://com.apple.Apple-Silicon/documentation/Apple-Silicon/debugging-a-custom-kernel-extension"
      ],
      "title": "Kernel Extensions"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/kernel/generating_a_non-maskable_interrupt"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    }
  ]
}

{
  "abstract": [
    {
      "text": "Update the adjustable parameters of a 3D model in visionOS.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.visionOS/documentation/visionOS",
        "doc://com.apple.visionOS/documentation/visionOS/introductory-visionOS-samples"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.visionOS/documentation/visionOS/implementing-adjustable-material-in-visionos"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "platforms": [
      {
        "beta": false,
        "introducedAt": "2.0",
        "name": "visionOS"
      },
      {
        "beta": false,
        "introducedAt": "16.0",
        "name": "Xcode"
      }
    ],
    "role": "sampleCode",
    "roleHeading": "Sample Code",
    "title": "Implementing adjustable material"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "Overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "This sample app creates and displays a 3D dragon model within visionOS, using Reality Composer Pro. While the sample focuses on modifying the dragon’s adjustable glass material (such as its roughness and refraction), you can also modify the adjustables for other material instances to allow dynamic customization for your visionOS app.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The app splits into two parts in its main view:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "A 3D shape with a glass material",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Two sliders to adjust modifiables",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "identifier": "sample-glass-1-main-view.png",
              "type": "image"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Set-up-the-shader-graph",
          "level": 3,
          "text": "Set up the shader graph",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The shader graph for the dragon model includes two modifiable parameters: ",
              "type": "text"
            },
            {
              "code": "roughness",
              "type": "codeVoice"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "code": "eta",
              "type": "codeVoice"
            },
            {
              "text": ". These control the model’s surface roughness and refraction, respectively, as the following image shows:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "identifier": "sample-glass-2-shader-graph",
              "type": "image"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "These parameters connect through various nodes, ultimately feeding into a ",
              "type": "text"
            },
            {
              "code": "RealitykitEnvironmentRadiance",
              "type": "codeVoice"
            },
            {
              "text": " node. This setup allows dynamic adjustment of the dragon’s appearance.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The parameter ",
                  "type": "text"
                },
                {
                  "code": "eta",
                  "type": "codeVoice"
                },
                {
                  "text": " represents ",
                  "type": "text"
                },
                {
                  "code": "η",
                  "type": "codeVoice"
                },
                {
                  "text": ", which symbolizes the index of refraction. For more information, see ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/ShaderGraph/Geometric/Refract-(RealityKit)",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "anchor": "Update-the-component-material",
          "level": 3,
          "text": "Update the component material",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "To handle updates to the dragon model, the app creates the ",
              "type": "text"
            },
            {
              "code": "updateMaterials(_:)",
              "type": "codeVoice"
            },
            {
              "text": " method, which employs a recursive approach to update all child entities that the parent entity manages. Then the app applies the ",
              "type": "text"
            },
            {
              "code": "update",
              "type": "codeVoice"
            },
            {
              "text": " closure to each material within the component, to update those materials:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "import RealityKit",
            "",
            "extension Entity {",
            "    public func updateMaterials(_ update: (inout Material) -> Void) {",
            "        // Call recursive method to all child entities.",
            "        for child in children {",
            "            child.updateMaterials(update)",
            "        }",
            "",
            "        // Apply the new values to the component material.",
            "        if var comp = components[ModelComponent.self] {",
            "            comp.materials = comp.materials.map { material in",
            "            var copy = material",
            "            update(&copy)",
            "            return copy",
            "        }",
            "            components.set(comp)",
            "        }",
            "    }",
            "}"
          ],
          "syntax": "swift",
          "type": "codeListing"
        },
        {
          "anchor": "Set-up-the-main-view",
          "level": 3,
          "text": "Set up the main view",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "To control the material properties of the 3D glass model, the app initializes variables for the default roughness value, eta parameter for refraction, and entity instance of the dragon model in the ",
              "type": "text"
            },
            {
              "code": "GlassView",
              "type": "codeVoice"
            },
            {
              "text": " structure:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "import SwiftUI",
            "import RealityKit",
            "",
            "struct GlassView: View {",
            "    /// The default roughness value of the material.",
            "    @State var roughness: Float = 0.2",
            "",
            "    /// The default eta parameter for refraction.",
            "    @State var eta: Float = 0.5",
            "",
            "    /// The entity to store the dragon model.",
            "    @State var entity: Entity?",
            "",
            "    // ...",
            "}"
          ],
          "syntax": "swift",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Within the main body of ",
              "type": "text"
            },
            {
              "code": "GlassView",
              "type": "codeVoice"
            },
            {
              "text": ", the app creates a reality view within an ",
              "type": "text"
            },
            {
              "code": "HStack",
              "type": "codeVoice"
            },
            {
              "text": ". The app loads the model by its filename and adjusts its scale and position, then adds the model to the RealityKit content:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "var body: some View {",
            "    HStack {",
            "        RealityView { content in",
            "            do {",
            "                // Load the model from the filename.",
            "                let fileName = \"DragonGlass.usda\"",
            "                let entity = try await Entity(named: fileName)",
            "                ",
            "                // Adjust the scale and position of the model.",
            "                let scale: Float = 2",
            "                let position: SIMD3<Float> = [0.1, -0.15, 0.0]",
            "                entity.scale *= scale",
            "                entity.position += position",
            "",
            "                // Add the entity to the `RealityView`.",
            "                content.add(entity)",
            "",
            "                // Set `entity` to the dragon model.",
            "                self.entity = entity",
            "            } catch {",
            "                print(\"Error loading model: \\(error)\")",
            "            }",
            "        } update: { _ in",
            "",
            "            // ...",
            "",
            "        }",
            "    }",
            "}"
          ],
          "syntax": "swift",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "The view enables real-time material updates using the optional ",
              "type": "text"
            },
            {
              "code": "update()",
              "type": "codeVoice"
            },
            {
              "text": " closure of the reality view. The app calls ",
              "type": "text"
            },
            {
              "code": "updateMaterials(_:)",
              "type": "codeVoice"
            },
            {
              "text": " on the entity to modify the shader graph material parameters:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "var body: some View {",
            "    HStack {      ",
            "        RealityView { content in",
            "",
            "            // ...",
            "",
            "        } update: { _ in",
            "            entity?.updateMaterials({ material in",
            "                // Obtain the current material of the dragon model.",
            "                guard var mat = material as? ShaderGraphMaterial else { return }",
            "",
            "                do {",
            "                    try mat.setParameter(name: \"roughness\", value: .float(roughness))",
            "                    try mat.setParameter(name: \"eta\", value: .float(eta))",
            "                } catch {",
            "                    print(\"Error setting parameters: \\(error)\")",
            "                }",
            "",
            "                // Update the dragon model's material.",
            "                material = mat",
            "            })",
            "        }",
            "    ",
            "        // ...",
            "    }",
            "}"
          ],
          "syntax": "swift",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Within the closure that the app passes into the method, the app tries to set the ",
              "type": "text"
            },
            {
              "code": "roughness",
              "type": "codeVoice"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "code": "eta",
              "type": "codeVoice"
            },
            {
              "text": " parameter into the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/RealityKit/ShaderGraphMaterial",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " to update the dragon model.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The view incorporates a ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/SwiftUI/Divider",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " structure to separate the reality view, which houses the dragon model, from the ",
              "type": "text"
            },
            {
              "code": "VStack",
              "type": "codeVoice"
            },
            {
              "text": ", which houses sliders that enable interactive adjustment of the ",
              "type": "text"
            },
            {
              "code": "roughness",
              "type": "codeVoice"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "code": "eta",
              "type": "codeVoice"
            },
            {
              "text": " values, to modify the model’s visual appearance:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "var body: some View {",
            "    HStack {",
            "        // ...",
            "",
            "        Divider()",
            "",
            "        // Set up a slider in the window to update the `roughness`",
            "        // and `eta` parameter to a value between 0 and 1.",
            "        VStack {",
            "            HStack {",
            "                Text(\"Roughness\"); Spacer(); Text(\"\\(roughness)\")",
            "            }",
            "            Slider(value: $roughness, in: 0...1)",
            "",
            "            Divider()",
            "",
            "            HStack {",
            "                Text(\"ETA:\"); Spacer(); Text(\"\\(eta)\")",
            "            }",
            "            Slider(value: $eta, in: 0...1)",
            "        }.frame(maxWidth: 200)",
            "    }.padding()",
            "}"
          ],
          "syntax": "swift",
          "type": "codeListing"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "93452ff38109/CreatingGlassMaterialFor3DShapesInVisionOS.zip": {
      "checksum": "93452ff3810912ffeac84b939dad6e99f1221c2f02b088838c0a55ae721f87f33d690d00493b7c8c4ea8e9b3f59a76ad3811e4f87592c857643570449c0f9a00",
      "identifier": "93452ff38109/CreatingGlassMaterialFor3DShapesInVisionOS.zip",
      "type": "download",
      "url": "https://docs-assets.developer.apple.com/published/93452ff38109/CreatingGlassMaterialFor3DShapesInVisionOS.zip"
    },
    "doc://com.apple.documentation/documentation/RealityKit/ShaderGraphMaterial": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "keyword",
          "text": "struct"
        },
        {
          "kind": "text",
          "text": " "
        },
        {
          "kind": "identifier",
          "text": "ShaderGraphMaterial"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/RealityKit/ShaderGraphMaterial",
      "kind": "symbol",
      "role": "symbol",
      "title": "ShaderGraphMaterial",
      "type": "topic",
      "url": "/documentation/RealityKit/ShaderGraphMaterial"
    },
    "doc://com.apple.documentation/documentation/ShaderGraph/Geometric/Refract-(RealityKit)": {
      "abstract": [
        {
          "text": "Refracts a vector using a given normal and index of refraction (eta).",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/ShaderGraph/Geometric/Refract-(RealityKit)",
      "images": [
        {
          "identifier": "purple.arrow.turn.up.right.png",
          "type": "icon"
        }
      ],
      "kind": "symbol",
      "role": "symbol",
      "title": "Refract (RealityKit)",
      "type": "topic",
      "url": "/documentation/ShaderGraph/Geometric/Refract-(RealityKit)"
    },
    "doc://com.apple.documentation/documentation/SwiftUI/Divider": {
      "abstract": [
        {
          "text": "A visual element that can be used to separate other content.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "keyword",
          "text": "struct"
        },
        {
          "kind": "text",
          "text": " "
        },
        {
          "kind": "identifier",
          "text": "Divider"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/SwiftUI/Divider",
      "kind": "symbol",
      "role": "symbol",
      "title": "Divider",
      "type": "topic",
      "url": "/documentation/SwiftUI/Divider"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "doc://com.apple.visionOS/documentation/visionOS": {
      "abstract": [
        {
          "text": "Create a new universe of apps and games for Apple Vision Pro.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.visionOS/documentation/visionOS",
      "images": [
        {
          "identifier": "headset-orange.svg",
          "type": "icon"
        },
        {
          "identifier": "visionOS-PageImage-card.png",
          "type": "card"
        }
      ],
      "kind": "article",
      "role": "collection",
      "title": "visionOS",
      "type": "topic",
      "url": "/documentation/visionos"
    },
    "doc://com.apple.visionOS/documentation/visionOS/displaying-a-stereoscopic-image-in-visionos": {
      "abstract": [
        {
          "text": "Build a stereoscopic image by applying textures to the left and right eye in a shader graph material.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.visionOS/documentation/visionOS/displaying-a-stereoscopic-image-in-visionos",
      "kind": "article",
      "role": "sampleCode",
      "title": "Displaying a stereoscopic image",
      "type": "topic",
      "url": "/documentation/visionos/displaying-a-stereoscopic-image-in-visionos"
    },
    "doc://com.apple.visionOS/documentation/visionOS/generating-procedural-textures-in-visionos": {
      "abstract": [
        {
          "text": "Display a 3D model that generates procedural textures in a reality view.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.visionOS/documentation/visionOS/generating-procedural-textures-in-visionos",
      "images": [
        {
          "identifier": "sample-drawable-1-main-view-card.png",
          "type": "card"
        }
      ],
      "kind": "article",
      "role": "sampleCode",
      "title": "Generating procedural textures",
      "type": "topic",
      "url": "/documentation/visionos/generating-procedural-textures-in-visionos"
    },
    "doc://com.apple.visionOS/documentation/visionOS/introductory-visionOS-samples": {
      "abstract": [
        {
          "text": "Learn the fundamentals of building apps for visionOS with beginner-friendly sample code projects.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.visionOS/documentation/visionOS/introductory-visionOS-samples",
      "images": [
        {
          "identifier": "introductory-visionOS-samples.png",
          "type": "card"
        }
      ],
      "kind": "article",
      "role": "collectionGroup",
      "title": "Introductory visionOS samples",
      "type": "topic",
      "url": "/documentation/visionos/introductory-visionos-samples"
    },
    "headset-orange.svg": {
      "alt": "An icon representing visionOS.",
      "identifier": "headset-orange.svg",
      "type": "image",
      "variants": [
        {
          "svgID": "a",
          "traits": [
            "1x",
            "light"
          ],
          "url": "https://docs-assets.developer.apple.com/published/77dc6a0821bfb2da8db4a3b2033e6f6b/headset-orange.svg"
        }
      ]
    },
    "introductory-visionOS-samples.png": {
      "alt": "A translucent window displaying five white, three-dimensional entities in a horizontal row. From left to right, the shapes are a box, a rounded box, a right sphere, a cone, and a cylinder that all top-align.",
      "identifier": "introductory-visionOS-samples.png",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x",
            "light"
          ],
          "url": "https://docs-assets.developer.apple.com/published/3d386622a70e5f41179e6a4c98a125c7/introductory-visionOS-samples@2x.png"
        },
        {
          "traits": [
            "2x",
            "dark"
          ],
          "url": "https://docs-assets.developer.apple.com/published/58fa94f103305452c567401d648dedc5/introductory-visionOS-samples~dark@2x.png"
        }
      ]
    },
    "purple.arrow.turn.up.right.png": {
      "alt": "nil",
      "identifier": "purple.arrow.turn.up.right.png",
      "type": "image",
      "variants": [
        {
          "traits": [
            "1x",
            "light"
          ],
          "url": "https://docs-assets.developer.apple.com/published/3325c9f6538c351acf9af7bbee0428d7/purple.arrow.turn.up.right.png"
        }
      ]
    },
    "sample-drawable-1-main-view-card.png": {
      "alt": "",
      "identifier": "sample-drawable-1-main-view-card.png",
      "type": "image",
      "variants": [
        {
          "traits": [
            "1x",
            "light"
          ],
          "url": "https://docs-assets.developer.apple.com/published/2b35928ee97847f8abb8441a454a5696/sample-drawable-1-main-view-card.png"
        }
      ]
    },
    "sample-glass-1-main-view.png": {
      "alt": "A screenshot of a visionOS app in Simulator with a translucent window displaying a 3D shape with a glass material, and two sliders on the side to adjust modifiables of the 3D shape.",
      "identifier": "sample-glass-1-main-view.png",
      "type": "image",
      "variants": [
        {
          "traits": [
            "1x",
            "light"
          ],
          "url": "https://docs-assets.developer.apple.com/published/8508947cc3447375679e31bdaecdba30/sample-glass-1-main-view.png"
        }
      ]
    },
    "sample-glass-2-shader-graph": {
      "alt": "A screenshot of a model's shader graph in Reality Composer Pro, showcasing how the model accepts two modifiables, roughness and eta.",
      "identifier": "sample-glass-2-shader-graph",
      "type": "image",
      "variants": [
        {
          "traits": [
            "1x",
            "light"
          ],
          "url": "https://docs-assets.developer.apple.com/published/e8aa559c0574d7ed8e18c1dd694b6fb9/sample-glass-2-shader-graph.png"
        }
      ]
    },
    "visionOS-PageImage-card.png": {
      "alt": "A stylized illustration of an Apple Vision Pro with the word 'hello' written across the front in cursive.",
      "identifier": "visionOS-PageImage-card.png",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x",
            "light"
          ],
          "url": "https://docs-assets.developer.apple.com/published/90294957b44e5508a55fe39373eea478/visionOS-PageImage-card@2x.png"
        },
        {
          "traits": [
            "2x",
            "dark"
          ],
          "url": "https://docs-assets.developer.apple.com/published/90fe463571fd45badfabacbb07f30591/visionOS-PageImage-card~dark@2x.png"
        }
      ]
    }
  },
  "sampleCodeDownload": {
    "action": {
      "identifier": "93452ff38109/CreatingGlassMaterialFor3DShapesInVisionOS.zip",
      "isActive": true,
      "overridingTitle": "Download",
      "type": "reference"
    },
    "kind": "sampleDownload"
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Building-materials",
      "generated": true,
      "identifiers": [
        "doc://com.apple.visionOS/documentation/visionOS/generating-procedural-textures-in-visionos",
        "doc://com.apple.visionOS/documentation/visionOS/displaying-a-stereoscopic-image-in-visionos"
      ],
      "title": "Building materials"
    }
  ]
}

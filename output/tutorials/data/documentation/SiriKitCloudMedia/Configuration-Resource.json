{
  "abstract": [
    {
      "text": "Provide configuration details for your media server’s endpoints to a HomePod speaker or an Apple TV.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "data",
    "url": "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/Configuration-Resource"
  },
  "kind": "symbol",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "rest:sirikit_media_api:get:configuration",
    "modules": [
      {
        "name": "SiriKit Cloud Media"
      }
    ],
    "navigatorTitle": [
      {
        "kind": "identifier",
        "text": "Configuration Resource"
      }
    ],
    "platforms": [
      {
        "beta": false,
        "introducedAt": "1.0.2",
        "name": "SiriKit Cloud Media"
      }
    ],
    "role": "symbol",
    "roleHeading": "Web Service Endpoint",
    "symbolKind": "httpRequest",
    "title": "Configure Your Service Endpoints"
  },
  "primaryContentSections": [
    {
      "kind": "restEndpoint",
      "title": "URL",
      "tokens": [
        {
          "kind": "method",
          "text": "GET"
        },
        {
          "kind": "text",
          "text": " "
        },
        {
          "kind": "baseURL",
          "text": "https://cloudextension-testservice.local/api/"
        },
        {
          "kind": "path",
          "text": "configuration"
        }
      ]
    },
    {
      "items": [
        {
          "attributes": [],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The client’s current user interface language. Your service responds to requests with localized content for this language, if available.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Accept-Language",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ]
        },
        {
          "attributes": [],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Directives for your service’s caching behavior.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Cache-Control",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ]
        },
        {
          "attributes": [
            {
              "kind": "maximumLength",
              "value": "1002"
            }
          ],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The identifier of the client’s current configuration information.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "If-None-Match",
          "required": false,
          "type": [
            {
              "identifier": "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/ExtensionConfigTag",
              "kind": "typeIdentifier",
              "preciseIdentifier": "data:sirikit_media_api:ExtensionConfigTag",
              "text": "ExtensionConfigTag"
            }
          ]
        },
        {
          "attributes": [
            {
              "kind": "minimum",
              "value": "1"
            }
          ],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "An approximate deadline, in seconds, for processing this real-time user request.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Request-Timeout",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "uint32"
            }
          ]
        },
        {
          "attributes": [
            {
              "kind": "maximumLength",
              "value": "250"
            },
            {
              "kind": "allowedValues",
              "values": [
                "/AppleCloudExtension/([0-9]+\\.[0-9]+\\.[0-9]+) *.*/"
              ]
            }
          ],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The extension protocol running on the client. This is an ",
                  "type": "text"
                },
                {
                  "identifier": "https://tools.ietf.org/html/rfc7231",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": "-compliant string that contains the product name ",
                  "type": "text"
                },
                {
                  "inlineContent": [
                    {
                      "text": "AppleCloudExtension",
                      "type": "text"
                    }
                  ],
                  "type": "emphasis"
                },
                {
                  "text": " and the SiriKit Extension library version running on the client.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "User-Agent",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ]
        },
        {
          "attributes": [
            {
              "kind": "minimum",
              "value": "1"
            }
          ],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The number of previous requests from the client. The client omits this header on the first attempt.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "x-applecloudextension-retry-count",
          "required": false,
          "type": [
            {
              "kind": "text",
              "text": "uint32"
            }
          ]
        },
        {
          "attributes": [
            {
              "kind": "minimumLength",
              "value": "1"
            },
            {
              "kind": "maximumLength",
              "value": "128"
            }
          ],
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A constant session identifier to include in each request and response. Your service responds to each request with the session ID provided by the client.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "x-applecloudextension-session-id",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ]
        }
      ],
      "kind": "restParameters",
      "source": "header",
      "title": "Header Parameters"
    },
    {
      "items": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The request is successful.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimeType": "application/jose",
          "reason": "OK",
          "status": 200,
          "type": [
            {
              "identifier": "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/ExtensionConfig",
              "kind": "typeIdentifier",
              "preciseIdentifier": "data:sirikit_media_api:ExtensionConfig",
              "text": "ExtensionConfig"
            }
          ]
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The request’s ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/ExtensionConfigTag",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " indicates the client already has the current configuration.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "reason": "Not Modified",
          "status": 304,
          "type": []
        }
      ],
      "kind": "restResponses",
      "title": "Response Codes"
    },
    {
      "content": [
        {
          "anchor": "Discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "You must cryptographically sign your configuration endpoint response in JSON Web Signature (JWS) format when communicating with the SiriKit Cloud Media API via ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/MediaSetup",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ". JWS is part of the JSON Object Signing and Encryption (JOSE) open standard (",
              "type": "text"
            },
            {
              "identifier": "https://tools.ietf.org/html/rfc7515",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ") that defines a way to cryptographically sign transmitted data.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "To generate a signed JWS:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Create the JWS header.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Create the JWS payload.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Sign the JWS.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "To create a JWS to communicate with the SiriKit Cloud Media API, use the following fields and values in the header:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "header": "row",
          "rows": [
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "Header",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Description",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "alg",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "The algorithm used to sign the JWS. For SiriKit Cloud Media, use ",
                      "type": "text"
                    },
                    {
                      "code": "ES256",
                      "type": "codeVoice"
                    },
                    {
                      "text": ".",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "kid",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Your app bundle identifier registered for the service.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "typ",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "The type used by the complete JWS. For SiriKit Cloud Media, use ",
                      "type": "text"
                    },
                    {
                      "code": "JOSE",
                      "type": "codeVoice"
                    },
                    {
                      "text": ".",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "cty",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "The content type used by the payload of the JWS. For SiriKit Cloud Media, use ",
                      "type": "text"
                    },
                    {
                      "code": "JSON",
                      "type": "codeVoice"
                    },
                    {
                      "text": ".",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ]
          ],
          "type": "table"
        },
        {
          "inlineContent": [
            {
              "text": "The JWS payload contains JSON-encoded information specific to the SiriKit Cloud Media API and your app, such as intent type, media queues, base URLs for endpoints, and supported API version. The format is defined in the SiriKit Cloud Media ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/sample-code/siri/sirikit-cloud-media-open-api.zip",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ". Here are the major keys in the configuration data:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "header": "row",
          "rows": [
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "Key",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Description",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "intent",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "(Required)",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " This is a mapping of (abbreviated) Intent names to the SiriKit Cloud Media endpoints and configuration options supported by web endpoint handlers.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "media",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "(Required)",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " This is a mapping of queue API endpoints for the particular configuration valid for the service (or user).",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "url",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "The base URL for endpoints. This value can be a fully qualified URL, or a relative URL,  used to retrieve this configuration resource.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "version",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "(Required)",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " The supported version of the SiriKit Cloud Media API.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ]
          ],
          "type": "table"
        },
        {
          "inlineContent": [
            {
              "text": "After creating the JWS, sign it using the Elliptic Curve Digital Signature Algorithm (ECDSA) with the P-256 curve and the SHA-256 hash algorithm. The SiriKit Cloud Media API identifies the intents and media endpoints your service supports by parsing the configuration response. In the decoded JWS below, the service is configured to support the add media, play media, and update media affinity intents, and provides URLs to each as well as the media queue endpoints used to handle intent responses:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"alg\": \"ES256\",",
            "  \"kid\": \"com.myCompany.appName\",",
            "  \"typ\": \"JOSE\",",
            "  \"cty\": \"JSON\"",
            "}",
            "{",
            "  \"intent\": {",
            "    \"addMedia\": {",
            "      \"opt\": [",
            "        \"confirm\",",
            "        \"resolveMediaDestination\"",
            "      ],",
            "      \"url\": \"intent/addMedia\"",
            "    },",
            "    \"playMedia\": {",
            "      \"opt\": [",
            "        \"resolvePlayShuffled\",",
            "        \"resolvePlaybackRepeatMode\",",
            "        \"resolvePlaybackQueueLocation\",",
            "        \"resolveResumePlayback\"",
            "      ],",
            "      \"url\": \"intent/playMedia\"",
            "    },",
            "    \"updateMediaAffinity\": {",
            "      \"url\": \"intent/updateMediaAffinity\"",
            "    }",
            "  },",
            "  \"media\": {",
            "    \"queues\": {",
            "      \"playMedia\": {",
            "        \"url\": \"queues/playMedia\"",
            "      },",
            "      \"updateActivity\": {",
            "        \"url\": \"queues/updateActivity\"",
            "      }",
            "    }",
            "  },",
            "  \"version\": \"1.0.2\"",
            "}"
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Regardless of the programming language you’re using with the SiriKit Cloud Media API, there are a variety of open source libraries available online for creating and signing JWS data. Please verify and validate your response before sending it to the SiriKit Cloud Media API.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/MediaSetup": {
      "abstract": [
        {
          "text": "Enable users to configure HomePod speakers to stream music directly from your media service.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/MediaSetup",
      "kind": "symbol",
      "role": "collection",
      "title": "Media Setup",
      "type": "topic",
      "url": "/documentation/MediaSetup"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia": {
      "abstract": [
        {
          "text": "Stream music directly to HomePod speakers from your media service.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia",
      "kind": "symbol",
      "role": "collection",
      "title": "SiriKit Cloud Media",
      "type": "topic",
      "url": "/documentation/sirikitcloudmedia"
    },
    "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/Configuration-Resource": {
      "abstract": [
        {
          "text": "Provide configuration details for your media server’s endpoints to a HomePod speaker or an Apple TV.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/Configuration-Resource",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Configuration Resource"
        }
      ],
      "role": "symbol",
      "title": "Configure Your Service Endpoints",
      "type": "topic",
      "url": "/documentation/sirikitcloudmedia/configuration-resource"
    },
    "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/ExtensionConfig": {
      "abstract": [
        {
          "text": "Instructions for accessing your media service’s endpoints.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "object "
        },
        {
          "kind": "identifier",
          "text": "ExtensionConfig"
        }
      ],
      "identifier": "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/ExtensionConfig",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "ExtensionConfig"
        }
      ],
      "role": "symbol",
      "title": "ExtensionConfig",
      "type": "topic",
      "url": "/documentation/sirikitcloudmedia/extensionconfig"
    },
    "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/ExtensionConfigTag": {
      "abstract": [
        {
          "text": "A unique identifier for a specific media service configuration.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "type "
        },
        {
          "kind": "identifier",
          "text": "ExtensionConfigTag"
        }
      ],
      "identifier": "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/ExtensionConfigTag",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "ExtensionConfigTag"
        }
      ],
      "role": "symbol",
      "title": "ExtensionConfigTag",
      "type": "topic",
      "url": "/documentation/sirikitcloudmedia/extensionconfigtag"
    },
    "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/PlayMediaControlActivity": {
      "abstract": [
        {
          "text": "Options for reporting playback progress.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "object "
        },
        {
          "kind": "identifier",
          "text": "PlayMediaControlActivity"
        }
      ],
      "identifier": "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/PlayMediaControlActivity",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "PlayMediaControlActivity"
        }
      ],
      "role": "symbol",
      "title": "PlayMediaControlActivity",
      "type": "topic",
      "url": "/documentation/sirikitcloudmedia/playmediacontrolactivity"
    },
    "https://developer.apple.com/sample-code/siri/sirikit-cloud-media-open-api.zip": {
      "identifier": "https://developer.apple.com/sample-code/siri/sirikit-cloud-media-open-api.zip",
      "title": "OpenAPI Specification",
      "titleInlineContent": [
        {
          "text": "OpenAPI Specification",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/sample-code/siri/sirikit-cloud-media-open-api.zip"
    },
    "https://tools.ietf.org/html/rfc7231": {
      "identifier": "https://tools.ietf.org/html/rfc7231",
      "title": "RFC 7231",
      "titleInlineContent": [
        {
          "text": "RFC 7231",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://tools.ietf.org/html/rfc7231"
    },
    "https://tools.ietf.org/html/rfc7515": {
      "identifier": "https://tools.ietf.org/html/rfc7515",
      "title": "RFC 7515",
      "titleInlineContent": [
        {
          "text": "RFC 7515",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://tools.ietf.org/html/rfc7515"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Device-Configuration",
      "generated": true,
      "identifiers": [
        "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/ExtensionConfigTag",
        "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/ExtensionConfig",
        "doc://com.apple.sirikitcloudmedia/documentation/SiriKitCloudMedia/PlayMediaControlActivity"
      ],
      "title": "Device Configuration"
    }
  ],
  "variants": [
    {
      "paths": [
        "/documentation/sirikitcloudmedia/configuration-resource"
      ],
      "traits": [
        {
          "interfaceLanguage": "data"
        }
      ]
    }
  ]
}

{
  "abstract": [
    {
      "text": "Creates a generic interrupt controller (GIC) v3 device for a VM configuration.",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/hypervisor",
        "doc://com.apple.documentation/documentation/hypervisor/apple_silicon",
        "doc://com.apple.documentation/documentation/hypervisor/apple_silicon/gic_functions"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.documentation/documentation/hypervisor/4357831-hv_gic_create"
  },
  "kind": "symbol",
  "legacy_identifier": 4357831,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:@F@hv_gic_create",
    "fragments": [
      {
        "kind": "text",
        "text": "func "
      },
      {
        "kind": "identifier",
        "text": "hv_gic_create"
      },
      {
        "kind": "text",
        "text": "(hv_gic_config_t) -> hv_return_t"
      }
    ],
    "modules": [
      {
        "name": "Hypervisor"
      }
    ],
    "platforms": [
      {
        "current": "15.4",
        "introducedAt": "15.0",
        "name": "macOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Function",
    "symbolKind": "func",
    "title": "hv_gic_create(_:)"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "swift"
          ],
          "platforms": [
            "macOS"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "func"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "hv_gic_create"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "externalParam",
              "text": "_"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "gic_config"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/hypervisor/hv_gic_config_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@hv_gic_config_t",
              "text": "hv_gic_config_t"
            },
            {
              "kind": "text",
              "text": ") -> "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/hypervisor/hv_return_t",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:@T@hv_return_t",
              "text": "hv_return_t"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "swift"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A GIC configuration object.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "gic_config"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "identifier": "doc://com.apple.documentation/documentation/hypervisor/hv_success",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " on success, an error code otherwise.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Only call this method after a virtual machine (VM) has started, but before you create vCPUs so that the framework can allocate GIC CPU system resources. If either of these conditions aren’t met, the framework returns an error.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "style": "important",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "text": "Use this method to create an ",
              "type": "text"
            },
            {
              "identifier": "link-4461942",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " device. The framework supports a maximum of one instance of this device per VM. The device supports a distributor, redistributors, MSIs, and GIC CPU system registers. ",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "When EL2 is enabled, the device supports GIC hypervisor control registers which the guest hypervisor uses to inject interrupts to its guest. The framework doesn’t support the Hypervisor’s vCPU get or set interrupt functions for injecting interrupts to a nested guest.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": " GIC v3 uses affinity based interrupt routing. vCPUs must set affinity values in their ",
              "type": "text"
            },
            {
              "code": "MPIDR_EL1",
              "type": "codeVoice"
            },
            {
              "text": " register. When the virtual machine vCPUs are running, the framework considers its topology final. Destroy vCPUs only when you’re tearing down the virtual machine.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Hypervisor only provides GIC MSI support when you’ve both configured an MSI region base address and set an MSI interrupt range.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/hypervisor": {
      "identifier": "doc://com.apple.documentation/documentation/hypervisor",
      "kind": "symbol",
      "role": "collection",
      "title": "Hypervisor",
      "type": "topic",
      "url": "/documentation/hypervisor"
    },
    "doc://com.apple.documentation/documentation/hypervisor/4357831-hv_gic_create": {
      "abstract": [
        {
          "text": "Creates a generic interrupt controller (GIC) v3 device for a VM configuration.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "hv_gic_create"
        },
        {
          "kind": "text",
          "text": "(hv_gic_config_t) -> hv_return_t"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/hypervisor/4357831-hv_gic_create",
      "kind": "symbol",
      "role": "symbol",
      "title": "hv_gic_create(_:)",
      "type": "topic",
      "url": "/documentation/hypervisor/4357831-hv_gic_create"
    },
    "doc://com.apple.documentation/documentation/hypervisor/apple_silicon": {
      "identifier": "doc://com.apple.documentation/documentation/hypervisor/apple_silicon",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Apple Silicon",
      "type": "topic",
      "url": "/documentation/hypervisor/apple_silicon"
    },
    "doc://com.apple.documentation/documentation/hypervisor/apple_silicon/gic_functions": {
      "identifier": "doc://com.apple.documentation/documentation/hypervisor/apple_silicon/gic_functions",
      "kind": "article",
      "role": "collectionGroup",
      "title": "GIC functions",
      "type": "topic",
      "url": "/documentation/hypervisor/apple_silicon/gic_functions"
    },
    "doc://com.apple.documentation/documentation/hypervisor/hv_gic_config_t": {
      "identifier": "doc://com.apple.documentation/documentation/hypervisor/hv_gic_config_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "hv_gic_config_t",
      "type": "topic",
      "url": "/documentation/hypervisor/hv_gic_config_t"
    },
    "doc://com.apple.documentation/documentation/hypervisor/hv_return_t": {
      "identifier": "doc://com.apple.documentation/documentation/hypervisor/hv_return_t",
      "kind": "symbol",
      "role": "symbol",
      "title": "hv_return_t",
      "type": "topic",
      "url": "/documentation/hypervisor/hv_return_t"
    },
    "doc://com.apple.documentation/documentation/hypervisor/hv_success": {
      "identifier": "doc://com.apple.documentation/documentation/hypervisor/hv_success",
      "kind": "symbol",
      "role": "symbol",
      "title": "HV_SUCCESS",
      "type": "topic",
      "url": "/documentation/hypervisor/hv_success"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "link-4461942": {
      "identifier": "link-4461942",
      "kind": "article",
      "role": "link",
      "title": "ARM Generic Interrupt Controller (GIC) v3",
      "type": "topic",
      "url": "https://developer.arm.com/documentation/ihi0069/latest/"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "paths": [
        "documentation/hypervisor/4357831-hv_gic_create"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    },
    {
      "paths": [
        "documentation/hypervisor/4357831-hv_gic_create"
      ],
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ]
    }
  ]
}

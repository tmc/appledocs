{
  "abstract": [
    {
      "text": "Creates a task that performs an HTTP request for the specified URL request object, uploads the provided data, and calls a handler upon completion. ",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/foundation",
        "doc://com.apple.documentation/documentation/foundation/url_loading_system",
        "doc://com.apple.documentation/documentation/foundation/nsurlsession"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "occ",
    "url": "doc://com.apple.documentation/documentation/foundation/nsurlsession/1411518-uploadtaskwithrequest"
  },
  "kind": "symbol",
  "legacy_identifier": 1411518,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:objc(cs)NSURLSession(im)uploadTaskWithRequest:fromData:completionHandler:",
    "modules": [
      {
        "name": "Foundation"
      }
    ],
    "parent": {
      "title": "NSURLSession"
    },
    "platforms": [
      {
        "current": "18.4",
        "introducedAt": "7.0",
        "name": "iOS"
      },
      {
        "current": "18.4",
        "introducedAt": "7.0",
        "name": "iPadOS"
      },
      {
        "current": "18.4",
        "introducedAt": "13.1",
        "name": "Mac Catalyst"
      },
      {
        "current": "15.4",
        "introducedAt": "10.9",
        "name": "macOS"
      },
      {
        "current": "18.4",
        "introducedAt": "9.0",
        "name": "tvOS"
      },
      {
        "current": "2.4",
        "introducedAt": "1.0",
        "name": "visionOS"
      },
      {
        "current": "11.4",
        "introducedAt": "2.0",
        "name": "watchOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Instance Method",
    "symbolKind": "instm",
    "title": "uploadTaskWithRequest:fromData:completionHandler:"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "occ"
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "Mac Catalyst",
            "macOS",
            "tvOS",
            "visionOS",
            "watchOS"
          ],
          "tokens": [
            {
              "kind": "text",
              "text": "- ("
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsessionuploadtask",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSURLSessionUploadTask",
              "text": "NSURLSessionUploadTask"
            },
            {
              "kind": "text",
              "text": " *"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "identifier",
              "text": "uploadTaskWithRequest:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlrequest",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSURLRequest",
              "text": "NSURLRequest"
            },
            {
              "kind": "text",
              "text": " *"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "request"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "fromData:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsdata",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSData",
              "text": "NSData"
            },
            {
              "kind": "text",
              "text": " *"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "bodyData"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "completionHandler:"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "keyword",
              "text": "void"
            },
            {
              "kind": "text",
              "text": " (^)("
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsdata",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSData",
              "text": "NSData"
            },
            {
              "kind": "text",
              "text": " *data, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlresponse",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSURLResponse",
              "text": "NSURLResponse"
            },
            {
              "kind": "text",
              "text": " *response, "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nserror",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSError",
              "text": "NSError"
            },
            {
              "kind": "text",
              "text": " *error)"
            },
            {
              "kind": "text",
              "text": ")"
            },
            {
              "kind": "internalParam",
              "text": "completionHandler"
            },
            {
              "kind": "text",
              "text": ";"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "occ"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A URL request object that provides the URL, cache policy, request type, and so on. The body stream and body data in this request object are ignored.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "request"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The body data for the request.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "bodyData"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The completion handler to call when the load request is complete. This handler is executed on the delegate queue.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "If you pass ",
                  "type": "text"
                },
                {
                  "code": "nil",
                  "type": "codeVoice"
                },
                {
                  "text": ", only the session delegate methods are called when the task completes, making this method equivalent to the ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsession/1409763-uploadtaskwithrequest",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " method.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "This completion handler takes the following parameters:",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "items": [
                {
                  "definition": {
                    "content": [
                      {
                        "inlineContent": [
                          {
                            "text": "The data returned by the server.",
                            "type": "text"
                          }
                        ],
                        "type": "paragraph"
                      }
                    ]
                  },
                  "term": {
                    "inlineContent": [
                      {
                        "code": "data",
                        "type": "codeVoice"
                      }
                    ]
                  }
                },
                {
                  "definition": {
                    "content": [
                      {
                        "inlineContent": [
                          {
                            "text": "An object that provides response metadata, such as HTTP headers and status code. If you are making an HTTP or HTTPS request, the returned object is actually an ",
                            "type": "text"
                          },
                          {
                            "identifier": "doc://com.apple.documentation/documentation/foundation/nshttpurlresponse",
                            "isActive": true,
                            "type": "reference"
                          },
                          {
                            "text": " object.",
                            "type": "text"
                          }
                        ],
                        "type": "paragraph"
                      }
                    ]
                  },
                  "term": {
                    "inlineContent": [
                      {
                        "code": "response",
                        "type": "codeVoice"
                      }
                    ]
                  }
                },
                {
                  "definition": {
                    "content": [
                      {
                        "inlineContent": [
                          {
                            "text": "An error object that indicates why the request failed, or ",
                            "type": "text"
                          },
                          {
                            "code": "nil",
                            "type": "codeVoice"
                          },
                          {
                            "text": " if the request was successful.",
                            "type": "text"
                          }
                        ],
                        "type": "paragraph"
                      }
                    ]
                  },
                  "term": {
                    "inlineContent": [
                      {
                        "code": "error",
                        "type": "codeVoice"
                      }
                    ]
                  }
                }
              ],
              "type": "termList"
            }
          ],
          "name": "completionHandler"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The new session upload task.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "An HTTP upload request is any request that contains a request body, such as a ",
              "type": "text"
            },
            {
              "code": "POST",
              "type": "codeVoice"
            },
            {
              "text": " or ",
              "type": "text"
            },
            {
              "code": "PUT",
              "type": "codeVoice"
            },
            {
              "text": " request. Upload tasks require you to create a request object so that you can provide metadata for the upload, like HTTP request headers.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Unlike ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsession/1409763-uploadtaskwithrequest",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ", this method returns the response body after it has been received in full, and does not require you to write a custom delegate to obtain the response body.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "By using a completion handler, the task bypasses calls to delegate methods for response and data delivery, and instead provides any resulting data, response, or error inside the completion handler. Delegate methods for handling authentication challenges, however, are still called.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Typically you pass a ",
              "type": "text"
            },
            {
              "code": "nil",
              "type": "codeVoice"
            },
            {
              "text": " completion handler only when creating tasks in sessions whose delegates include a ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsessiondatadelegate/1411528-urlsession",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " method. However, if you do not need the response data, use key-value observing to watch for changes to the taskâ€™s status to determine when it completes.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "After you create the task, you must start it by calling its ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsessiontask/1411121-resume",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " method.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "If the request completes successfully, the ",
              "type": "text"
            },
            {
              "code": "data",
              "type": "codeVoice"
            },
            {
              "text": " parameter of the completion handler block contains the resource data, and the ",
              "type": "text"
            },
            {
              "code": "error",
              "type": "codeVoice"
            },
            {
              "text": " parameter is ",
              "type": "text"
            },
            {
              "code": "nil",
              "type": "codeVoice"
            },
            {
              "text": ". If the request fails, the ",
              "type": "text"
            },
            {
              "code": "data",
              "type": "codeVoice"
            },
            {
              "text": " parameter is ",
              "type": "text"
            },
            {
              "code": "nil,",
              "type": "codeVoice"
            },
            {
              "text": " and the ",
              "type": "text"
            },
            {
              "code": "error",
              "type": "codeVoice"
            },
            {
              "text": " parameter contains information about the failure. If a response from the server is received, regardless of whether the request completes successfully or fails, the ",
              "type": "text"
            },
            {
              "code": "response",
              "type": "codeVoice"
            },
            {
              "text": " parameter contains that information.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/foundation": {
      "identifier": "doc://com.apple.documentation/documentation/foundation",
      "kind": "symbol",
      "role": "collection",
      "title": "Foundation",
      "type": "topic",
      "url": "/documentation/foundation"
    },
    "doc://com.apple.documentation/documentation/foundation/nsdata": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsdata",
      "kind": "symbol",
      "role": "symbol",
      "title": "NSData",
      "type": "topic",
      "url": "/documentation/foundation/nsdata"
    },
    "doc://com.apple.documentation/documentation/foundation/nserror": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/nserror",
      "kind": "symbol",
      "role": "symbol",
      "title": "NSError",
      "type": "topic",
      "url": "/documentation/foundation/nserror"
    },
    "doc://com.apple.documentation/documentation/foundation/nshttpurlresponse": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/nshttpurlresponse",
      "kind": "symbol",
      "role": "symbol",
      "title": "NSHTTPURLResponse",
      "type": "topic",
      "url": "/documentation/foundation/nshttpurlresponse"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlrequest": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlrequest",
      "kind": "symbol",
      "role": "symbol",
      "title": "NSURLRequest",
      "type": "topic",
      "url": "/documentation/foundation/nsurlrequest"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlresponse": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlresponse",
      "kind": "symbol",
      "role": "symbol",
      "title": "NSURLResponse",
      "type": "topic",
      "url": "/documentation/foundation/nsurlresponse"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsession": {
      "abstract": [
        {
          "text": "An object that coordinates a group of related, network data transfer tasks.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsession",
      "kind": "symbol",
      "role": "symbol",
      "title": "NSURLSession",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsession"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsession/1409763-uploadtaskwithrequest": {
      "abstract": [
        {
          "text": "Creates a task that performs an HTTP request for the specified URL request object and uploads the provided data.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "uploadTaskWithRequest:fromData:"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsession/1409763-uploadtaskwithrequest",
      "kind": "symbol",
      "role": "symbol",
      "title": "uploadTaskWithRequest:fromData:",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsession/1409763-uploadtaskwithrequest"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsession/1410934-uploadtaskwithstreamedrequest": {
      "abstract": [
        {
          "text": "Creates a task that performs an HTTP request for uploading data based on the specified URL request.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "uploadTaskWithStreamedRequest:"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsession/1410934-uploadtaskwithstreamedrequest",
      "kind": "symbol",
      "role": "symbol",
      "title": "uploadTaskWithStreamedRequest:",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsession/1410934-uploadtaskwithstreamedrequest"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsession/1411518-uploadtaskwithrequest": {
      "abstract": [
        {
          "text": "Creates a task that performs an HTTP request for the specified URL request object, uploads the provided data, and calls a handler upon completion. ",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "uploadTaskWithRequest:fromData:completionHandler:"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsession/1411518-uploadtaskwithrequest",
      "kind": "symbol",
      "role": "symbol",
      "title": "uploadTaskWithRequest:fromData:completionHandler:",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsession/1411518-uploadtaskwithrequest"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsession/1411550-uploadtaskwithrequest": {
      "abstract": [
        {
          "text": "Creates a task that performs an HTTP request for uploading the specified file.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "uploadTaskWithRequest:fromFile:"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsession/1411550-uploadtaskwithrequest",
      "kind": "symbol",
      "role": "symbol",
      "title": "uploadTaskWithRequest:fromFile:",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsession/1411550-uploadtaskwithrequest"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsession/1411638-uploadtaskwithrequest": {
      "abstract": [
        {
          "text": "Creates a task that performs an HTTP request for uploading the specified file, then calls a handler upon completion. ",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "uploadTaskWithRequest:fromFile:completionHandler:"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsession/1411638-uploadtaskwithrequest",
      "kind": "symbol",
      "role": "symbol",
      "title": "uploadTaskWithRequest:fromFile:completionHandler:",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsession/1411638-uploadtaskwithrequest"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsessiondatadelegate": {
      "abstract": [
        {
          "text": "A protocol that defines methods that URL session instances call on their delegates to handle task-level events specific to data and upload tasks. ",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsessiondatadelegate",
      "kind": "symbol",
      "role": "symbol",
      "title": "NSURLSessionDataDelegate",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsessiondatadelegate"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsessiondatadelegate/1411528-urlsession": {
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "URLSession:dataTask:didReceiveData:"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsessiondatadelegate/1411528-urlsession",
      "kind": "symbol",
      "role": "symbol",
      "title": "URLSession:dataTask:didReceiveData:",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsessiondatadelegate/1411528-urlsession"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsessiontask/1411121-resume": {
      "fragments": [
        {
          "kind": "text",
          "text": "- "
        },
        {
          "kind": "identifier",
          "text": "resume"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsessiontask/1411121-resume",
      "kind": "symbol",
      "role": "symbol",
      "title": "resume",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsessiontask/1411121-resume"
    },
    "doc://com.apple.documentation/documentation/foundation/nsurlsessionuploadtask": {
      "abstract": [
        {
          "text": "A URL session task that uploads data to the network in a request body.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsurlsessionuploadtask",
      "kind": "symbol",
      "role": "symbol",
      "title": "NSURLSessionUploadTask",
      "type": "topic",
      "url": "/documentation/foundation/nsurlsessionuploadtask"
    },
    "doc://com.apple.documentation/documentation/foundation/url_loading_system": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/url_loading_system",
      "kind": "article",
      "role": "collectionGroup",
      "title": "URL Loading System",
      "type": "topic",
      "url": "/documentation/foundation/url_loading_system"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/foundation/nsurlsession/1409763-uploadtaskwithrequest",
        "doc://com.apple.documentation/documentation/foundation/nsurlsession/1411550-uploadtaskwithrequest",
        "doc://com.apple.documentation/documentation/foundation/nsurlsession/1411638-uploadtaskwithrequest",
        "doc://com.apple.documentation/documentation/foundation/nsurlsession/1410934-uploadtaskwithstreamedrequest",
        "doc://com.apple.documentation/documentation/foundation/nsurlsessionuploadtask",
        "doc://com.apple.documentation/documentation/foundation/nsurlsessiondatadelegate"
      ],
      "title": "Adding upload tasks to a session"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/foundation/nsurlsession/1411518-uploadtaskwithrequest"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    },
    {
      "paths": [
        "documentation/foundation/urlsession/1411518-uploadtask"
      ],
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ]
    }
  ]
}

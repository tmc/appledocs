{
  "abstract": [
    {
      "text": "Returns a URL that can be emailed to users to allow them to download a copy of a flat file item from iCloud.",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/foundation",
        "doc://com.apple.documentation/documentation/foundation/file_system",
        "doc://com.apple.documentation/documentation/foundation/filemanager"
      ],
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.documentation/documentation/foundation",
        "doc://com.apple.documentation/documentation/foundation/icloud",
        "doc://com.apple.documentation/documentation/foundation/filemanager"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.documentation/documentation/foundation/filemanager/1411577-url"
  },
  "kind": "symbol",
  "legacy_identifier": 1411577,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "c:objc(cs)NSFileManager(im)URLForPublishingUbiquitousItemAtURL:expirationDate:error:",
    "fragments": [
      {
        "kind": "text",
        "text": "func "
      },
      {
        "kind": "identifier",
        "text": "url"
      },
      {
        "kind": "text",
        "text": "("
      },
      {
        "kind": "identifier",
        "text": "forPublishingUbiquitousItemAt"
      },
      {
        "kind": "text",
        "text": ": URL, "
      },
      {
        "kind": "identifier",
        "text": "expiration"
      },
      {
        "kind": "text",
        "text": ": AutoreleasingUnsafeMutablePointer<NSDate?>?) -> URL"
      }
    ],
    "modules": [
      {
        "name": "Foundation"
      }
    ],
    "parent": {
      "title": "FileManager"
    },
    "platforms": [
      {
        "current": "18.4",
        "introducedAt": "5.0",
        "name": "iOS"
      },
      {
        "current": "18.4",
        "introducedAt": "5.0",
        "name": "iPadOS"
      },
      {
        "current": "18.4",
        "introducedAt": "13.1",
        "name": "Mac Catalyst"
      },
      {
        "current": "15.4",
        "introducedAt": "10.7",
        "name": "macOS"
      },
      {
        "current": "18.4",
        "introducedAt": "9.0",
        "name": "tvOS"
      },
      {
        "current": "2.4",
        "introducedAt": "1.0",
        "name": "visionOS"
      },
      {
        "current": "11.4",
        "introducedAt": "2.0",
        "name": "watchOS"
      }
    ],
    "role": "symbol",
    "roleHeading": "Instance Method",
    "symbolKind": "instm",
    "title": "url(forPublishingUbiquitousItemAt:expiration:)"
  },
  "primaryContentSections": [
    {
      "declarations": [
        {
          "languages": [
            "swift"
          ],
          "platforms": [
            "iOS",
            "iPadOS",
            "Mac Catalyst",
            "macOS",
            "tvOS",
            "visionOS",
            "watchOS"
          ],
          "tokens": [
            {
              "kind": "keyword",
              "text": "func"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "identifier",
              "text": "url"
            },
            {
              "kind": "text",
              "text": "("
            },
            {
              "kind": "externalParam",
              "text": "forPublishingUbiquitousItemAt"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "url"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/url",
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:10Foundation3URLV",
              "text": "URL"
            },
            {
              "kind": "text",
              "text": ", "
            },
            {
              "kind": "externalParam",
              "text": "expiration"
            },
            {
              "kind": "text",
              "text": " "
            },
            {
              "kind": "internalParam",
              "text": "outDate"
            },
            {
              "kind": "text",
              "text": ": "
            },
            {
              "identifier": "doc://com.apple.Swift/documentation/Swift/AutoreleasingUnsafeMutablePointer",
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:SA",
              "text": "AutoreleasingUnsafeMutablePointer"
            },
            {
              "kind": "text",
              "text": "<"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/nsdate",
              "kind": "typeIdentifier",
              "preciseIdentifier": "c:objc(cs)NSDate",
              "text": "NSDate"
            },
            {
              "kind": "text",
              "text": "?>?"
            },
            {
              "kind": "text",
              "text": ") "
            },
            {
              "kind": "keyword",
              "text": "throws"
            },
            {
              "kind": "text",
              "text": " -> "
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/url",
              "kind": "typeIdentifier",
              "preciseIdentifier": "s:10Foundation3URLV",
              "text": "URL"
            }
          ]
        }
      ],
      "kind": "declarations"
    },
    {
      "kind": "parameters",
      "languages": [
        "swift"
      ],
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The URL of the item in the cloud that you want to share. The URL must be prefixed with the base URL returned from the ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1411653-url",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " method that corresponds to the item’s location. The file must be a flat file, not a bundle. The file at the specified URL must already be uploaded to iCloud when you call this method.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "url"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "On input, a pointer to a variable for a date object. On output, this parameter contains the date after which the item is no longer available at the returned URL. You may specify ",
                  "type": "text"
                },
                {
                  "code": "nil",
                  "type": "codeVoice"
                },
                {
                  "text": " for this parameter if you are not interested in the date.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "outDate"
        }
      ]
    },
    {
      "content": [
        {
          "anchor": "return_value",
          "level": 2,
          "text": "Return Value",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "A URL with which users can download a copy of the item at ",
              "type": "text"
            },
            {
              "code": "url",
              "type": "codeVoice"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "This method creates a snapshot of the specified flat file and places that copy in a temporary iCloud location where it can be accessed by other users using the returned URL. The snapshot reflects the contents of the file at the time the URL was generated and is not updated when subsequent changes are made to the original file in the user’s iCloud storage. The snapshot file remains available at the specified URL until the date specified in the ",
              "type": "text"
            },
            {
              "code": "outDate",
              "type": "codeVoice"
            },
            {
              "text": " parameter, after which it is automatically deleted. Explicitly deleting the item by calling the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1413590-removeitem",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " or ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1408573-removeitem",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " method also deletes all old versions of the item, invalidating URLs to those versions returned by this method.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Your app must have access to the network for this call to succeed. If the specified file is in the process of being uploaded to iCloud, you must not call this method until the upload has finished.  ",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "As of iOS 8.0 and macOS 10.10 The ",
                  "type": "text"
                },
                {
                  "code": "url",
                  "type": "codeVoice"
                },
                {
                  "text": " must specify a flat file, not a bundle. Bundles have a folder as the root item.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "style": "important",
          "type": "aside"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "In Swift, this method returns a nonoptional result and is marked with the ",
                  "type": "text"
                },
                {
                  "code": "throws",
                  "type": "codeVoice"
                },
                {
                  "text": " keyword to indicate that it throws an error in cases of failure.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            },
            {
              "inlineContent": [
                {
                  "text": "You call this method in a ",
                  "type": "text"
                },
                {
                  "code": "try",
                  "type": "codeVoice"
                },
                {
                  "text": " expression and handle any errors in the ",
                  "type": "text"
                },
                {
                  "code": "catch",
                  "type": "codeVoice"
                },
                {
                  "text": " clauses of a ",
                  "type": "text"
                },
                {
                  "code": "do",
                  "type": "codeVoice"
                },
                {
                  "text": " statement, as described in ",
                  "type": "text"
                },
                {
                  "identifier": "link-3023437",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " in ",
                  "type": "text"
                },
                {
                  "identifier": "link-3023438",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": " and ",
                  "type": "text"
                },
                {
                  "code": "About Imported Cocoa Error Parameters",
                  "type": "codeVoice"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Handling Errors in Swift:",
          "style": "note",
          "type": "aside"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.Swift/documentation/Swift/AutoreleasingUnsafeMutablePointer": {
      "identifier": "doc://com.apple.Swift/documentation/Swift/AutoreleasingUnsafeMutablePointer",
      "kind": "symbol",
      "role": "symbol",
      "title": "AutoreleasingUnsafeMutablePointer",
      "type": "topic",
      "url": "/documentation/swift/autoreleasingunsafemutablepointer"
    },
    "doc://com.apple.documentation/documentation/foundation": {
      "identifier": "doc://com.apple.documentation/documentation/foundation",
      "kind": "symbol",
      "role": "collection",
      "title": "Foundation",
      "type": "topic",
      "url": "/documentation/foundation"
    },
    "doc://com.apple.documentation/documentation/foundation/file_system": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/file_system",
      "kind": "article",
      "role": "collectionGroup",
      "title": "File System",
      "type": "topic",
      "url": "/documentation/foundation/file_system"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager": {
      "abstract": [
        {
          "text": "A convenient interface to the contents of the file system, and the primary means of interacting with it.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager",
      "kind": "symbol",
      "role": "symbol",
      "title": "FileManager",
      "type": "topic",
      "url": "/documentation/foundation/filemanager"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1408036-ubiquityidentitytoken": {
      "abstract": [
        {
          "text": "An opaque token that represents the current user’s iCloud Drive Documents identity.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "var "
        },
        {
          "kind": "identifier",
          "text": "ubiquityIdentityToken"
        },
        {
          "kind": "text",
          "text": ": (any NSCoding & NSCopying & NSObjectProtocol)?"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1408036-ubiquityidentitytoken",
      "kind": "symbol",
      "role": "symbol",
      "title": "ubiquityIdentityToken",
      "type": "topic",
      "url": "/documentation/foundation/filemanager/1408036-ubiquityidentitytoken"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1408573-removeitem": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1408573-removeitem",
      "kind": "symbol",
      "role": "symbol",
      "title": "removeItem(atPath:)",
      "type": "topic",
      "url": "/documentation/foundation/filemanager/1408573-removeitem"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1409696-evictubiquitousitem": {
      "abstract": [
        {
          "text": "Removes the local copy of the specified item that’s stored in iCloud.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "evictUbiquitousItem"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "at"
        },
        {
          "kind": "text",
          "text": ": URL)"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1409696-evictubiquitousitem",
      "kind": "symbol",
      "role": "symbol",
      "title": "evictUbiquitousItem(at:)",
      "type": "topic",
      "url": "/documentation/foundation/filemanager/1409696-evictubiquitousitem"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1410218-isubiquitousitem": {
      "abstract": [
        {
          "text": "Returns a Boolean indicating whether the item is targeted for storage in iCloud.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "isUbiquitousItem"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "at"
        },
        {
          "kind": "text",
          "text": ": URL) -> Bool"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1410218-isubiquitousitem",
      "kind": "symbol",
      "role": "symbol",
      "title": "isUbiquitousItem(at:)",
      "type": "topic",
      "url": "/documentation/foundation/filemanager/1410218-isubiquitousitem"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1410377-startdownloadingubiquitousitem": {
      "abstract": [
        {
          "text": "Starts downloading (if necessary) the specified item to the local system.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "startDownloadingUbiquitousItem"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "at"
        },
        {
          "kind": "text",
          "text": ": URL)"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1410377-startdownloadingubiquitousitem",
      "kind": "symbol",
      "role": "symbol",
      "title": "startDownloadingUbiquitousItem(at:)",
      "type": "topic",
      "url": "/documentation/foundation/filemanager/1410377-startdownloadingubiquitousitem"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1411577-url": {
      "abstract": [
        {
          "text": "Returns a URL that can be emailed to users to allow them to download a copy of a flat file item from iCloud.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "url"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "forPublishingUbiquitousItemAt"
        },
        {
          "kind": "text",
          "text": ": URL, "
        },
        {
          "kind": "identifier",
          "text": "expiration"
        },
        {
          "kind": "text",
          "text": ": AutoreleasingUnsafeMutablePointer<NSDate?>?) -> URL"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1411577-url",
      "kind": "symbol",
      "role": "symbol",
      "title": "url(forPublishingUbiquitousItemAt:expiration:)",
      "type": "topic",
      "url": "/documentation/foundation/filemanager/1411577-url"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1411653-url": {
      "abstract": [
        {
          "text": "Returns the URL for the iCloud container associated with the specified identifier and establishes access to that container.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "url"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "identifier",
          "text": "forUbiquityContainerIdentifier"
        },
        {
          "kind": "text",
          "text": ": String?) -> URL?"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1411653-url",
      "kind": "symbol",
      "role": "symbol",
      "title": "url(forUbiquityContainerIdentifier:)",
      "type": "topic",
      "url": "/documentation/foundation/filemanager/1411653-url"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1413590-removeitem": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1413590-removeitem",
      "kind": "symbol",
      "role": "symbol",
      "title": "removeItem(at:)",
      "type": "topic",
      "url": "/documentation/foundation/filemanager/1413590-removeitem"
    },
    "doc://com.apple.documentation/documentation/foundation/filemanager/1413989-setubiquitous": {
      "abstract": [
        {
          "text": "Indicates whether the item at the specified URL should be stored in iCloud.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "func "
        },
        {
          "kind": "identifier",
          "text": "setUbiquitous"
        },
        {
          "kind": "text",
          "text": "(Bool, "
        },
        {
          "kind": "identifier",
          "text": "itemAt"
        },
        {
          "kind": "text",
          "text": ": URL, "
        },
        {
          "kind": "identifier",
          "text": "destinationURL"
        },
        {
          "kind": "text",
          "text": ": URL)"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/foundation/filemanager/1413989-setubiquitous",
      "kind": "symbol",
      "role": "symbol",
      "title": "setUbiquitous(_:itemAt:destinationURL:)",
      "type": "topic",
      "url": "/documentation/foundation/filemanager/1413989-setubiquitous"
    },
    "doc://com.apple.documentation/documentation/foundation/icloud": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/icloud",
      "kind": "article",
      "role": "collectionGroup",
      "title": "iCloud",
      "type": "topic",
      "url": "/documentation/foundation/icloud"
    },
    "doc://com.apple.documentation/documentation/foundation/nsdate": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/nsdate",
      "kind": "symbol",
      "role": "symbol",
      "title": "NSDate",
      "type": "topic",
      "url": "/documentation/foundation/nsdate"
    },
    "doc://com.apple.documentation/documentation/foundation/url": {
      "identifier": "doc://com.apple.documentation/documentation/foundation/url",
      "kind": "symbol",
      "role": "symbol",
      "title": "URL",
      "type": "topic",
      "url": "/documentation/foundation/url"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "link-3023437": {
      "identifier": "link-3023437",
      "kind": "article",
      "role": "link",
      "title": "Error Handling",
      "type": "topic",
      "url": "https://docs.swift.org/swift-book/LanguageGuide/ErrorHandling.html"
    },
    "link-3023438": {
      "identifier": "link-3023438",
      "kind": "article",
      "role": "link",
      "title": "The Swift Programming Language",
      "type": "topic",
      "url": "https://docs.swift.org/swift-book/"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "generated": true,
      "identifiers": [
        "doc://com.apple.documentation/documentation/foundation/filemanager/1408036-ubiquityidentitytoken",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1411653-url",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1410218-isubiquitousitem",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1413989-setubiquitous",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1410377-startdownloadingubiquitousitem",
        "doc://com.apple.documentation/documentation/foundation/filemanager/1409696-evictubiquitousitem"
      ],
      "title": "Managing iCloud-Based Items"
    }
  ],
  "variants": [
    {
      "paths": [
        "documentation/foundation/nsfilemanager/1411577-urlforpublishingubiquitousitemat"
      ],
      "traits": [
        {
          "interfaceLanguage": "occ"
        }
      ]
    },
    {
      "paths": [
        "documentation/foundation/filemanager/1411577-url"
      ],
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ]
    }
  ]
}

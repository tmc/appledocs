{
  "abstract": [
    {
      "text": "Process an available app version from App Store Connect and store it for download from your server.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.MarketplaceKit/documentation/marketplacekit/ingesting-an-alternative-distribution-package"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "MarketplaceKit"
      }
    ],
    "role": "article",
    "roleHeading": "Article",
    "title": "Ingesting an alternative distribution package"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "Overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When an app passes Notarization, App Store Connect makes it available for storage on the back end of your web server. The app format that App Store Connect provides is an ",
              "type": "text"
            },
            {
              "inlineContent": [
                {
                  "text": "alternative distribution package",
                  "type": "text"
                }
              ],
              "type": "emphasis"
            },
            {
              "text": ", which contains everything a device needs to install the available app. App Store Connect sends newly available apps that an alternative marketplace app distributes to your web server automatically through your notifications webhook; see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.MarketplaceKit/documentation/marketplacekit/processing-alternative-marketplace-notifications",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ". For your apps that install from your website, you need to download your alternative distribution package from App Store Connect manually.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "In either case, to prepare the package for installation on devices, process, or ",
              "type": "text"
            },
            {
              "inlineContent": [
                {
                  "text": "ingest",
                  "type": "text"
                }
              ],
              "type": "emphasis"
            },
            {
              "text": ", the package to a specific format, and serve its contents from specific relative locations that the operating system expects.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "identifier": "ingesting-an-alternative-distribution-package-1",
              "type": "image"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Receive-new-package-version-notification",
          "level": 2,
          "text": "Receive new package version notification",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "If the developer of an app that your marketplace distributes enables notifications in App Store Connect, your webhook receives the ",
              "type": "text"
            },
            {
              "code": "AlternativeDistributionPackageVersionAvailable",
              "type": "codeVoice"
            },
            {
              "text": " notification when a new version of that app is available. For information about enabling notifications, see ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/help/app-store-connect/distributing-apps-in-the-european-union/manage-distribution-on-an-alternative-app-marketplace",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "When your webhoook receives ",
              "type": "text"
            },
            {
              "code": "AlternativeDistributionPackageVersionAvailable",
              "type": "codeVoice"
            },
            {
              "text": ", check the notificationâ€™s ",
              "type": "text"
            },
            {
              "code": "attributes",
              "type": "codeVoice"
            },
            {
              "text": " object for the app ID and version. For example:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"data\": {",
            "    \"type\": \"AlternativeDistributionPackageVersionAvailable\",",
            "    \"version\": 1,",
            "    \"id\": \"543c3939-2db6-4fbc-9672-fb0ec5687624\",",
            "    \"timestamp\": \"2023-11-27T10:40:37.246-08:00\",",
            "    \"attributes\": {",
            "      \"marketplaceAppId\": \"3839839\",",
            "      \"appId\": \"1111\",",
            "      \"alternativeDistributionPackageId\": \"f826eb7a-fa2b-420f-a780-356106195663\",",
            "      \"alternativeDistributionPackageVersionId\": \"6B29FC40-CA47-1067-B31D-00DD010662DA\",",
            "      \"alternativeDistributionPackageVersionNum\": \"1\",",
            "      \"eventTimestamp\": \"2023-11-27T18:40:32.143-00:00\"",
            "    }",
            "  }",
            "}"
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "In the POST body, the alternative distribution package version ID refers to the specific available alternative distribution package. To begin retrieving actual app data from App Store Connect, pass ",
              "type": "text"
            },
            {
              "code": "alternativeDistributionPackageVersionId",
              "type": "codeVoice"
            },
            {
              "text": " as the ",
              "type": "text"
            },
            {
              "code": "id",
              "type": "codeVoice"
            },
            {
              "text": " path parameter to the ",
              "type": "text"
            },
            {
              "code": "alternativeDistributionPackageVersions/{id}",
              "type": "codeVoice"
            },
            {
              "text": " endpoint, as follows:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "GET https://api.appstoreconnect.apple.com/v1/alternativeDistributionPackageVersions/6B29FC40-CA47-1067-B31D-00DD010662DA"
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "For more information about the ",
              "type": "text"
            },
            {
              "code": "alternativeDistributionPackageVersions/{id}",
              "type": "codeVoice"
            },
            {
              "text": " endpoint, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageVersions-_id_",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Example response:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"data\": [",
            "    {",
            "      \"type\": \"alternativeDistributionPackageVersions\",",
            "      \"id\": \"d1663e24-4360-4f7f-a661-8e616e3b3c3b\",",
            "      \"attributes\": {",
            "        \"url\": \"<Apple_CDN_base_URL>/alternative-distribution-package.zip?accessKey=<access_key>\",",
            "        \"urlExpirationDate\": \"2024-03-29T21:09:21-07:00\",",
            "        \"version\": \"1\",",
            "        \"state\": \"COMPLETED\"",
            "        }, ..."
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "In the response, navigate to the ",
              "type": "text"
            },
            {
              "code": "data.attributes.url",
              "type": "codeVoice"
            },
            {
              "text": ", which downloads ",
              "type": "text"
            },
            {
              "code": "alternative-distribution-package.zip",
              "type": "codeVoice"
            },
            {
              "text": ". Inside the ",
              "type": "text"
            },
            {
              "code": "zip",
              "type": "codeVoice"
            },
            {
              "text": " file is a manifest and a signature:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "header": "row",
          "rows": [
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "File",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Description",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "manifest.json",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "Instructions you use to assemble the alternative distribution package.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "code": "signature",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "A signature that the deviceâ€™s operating system uses to verify the package contents.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ]
          ],
          "type": "table"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Save the ",
                  "type": "text"
                },
                {
                  "code": "alternativeDistributionPackageId",
                  "type": "codeVoice"
                },
                {
                  "text": " in case you want to query App Store Connect for all alternative distribution package versions outside of a normal ",
                  "type": "text"
                },
                {
                  "code": "AlternativeDistributionPackageVersionAvailable",
                  "type": "codeVoice"
                },
                {
                  "text": " notification. For more information, see ",
                  "type": "text"
                },
                {
                  "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackages-_id_",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Tip",
          "style": "tip",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "text": "For more information on alternative distribution package workflows, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/alternative-distribution-packages",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Process-the-manifest-file",
          "level": 2,
          "text": "Process the manifest file",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The manifest file contains links to assets that you download to compose a complete alternative distribution package. The individual assets represent unique variations and portions of an app, as required to install it on the variety of Apple devices that the app supports.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "An example manifest follows:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"distributionPackageRevision\": 1,",
            "  \"appleItemId\": \"10738181399\",",
            "  \"bundleId\": \"com.megabytemart.backyardbirds\",",
            "  \"shortVersionString\": \"1.5\",",
            "  \"bundleVersion\": \"1\",",
            "  \"appleVersionId\": \"2000013060\",",
            "  \"platforms\": [",
            "    \"ios\"",
            "  ],",
            "  \"minimumSystemVersions\": {",
            "    \"ios\": \"17.2\"",
            "  },",
            "  \"requiredDeviceCapabilities\": [",
            "    \"arm64\"",
            "  ],",
            "  \"appInstallDeterminants\": [],",
            "  \"variants\": [",
            "    {",
            "      \"publicId\": \"219750db-80c2-4c75-aecc-fa67835f384d\",",
            "      \"assetPath\": \"variant/219750db-80c2-4c75-aecc-fa67835f384d.ipa\",",
            "      \"installTargets\": [",
            "        {",
            "          \"device\": \"iPhone14,5\",",
            "          \"os\": \"17.4\"",
            "        },",
            "        {",
            "          \"device\": \"iPhone13,4\",",
            "          \"os\": \"17.4\"",
            "        }, ",
            "          ...",
            "        }",
            "      ],",
            "      \"variantDetails\": {",
            "        \"compressedSize\": 183335,",
            "        \"uncompressedSize\": 375808,",
            "        \"hashes\": [",
            "          {",
            "            \"algorithm\": \"sha256\",",
            "            \"chunkSize\": 183335,",
            "            \"encryptedChunkDigests\": [",
            "              \"ecc9df4860bd98b17dd8eae7f6b7aa6371fb51911ad13578da2293409366e53c\"",
            "            ]",
            "          }",
            "        ]",
            "      }",
            "    }",
            "  ],",
            "  \"deltas\": [",
            "    {",
            "      \"publicId\": \"ffbc52b6-f76b-4d51-9eff-5388bc6b7572\",",
            "      \"assetPath\": \"delta/ffbc52b6-f76b-4d51-9eff-5388bc6b7572.ipa\",",
            "      \"sourceVariant\": {",
            "        \"installTargets\": [",
            "          {",
            "            \"device\": \"iPhone14,5\",",
            "            \"os\": \"17.4\"",
            "          },",
            "          {",
            "            \"device\": \"iPhone13,4\",",
            "            \"os\": \"17.4\"",
            "          },",
            "            ...",
            "          }",
            "        ],",
            "        \"appleVersionId\": \"2000011760\",",
            "        \"version\": \"1.1\"",
            "      },",
            "      \"targetVariantAssetPath\": \"variant/219750db-80c2-4c75-aecc-fa67835f384d.ipa\",",
            "      \"deltaDetails\": {",
            "        \"compressedSize\": 26668,",
            "        \"uncompressedSize\": 82944,",
            "        \"hashes\": [",
            "          {",
            "            \"algorithm\": \"sha256\",",
            "            \"chunkSize\": 26668,",
            "            \"encryptedChunkDigests\": [",
            "              \"3eb8f4ea27196289933047e0971d03e910436781f42da896e666a8306ecf3e0f\"",
            "            ]",
            "          }",
            "        ]",
            "      }",
            "    }",
            "  ]",
            "}"
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "When the operating system installs an app on a device, it accesses your server at different subfolders off the base URL you provide in the download link depending on the needs of the requesting device. When your endpoint processes the alternative distribution package, you ingest and organize the contents that the manifest references according to two categories:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "definition": {
                "content": [
                  {
                    "inlineContent": [
                      {
                        "text": "Complete app bundles that vary slightly to support different device types.",
                        "type": "text"
                      }
                    ],
                    "type": "paragraph"
                  }
                ]
              },
              "term": {
                "inlineContent": [
                  {
                    "inlineContent": [
                      {
                        "text": "Variants",
                        "type": "text"
                      }
                    ],
                    "type": "emphasis"
                  }
                ]
              }
            },
            {
              "definition": {
                "content": [
                  {
                    "inlineContent": [
                      {
                        "text": "Partial app bundles, that consist of just the bits required to update from one version of an app to another.",
                        "type": "text"
                      }
                    ],
                    "type": "paragraph"
                  }
                ]
              },
              "term": {
                "inlineContent": [
                  {
                    "inlineContent": [
                      {
                        "text": "Deltas",
                        "type": "text"
                      }
                    ],
                    "type": "emphasis"
                  }
                ]
              }
            }
          ],
          "type": "termList"
        },
        {
          "anchor": "Download-app-variants",
          "level": 2,
          "text": "Download app variants",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The variants reside at the top of the manifest. The first variant in the example has a ",
              "type": "text"
            },
            {
              "code": "publicId",
              "type": "codeVoice"
            },
            {
              "text": " of ",
              "type": "text"
            },
            {
              "code": "219750db-80c2-4c75-aecc-fa67835f384d",
              "type": "codeVoice"
            },
            {
              "text": ". To download the variant, provide the ",
              "type": "text"
            },
            {
              "code": "publicId",
              "type": "codeVoice"
            },
            {
              "text": " as the ",
              "type": "text"
            },
            {
              "code": "id",
              "type": "codeVoice"
            },
            {
              "text": " path parameter of the ",
              "type": "text"
            },
            {
              "code": "alternativeDistributionPackageVariants",
              "type": "codeVoice"
            },
            {
              "text": " endpoint, as follows:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "GET https://api.appstoreconnect.apple.com/alternativeDistributionPackageVariants/219750db-80c2-4c75-aecc-fa67835f384d"
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "For more information about the ",
              "type": "text"
            },
            {
              "code": "alternativeDistributionPackageVariants",
              "type": "codeVoice"
            },
            {
              "text": " endpoint, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageVariants-_id_",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Example response:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"data\": {",
            "    \"type\": \"alternativeDistributionPackageVariants\",",
            "    \"id\": \"219750db-80c2-4c75-aecc-fa67835f384d\",",
            "    \"attributes\": {",
            "      \"url\": \"<Apple_CDN_base_URL>/pre-thinned11331259484252926706.thinned.signed.dpkg.ipa?accessKey=<accesskey>\",",
            "      \"urlExpirationDate\": \"2024-03-29T21:57:24-07:00\",",
            "      \"alternativeDistributionKeyBlob\": \"<key_blob_base64_encoded_string>\"",
            "    }, ..."
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "In the response, navigate to the ",
              "type": "text"
            },
            {
              "code": "data.attributes.url",
              "type": "codeVoice"
            },
            {
              "text": ", which downloads ",
              "type": "text"
            },
            {
              "code": "pre-thinned11331259484252926706.thinned.signed.dpkg.ipa",
              "type": "codeVoice"
            },
            {
              "text": ", which is an installable app for the particular class of supported devices that Apple assigns this variant. Although an app that resides on App Store Connect might contain binaries for multiple platforms, the alternative distribution package sent to the marketplace only contains variants for the platforms that MarketplaceKit supports. For example, a specific alternative distribution package that a marketplace receives contains only iPhone or iPad variants; it doesnâ€™t contain watch variants.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The ",
              "type": "text"
            },
            {
              "code": "alternativeDistributionKeyBlob",
              "type": "codeVoice"
            },
            {
              "text": " (",
              "type": "text"
            },
            {
              "inlineContent": [
                {
                  "text": "key blob",
                  "type": "text"
                }
              ],
              "type": "emphasis"
            },
            {
              "text": ") has a unique value for each variant. The ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/AppLicenseDeliverySDK",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " requires the key blob during licensing requests. Store the key blob so your licensing service can use it to decrypt the license request payload coming from a device as required to generate an app license for the variant.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Download-app-deltas",
          "level": 2,
          "text": "Download app deltas",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "If someone already has a prior version of the app installed, the system selects a delta to install rather than a variant. The deltas reside at the bottom of the manifest. The first delta in the example has a ",
              "type": "text"
            },
            {
              "code": "publicId",
              "type": "codeVoice"
            },
            {
              "text": " of ",
              "type": "text"
            },
            {
              "code": "ffbc52b6-f76b-4d51-9eff-5388bc6b7572",
              "type": "codeVoice"
            },
            {
              "text": ". To download the first delta, provide the ",
              "type": "text"
            },
            {
              "code": "publicId",
              "type": "codeVoice"
            },
            {
              "text": " as the ",
              "type": "text"
            },
            {
              "code": "id",
              "type": "codeVoice"
            },
            {
              "text": " path parameter of the ",
              "type": "text"
            },
            {
              "code": "alternativeDistributionPackageDeltas",
              "type": "codeVoice"
            },
            {
              "text": " endpoint, as follows:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "GET https://api.appstoreconnect.apple.com/alternativeDistributionPackageDeltas/ffbc52b6-f76b-4d51-9eff-5388bc6b7572"
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "For more information about the ",
              "type": "text"
            },
            {
              "code": "alternativeDistributionPackageDeltas",
              "type": "codeVoice"
            },
            {
              "text": " endpoint, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageDeltas-_id_",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Example response:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"data\": {",
            "    \"type\": \"alternativeDistributionPackageDeltas\",",
            "    \"id\": \"ffbc52b6-f76b-4d51-9eff-5388bc6b7572\",",
            "    \"attributes\": {",
            "      \"url\": \"<Apple_CDN_base_URL>/mzpse.7668245576990498917.ipa?accessKey=<access_key>\",",
            "      \"urlExpirationDate\": \"2024-03-29T21:25:47-07:00\",",
            "      \"alternativeDistributionKeyBlob\": \"<key_blob_base64_encoded_string>\"",
            "    }, ..."
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "When App Store Connect sends a new app version notification, it sends an app distribution package that includes the variants first, followed by another for deltas, if any are available for the app. Deltas arrive an unspecified amount of time after the appâ€™s variants. You donâ€™t need to wait for deltas to arrive before serving the new app to devices. Rather, App Store Connect sends variants first to expedite the appâ€™s availability for customers.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Important",
          "style": "important",
          "type": "aside"
        },
        {
          "anchor": "Store-the-app-data-at-an-expected-path",
          "level": 2,
          "text": "Store the app data at an expected path",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Assemble all of the downloaded alternative distribution package assets into a folder structure, as follows:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "delta/",
            "manifest.json",
            "signature",
            "variant/"
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "You can serve the base URL of this file structure from any URL scheme you choose. When the deviceâ€™s operating system attempts to download the app, it accesses the contents of this folder according to the ",
              "type": "text"
            },
            {
              "code": "alternativeDistributionPackage",
              "type": "codeVoice"
            },
            {
              "text": " parameter that you provide to either:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "identifier": "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit/MarketplaceKitURIScheme",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": " URLs, when serving your app marketplace",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The ",
                      "type": "text"
                    },
                    {
                      "identifier": "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit/InstallMetadata",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": " initializer ",
                      "type": "text"
                    },
                    {
                      "identifier": "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit/InstallMetadata/init(account:appleItemID:alternativeDistributionPackage:isUpdate:)",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": ", when serving apps that reside on your marketplace",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "Store the variants and deltas according to their ",
              "type": "text"
            },
            {
              "code": "assetPath",
              "type": "codeVoice"
            },
            {
              "text": " in the manifest. For example, the following ",
              "type": "text"
            },
            {
              "code": "assetPath",
              "type": "codeVoice"
            },
            {
              "text": " tells you how to name a specific variant and where to store it off the base URL:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "\"assetPath\": \"variant/219750db-80c2-4c75-aecc-fa67835f384d.ipa\","
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "When the deviceâ€™s operating system attempts to download an app, it first reads the manifest to discover the contents of the alternative distribution package, then the operating system reads the signature to validate the variant or delta it chooses to install.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Validate-the-assembled-app-data",
          "level": 2,
          "text": "Validate the assembled app data",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "You can use the ",
              "type": "text"
            },
            {
              "code": "dist_package_tool",
              "type": "codeVoice"
            },
            {
              "text": " utility on macOS 14.4 and later to verify the integrity of the alternative distribution packages you assemble. After downloading and assembling a complete alternative distribution package, you can validate it with the command:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "dist_package_tool validate <package-path> -v"
          ],
          "syntax": "zsh",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "This utility verifies the signature in the manifest and that the folders contain the correct assets that the manifest references.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The ",
              "type": "text"
            },
            {
              "code": "-v",
              "type": "codeVoice"
            },
            {
              "text": " option provides verbose output. The following example represents the output of a valid alternative distribution package:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "Validating package: file:///Users/<name>/476476a1-6246-4782-98f1-9ca3819827ad/",
            "Package has a valid signature.",
            "All resources are present and valid."
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "If the alternative distribution package is incomplete, the output can identify problems. For example:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "Package contained added files.",
            "    Added file: .DS_Store",
            "Package contained missing files.",
            "    Missing file: variant/7e11a118-ab90-4a52-9ca1-31362f5d108e.ipa"
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "The toolâ€™s return value indicates success or failure, so you can branch conditional logic using it in a script.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit": {
      "abstract": [
        {
          "text": "Create an alternative app marketplace, distribute your app on an alternative app marketplace, or distribute your app from your website.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit",
      "kind": "symbol",
      "role": "collection",
      "title": "MarketplaceKit",
      "type": "topic",
      "url": "/documentation/marketplacekit"
    },
    "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit/InstallMetadata": {
      "abstract": [
        {
          "text": "Information about a specific app to install or update and the person who initiates it.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "keyword",
          "text": "struct"
        },
        {
          "kind": "text",
          "text": " "
        },
        {
          "kind": "identifier",
          "text": "InstallMetadata"
        }
      ],
      "identifier": "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit/InstallMetadata",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "InstallMetadata"
        }
      ],
      "role": "symbol",
      "title": "InstallMetadata",
      "type": "topic",
      "url": "/documentation/marketplacekit/installmetadata"
    },
    "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit/InstallMetadata/init(account:appleItemID:alternativeDistributionPackage:isUpdate:)": {
      "abstract": [],
      "fragments": [
        {
          "kind": "identifier",
          "text": "init"
        },
        {
          "kind": "text",
          "text": "("
        },
        {
          "kind": "externalParam",
          "text": "account"
        },
        {
          "kind": "text",
          "text": ": "
        },
        {
          "kind": "typeIdentifier",
          "preciseIdentifier": "s:SS",
          "text": "String"
        },
        {
          "kind": "text",
          "text": ", "
        },
        {
          "kind": "externalParam",
          "text": "appleItemID"
        },
        {
          "kind": "text",
          "text": ": "
        },
        {
          "kind": "typeIdentifier",
          "preciseIdentifier": "s:14MarketplaceKit11AppleItemIDa",
          "text": "AppleItemID"
        },
        {
          "kind": "text",
          "text": ", "
        },
        {
          "kind": "externalParam",
          "text": "alternativeDistributionPackage"
        },
        {
          "kind": "text",
          "text": ": "
        },
        {
          "kind": "typeIdentifier",
          "preciseIdentifier": "s:10Foundation3URLV",
          "text": "URL"
        },
        {
          "kind": "text",
          "text": ", "
        },
        {
          "kind": "externalParam",
          "text": "isUpdate"
        },
        {
          "kind": "text",
          "text": ": "
        },
        {
          "kind": "typeIdentifier",
          "preciseIdentifier": "s:Sb",
          "text": "Bool"
        },
        {
          "kind": "text",
          "text": ")"
        }
      ],
      "identifier": "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit/InstallMetadata/init(account:appleItemID:alternativeDistributionPackage:isUpdate:)",
      "kind": "symbol",
      "role": "symbol",
      "title": "init(account:appleItemID:alternativeDistributionPackage:isUpdate:)",
      "type": "topic",
      "url": "/documentation/marketplacekit/installmetadata/init(account:appleitemid:alternativedistributionpackage:isupdate:)"
    },
    "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit/MarketplaceKitURIScheme": {
      "abstract": [
        {
          "text": "A URI scheme that defines an alternative distribution app installation link.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "keyword",
          "text": "let"
        },
        {
          "kind": "text",
          "text": " "
        },
        {
          "kind": "identifier",
          "text": "MarketplaceKitURIScheme"
        },
        {
          "kind": "text",
          "text": ": "
        },
        {
          "kind": "typeIdentifier",
          "preciseIdentifier": "s:SS",
          "text": "String"
        }
      ],
      "identifier": "doc://com.apple.MarketplaceKit/documentation/MarketplaceKit/MarketplaceKitURIScheme",
      "kind": "symbol",
      "role": "symbol",
      "title": "MarketplaceKitURIScheme",
      "type": "topic",
      "url": "/documentation/marketplacekit/marketplacekiturischeme"
    },
    "doc://com.apple.MarketplaceKit/documentation/marketplacekit/installing-apps-from-an-alternative-marketplace": {
      "abstract": [
        {
          "text": "Manage the installation of apps that developers distribute from your marketplace app.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.MarketplaceKit/documentation/marketplacekit/installing-apps-from-an-alternative-marketplace",
      "kind": "article",
      "role": "article",
      "title": "Installing apps from an alternative marketplace",
      "type": "topic",
      "url": "/documentation/marketplacekit/installing-apps-from-an-alternative-marketplace"
    },
    "doc://com.apple.MarketplaceKit/documentation/marketplacekit/installing-your-app-from-your-website": {
      "abstract": [
        {
          "text": "Manage the installation of an app that you develop and distribute through your website.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.MarketplaceKit/documentation/marketplacekit/installing-your-app-from-your-website",
      "kind": "article",
      "role": "article",
      "title": "Installing your app from your website",
      "type": "topic",
      "url": "/documentation/marketplacekit/installing-your-app-from-your-website"
    },
    "doc://com.apple.MarketplaceKit/documentation/marketplacekit/processing-alternative-marketplace-notifications": {
      "abstract": [
        {
          "text": "Manage the addition and removal of apps available on your alternative marketplace.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.MarketplaceKit/documentation/marketplacekit/processing-alternative-marketplace-notifications",
      "kind": "article",
      "role": "article",
      "title": "Processing alternative app marketplace notifications",
      "type": "topic",
      "url": "/documentation/marketplacekit/processing-alternative-marketplace-notifications"
    },
    "doc://com.apple.MarketplaceKit/documentation/marketplacekit/supplying-an-install-verification-token": {
      "abstract": [
        {
          "text": "Support the installation of alternative distribution apps by creating signed JSON web tokens.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.MarketplaceKit/documentation/marketplacekit/supplying-an-install-verification-token",
      "kind": "article",
      "role": "article",
      "title": "Supplying an install verification token",
      "type": "topic",
      "url": "/documentation/marketplacekit/supplying-an-install-verification-token"
    },
    "doc://com.apple.documentation/documentation/AppLicenseDeliverySDK": {
      "abstract": [
        {
          "text": "Secure the installation of alternative distribution apps on iOS or iPadOS devices by vending licenses from your web server.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/AppLicenseDeliverySDK",
      "kind": "symbol",
      "role": "collection",
      "title": "App License Delivery SDK",
      "type": "topic",
      "url": "/documentation/AppLicenseDeliverySDK"
    },
    "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageDeltas-_id_": {
      "abstract": [
        {
          "text": "Get detail information about specific alternative distribution package deltas.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageDeltas-_id_",
      "kind": "symbol",
      "role": "symbol",
      "title": "Read information for alternative distribution package deltas",
      "type": "topic",
      "url": "/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageDeltas-_id_"
    },
    "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageVariants-_id_": {
      "abstract": [
        {
          "text": "Get detail information about specific alternative distribution package variants.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageVariants-_id_",
      "kind": "symbol",
      "role": "symbol",
      "title": "Read information for an alternative distribution package variants",
      "type": "topic",
      "url": "/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageVariants-_id_"
    },
    "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageVersions-_id_": {
      "abstract": [
        {
          "text": "Get detail information about a specific alternative distribution package version.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageVersions-_id_",
      "kind": "symbol",
      "role": "symbol",
      "title": "Read information for an alternative distribution package version",
      "type": "topic",
      "url": "/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackageVersions-_id_"
    },
    "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackages-_id_": {
      "abstract": [
        {
          "text": "Get information about a specific alternative distribution package.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackages-_id_",
      "kind": "symbol",
      "role": "symbol",
      "title": "Read alternative distribution package information",
      "type": "topic",
      "url": "/documentation/AppStoreConnectAPI/GET-v1-alternativeDistributionPackages-_id_"
    },
    "doc://com.apple.documentation/documentation/AppStoreConnectAPI/alternative-distribution-packages": {
      "abstract": [
        {
          "text": "Create and read distribution packages for an alternative app distribution.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/alternative-distribution-packages",
      "kind": "article",
      "role": "article",
      "title": "Alternative Distribution Packages",
      "type": "topic",
      "url": "/documentation/AppStoreConnectAPI/alternative-distribution-packages"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "https://developer.apple.com/help/app-store-connect/distributing-apps-in-the-european-union/manage-distribution-on-an-alternative-app-marketplace": {
      "identifier": "https://developer.apple.com/help/app-store-connect/distributing-apps-in-the-european-union/manage-distribution-on-an-alternative-app-marketplace",
      "title": "Manage distribution on an alternative app marketplace",
      "titleInlineContent": [
        {
          "text": "Manage distribution on an alternative app marketplace",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/help/app-store-connect/distributing-apps-in-the-european-union/manage-distribution-on-an-alternative-app-marketplace"
    },
    "ingesting-an-alternative-distribution-package-1": {
      "alt": "A diagram that shows the flow of the ingesting an alternative distribution package. When thereâ€™s a new version of an app available, App Store Connect sends a notification to your serverâ€™s notifications webhook, your primary back end retrieves the package metadata using  the app distribution package ID from the notification. Your primary back end then downloads the package zip from the content delivery network and saves the manifest and signature to your database or large file storage. Your primary back end registers the variant and delta info, then stores it. For each variant and delta of the app distribution package, your back end retrieves the asset URL by ID from App Store Connect, then downloads the asset from the content delivery network and stores the asset in your database.",
      "identifier": "ingesting-an-alternative-distribution-package-1",
      "type": "image",
      "variants": [
        {
          "traits": [
            "2x",
            "light"
          ],
          "url": "https://docs-assets.developer.apple.com/published/557844addd2e5197953a26fbafeac2b2/ingesting-an-alternative-distribution-package-1@2x.png"
        },
        {
          "traits": [
            "2x",
            "dark"
          ],
          "url": "https://docs-assets.developer.apple.com/published/e5d256c7c1e61855420168722efd36f7/ingesting-an-alternative-distribution-package-1~dark@2x.png"
        }
      ]
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Web-services",
      "generated": true,
      "identifiers": [
        "doc://com.apple.MarketplaceKit/documentation/marketplacekit/processing-alternative-marketplace-notifications",
        "doc://com.apple.MarketplaceKit/documentation/marketplacekit/installing-your-app-from-your-website",
        "doc://com.apple.MarketplaceKit/documentation/marketplacekit/installing-apps-from-an-alternative-marketplace",
        "doc://com.apple.MarketplaceKit/documentation/marketplacekit/supplying-an-install-verification-token"
      ],
      "title": "Web services"
    }
  ],
  "variants": [
    {
      "paths": [
        "/documentation/marketplacekit/ingesting-an-alternative-distribution-package"
      ],
      "traits": [
        {
          "interfaceLanguage": "swift"
        }
      ]
    }
  ]
}

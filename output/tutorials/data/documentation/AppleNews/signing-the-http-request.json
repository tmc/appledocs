{
  "abstract": [
    {
      "text": "Sign the canonical request and send the custom authorization header to the Apple News API.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.applenews/documentation/AppleNews",
        "doc://com.apple.applenews/documentation/AppleNews/apple-news-api-tutorial"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.applenews/documentation/AppleNews/signing-the-http-request"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "role": "article",
    "roleHeading": "Article",
    "title": "Signing the HTTP Request"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When communicating using HTTP protocol, the server validates the identity of the client and provides authorization for specific actions. By signing the HTTP request, the Apple News API authenticates the client and authorizes your news channel. See ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.applenews/documentation/AppleNews/about-the-apple-news-security-model",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "inlineContent": [
                {
                  "text": "On this page, youâ€™ll learn how to:",
                  "type": "text"
                }
              ],
              "type": "strong"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Create a canonical request.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Sign the canonical request.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Create a custom authorization header.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Send the header and the request to the Apple News API.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "anchor": "Copy-This-Code",
          "level": 3,
          "text": "Copy This Code",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Open any text editor to copy this code. Save the file as ",
              "type": "text"
            },
            {
              "code": "read_channel.py",
              "type": "codeVoice"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "import base64",
            "import hmac",
            "import requests",
            "import sys",
            "from datetime import datetime",
            "import hashlib ",
            "",
            "class PublisherAPI:",
            "    channel_id = \"\"",
            "    current_action = \"\"",
            "    key_id = \"\"",
            "    key_secret = \"\"",
            "    url = \"\"",
            "",
            "    def send_request(self, method, url, content_type=None):",
            "        date = datetime.utcnow().strftime('%Y-%m-%dT%H:%M:%SZ')",
            "        canonical_request = method + url + date",
            "        canonical_request = canonical_request.encode()",
            "        signature = self.create_signature(canonical_request)",
            "        authorization = \"HHMAC; key=%s; signature=%s; date=%s\" % (",
            "            self.key_id, signature, date)",
            "        headers = {\"Authorization\": authorization}",
            "        return requests.request(method, url, headers=headers)",
            "",
            "    def create_signature(self, canonical_request):",
            "        key_bytes = base64.b64decode(self.key_secret)",
            "        message = canonical_request",
            "        secret = self.key_secret.encode(\"utf-8\")",
            "",
            "        signature = base64.b64encode(",
            "            hmac.new(key_bytes, message,digestmod=hashlib.sha256).digest()).decode(\"utf-8\")",
            "        return signature",
            "",
            "    def read_channel(self):",
            "        method = \"GET\"",
            "        url = self.url + \"%s\" % self.channel_id",
            "        return self.send_request(method, url)",
            "",
            "    def main(self):",
            "        if self.current_action == \"readChannel\":",
            "            response = self.read_channel()",
            "        else:",
            "            response = {",
            "                \"status_code\": 400,",
            "                \"response\": \"{\\\"errors\\\":[{\\\"code\\\":\\\"UNKNOWN_COMMAND\\\"}]}\"",
            "            }",
            "        return response",
            "",
            "if __name__ == '__main__':",
            "    if not len(sys.argv) > 4:",
            "        print ('no or missing arguments')",
            "        exit()",
            "",
            "    publisherAPI = PublisherAPI()",
            "    publisherAPI.url = sys.argv[1] + \"/channels/\"",
            "    publisherAPI.channel_id = sys.argv[2]",
            "    publisherAPI.key_id = sys.argv[3]",
            "    publisherAPI.key_secret = sys.argv[4]",
            "    publisherAPI.current_action = \"readChannel\"",
            "",
            "    response = publisherAPI.main()",
            "",
            "    print(response.status_code)",
            "    print(response.text)"
          ],
          "syntax": "python",
          "type": "codeListing"
        },
        {
          "anchor": "Run-the-Script",
          "level": 3,
          "text": "Run the Script",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Start the command prompt and change to the directory containing ",
              "type": "text"
            },
            {
              "code": "read_channel.py",
              "type": "codeVoice"
            },
            {
              "text": ". Run this script to make a properly authenticated ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.applenews/documentation/AppleNewsAPI/GET-channels-_channelId_",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " request to the Apple News API. This script takes four arguments: API URL ",
              "type": "text"
            },
            {
              "code": "(https://news-api.apple.com",
              "type": "codeVoice"
            },
            {
              "text": "), Channel ID, Key ID, and the Secret.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "python read_channel.py https://news-api.apple.com channel_id key_id key_secret"
          ],
          "syntax": "swift",
          "type": "codeListing"
        },
        {
          "anchor": "Result",
          "level": 3,
          "text": "Result",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The server returns a  successful response. The response includes information about the channel, as shown here. See ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.applenews/documentation/AppleNewsAPI/Channel",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.applenews/documentation/AppleNewsAPI/ChannelLinks",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "    \"data\": {",
            "        \"createdAt\": \"2016-06-13T00:25:43Z\",",
            "        \"modifiedAt\": \"2016-06-13T23:30:05Z\",",
            "        \"id\": \"42424242-4242-4242-4242-424242424242\",",
            "        \"type\": \"channel\",",
            "        \"shareUrl\": \"https://apple.news/Taaaaaaaaaaaaaaaaaaaaaa\",",
            "        \"links\": {",
            "            \"defaultSection\": \"https://news-api.apple.com/sections/42424242-4242-4242-4242-424242424242\",",
            "            \"self\": \"https://news-api.apple.com/channels/42424242-4242-4242-4242-424242424242\"",
            "        },",
            "        \"name\": \"My Channel\",",
            "        \"website\": \"http://mychannel.com\"",
            "    }",
            "}"
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "anchor": "How-It-Works",
          "level": 3,
          "text": "How It Works",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The canonical request combines the method, the URL, and the current date, as shown here:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "date = datetime.utcnow().strftime('%Y-%m-%dT%H:%M:%SZ')",
            "canonical_request = method + url + date"
          ],
          "syntax": "python",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "The date is formatted as shown here:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "code": "{Year with century as a decimal number}-{Month as a zero-padded decimal number}-{Day of the month as a zero-padded decimal number}T{Hour (24-hour clock) as a zero-padded decimal number}:{Minute as a zero-padded decimal number}:{Second as a zero-padded decimal number}Z",
              "type": "codeVoice"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The date format looks like this:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "2018-08-10T23:55:11Z"
          ],
          "syntax": "other",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "The canonical request looks like this:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "GEThttps://news-api.apple.com/channels/{channel-id}2018-08-10T23:57:00Z"
          ],
          "syntax": "other",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "You create a custom authorization header by combining the Key ID, the signed canonical request, and the formatted current date, as shown here:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "code": "{'HHMAC; key={Key ID}; signature={Signed Canonical Request}; date={Formatted Current Date'}",
              "type": "codeVoice"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The header looks like this:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{'Authorization': 'HHMAC; key={Key ID}; signature=1rBvQKZeQ6M3/dVMtv95Dc51V+QViaqUB0bF6exzYtw"
          ],
          "syntax": "other",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Finally, you send the header and the request to the Apple News API. The request looks like this:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "return requests.request(method, url, headers=headers)"
          ],
          "syntax": "python",
          "type": "codeListing"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.applenews/documentation/AppleNews": {
      "abstract": [
        {
          "text": "Design, create, and publish signature content for Apple News.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.applenews/documentation/AppleNews",
      "kind": "article",
      "role": "collection",
      "title": "Apple News",
      "type": "topic",
      "url": "/documentation/applenews"
    },
    "doc://com.apple.applenews/documentation/AppleNews/about-the-apple-news-security-model": {
      "abstract": [
        {
          "text": "Learn how the Apple News API authenticates clients, authorizes your news channel, and enforces confidentiality.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.applenews/documentation/AppleNews/about-the-apple-news-security-model",
      "kind": "article",
      "role": "article",
      "title": "About the Apple News Security Model",
      "type": "topic",
      "url": "/documentation/applenews/about-the-apple-news-security-model"
    },
    "doc://com.apple.applenews/documentation/AppleNews/apple-news-api-tutorial": {
      "abstract": [
        {
          "text": "Request channel data and publish an article using the Apple News API.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.applenews/documentation/AppleNews/apple-news-api-tutorial",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Apple News API Tutorial",
      "type": "topic",
      "url": "/documentation/applenews/apple-news-api-tutorial"
    },
    "doc://com.apple.applenews/documentation/AppleNews/making-an-http-request-to-the-apple-news-api": {
      "abstract": [
        {
          "text": "Create the URL, set the method, and send the request.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.applenews/documentation/AppleNews/making-an-http-request-to-the-apple-news-api",
      "kind": "article",
      "role": "article",
      "title": "Making an HTTP Request to the Apple News API",
      "type": "topic",
      "url": "/documentation/applenews/making-an-http-request-to-the-apple-news-api"
    },
    "doc://com.apple.applenews/documentation/AppleNews/publishing-an-article": {
      "abstract": [
        {
          "text": "Build a URL and article body for the publish-article request.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.applenews/documentation/AppleNews/publishing-an-article",
      "kind": "article",
      "role": "article",
      "title": "Publishing an Article",
      "type": "topic",
      "url": "/documentation/applenews/publishing-an-article"
    },
    "doc://com.apple.applenews/documentation/AppleNewsAPI/Channel": {
      "abstract": [
        {
          "text": "See the fields the read channel endpoint returned.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "object "
        },
        {
          "kind": "identifier",
          "text": "Channel"
        }
      ],
      "identifier": "doc://com.apple.applenews/documentation/AppleNewsAPI/Channel",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Channel"
        }
      ],
      "role": "symbol",
      "title": "Channel",
      "type": "topic",
      "url": "/documentation/applenewsapi/channel"
    },
    "doc://com.apple.applenews/documentation/AppleNewsAPI/ChannelLinks": {
      "abstract": [
        {
          "text": "See the links the read channel endpoint returned.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "object "
        },
        {
          "kind": "identifier",
          "text": "ChannelLinks"
        }
      ],
      "identifier": "doc://com.apple.applenews/documentation/AppleNewsAPI/ChannelLinks",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "ChannelLinks"
        }
      ],
      "role": "symbol",
      "title": "ChannelLinks",
      "type": "topic",
      "url": "/documentation/applenewsapi/channellinks"
    },
    "doc://com.apple.applenews/documentation/AppleNewsAPI/GET-channels-_channelId_": {
      "abstract": [
        {
          "text": "Get details about your channel, including the name, corresponding website, and default section.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.applenews/documentation/AppleNewsAPI/GET-channels-_channelId_",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "GET /channels/{channelId}"
        }
      ],
      "role": "symbol",
      "title": "Read Channel Information",
      "type": "topic",
      "url": "/documentation/applenewsapi/get-channels-_channelid_"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Apple-News-API-Python-Tutorial",
      "generated": true,
      "identifiers": [
        "doc://com.apple.applenews/documentation/AppleNews/making-an-http-request-to-the-apple-news-api",
        "doc://com.apple.applenews/documentation/AppleNews/publishing-an-article"
      ],
      "title": "Apple News API Python Tutorial"
    }
  ]
}

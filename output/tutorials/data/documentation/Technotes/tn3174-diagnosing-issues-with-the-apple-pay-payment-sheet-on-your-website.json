{
  "abstract": [
    {
      "text": "Diagnose errors received while presenting the Apple Pay payment sheet on",
      "type": "text"
    },
    {
      "text": " ",
      "type": "text"
    },
    {
      "text": "your website by identifying the underlying causes of common errors and explore",
      "type": "text"
    },
    {
      "text": " ",
      "type": "text"
    },
    {
      "text": "their potential solutions.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.technotes/documentation/Technotes"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.technotes/documentation/Technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "role": "article",
    "roleHeading": "Article",
    "title": "TN3174: Diagnosing issues with the Apple Pay payment sheet on your website"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "Overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When the Apple Pay payment sheet is presented,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "a number of JavaScript events are triggered before the payment sheet",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "is activated and ready for the customer to authenticate.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Additionally, some events are triggered when the customer interacts with the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "payment sheet, such as changing their selected payment card",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "with ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778013-onpaymentmethodselected",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ", or authorizing the transaction via",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "user authentication with ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778020-onpaymentauthorized",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The sequence of events depends on the configuration of the Apple Pay",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "payment request.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "For example, including",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymentrequest/2216121-requiredshippingcontactfields",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " values may invoke",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778009-onshippingcontactselected",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " event.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "For more information,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "see ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/videos/play/tech-talks/111381/",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "For payments, the ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778021-onvalidatemerchant",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ",",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "code": "onpaymentmethodselected",
              "type": "codeVoice"
            },
            {
              "text": ", and ",
              "type": "text"
            },
            {
              "code": "onpaymentauthorized",
              "type": "codeVoice"
            },
            {
              "text": " event handlers are always",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "invoked, so you must implement these methods and complete the events successfully",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "with ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778015-completemerchantvalidation",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ",",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1777995-completepaymentmethodselection",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778012-completepayment",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ",",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "respectively.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "However, most other events are optional and may be implemented as needed.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Some common payment sheet-related issues that you may encounter during your",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Apple Pay implementation include:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "“Apple Pay not available for this website” errors",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "“Payment Failed” errors",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Payment sheet is unexpectedly dismissed",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "anchor": "Possible-reasons-for-Apple-Pay-not-available-for-this-website-errors",
          "level": 2,
          "text": "Possible reasons for “Apple Pay not available for this website” errors",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "An “Apple Pay not available for this website” error can occur while presenting",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the payment sheet,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "most commonly for an invalid ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepayrequest/2951611-merchantidentifier",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "To ensure your developer account is configured correctly,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "please go to ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/account/resources",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " and confirm",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the following:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The ",
                      "type": "text"
                    },
                    {
                      "code": "merchantIdentifier",
                      "type": "codeVoice"
                    },
                    {
                      "text": " provided to your payment session request matches an",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "existing Merchant ID ",
                      "type": "text"
                    },
                    {
                      "identifier": "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay#create-a-merchant-identifier",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": " to your developer account.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The ",
                      "type": "text"
                    },
                    {
                      "code": "merchantIdentifier",
                      "type": "codeVoice"
                    },
                    {
                      "text": " also has an active",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "identifier": "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay#create-a-payment-processing-certificate",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": " and",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "identifier": "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay-on-the-web#create-a-merchant-identity-certificate",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": ".",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The domain provided to the payload of the ",
                      "type": "text"
                    },
                    {
                      "code": "/startSession",
                      "type": "codeVoice"
                    },
                    {
                      "text": " or ",
                      "type": "text"
                    },
                    {
                      "code": "/paymentSession",
                      "type": "codeVoice"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "endpoints match the domain shown in your web browser’s address bar.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The ",
                  "type": "text"
                },
                {
                  "code": "/startSession",
                  "type": "codeVoice"
                },
                {
                  "text": " endpoint is being phased out and replaced by",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "code": "/paymentSession",
                  "type": "codeVoice"
                },
                {
                  "text": ". See ",
                  "type": "text"
                },
                {
                  "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/requesting_an_apple_pay_payment_session",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": "",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "for more information.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "anchor": "Possible-reasons-for-Payment-Failed-errors",
          "level": 2,
          "text": "Possible reasons for “Payment Failed” errors",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "A “Payment Failed” error can occur while presenting the payment sheet,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the most common reasons include:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Invalid server configurations",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Invalid payment session request formatting",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Merchant validation issues",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "anchor": "Troubleshooting-invalid-server-configurations",
          "level": 3,
          "text": "Troubleshooting invalid server configurations",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "An invalid server configuration can cause several issues with your Apple Pay",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "implementation, mostly due to the lack of security,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "trust and verification of your server’s authenticity via a mutual TLS connection.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "The most common issues with your server include:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "TLS handshake can’t be established.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The server doesn’t support TLS 1.2 or later.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The server uses unsupported TLS cipher suites.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The server uses invalid or untrusted TLS certificates.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "anchor": "Issue-TLS-handshake-cant-be-established",
          "level": 4,
          "text": "Issue: TLS handshake can’t be established",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "A TLS handshake can fail during the domain verification process.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "For example, your server may be misconfigured in the following ways:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The server does not support TLS 1.2 or later.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The server does not support one of the specified cipher suites for Apple Pay.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The server is using invalid or untrusted TLS certificates.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "anchor": "Issue-Your-server-doesnt-support-TLS-12-or-later",
          "level": 4,
          "text": "Issue: Your server doesn’t support TLS 1.2 or later",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Servers supporting Apple Pay on the Web need to use TLS 1.2 or later.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Servers also need to be accessible by the Apple Pay merchant verification server",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "and can’t be proxied or redirected. For additional guidance on using a strict",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "allow list for Apple Pay IP addresses and merchant validation domains,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "see ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Issue-Use-of-unsupported-TLS-cipher-suites",
          "level": 4,
          "text": "Issue: Use of unsupported TLS cipher suites",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Servers negotiating TLS connections for Apple Pay on the Web must use one of",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the supported cipher suites described in ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server",
              "isActive": true,
              "overridingTitle": "Setting up your Server",
              "overridingTitleInlineContent": [
                {
                  "text": "Setting up your Server",
                  "type": "text"
                }
              ],
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "To debug which cipher suites are being negotiated between Apple’s domain",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "verification client and your server,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/network/recording_a_packet_trace",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " and review the cipher suites being offered by",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Apple’s domain verification server in the Client Hello packet.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If a supported cipher suite is selected by your server,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "confirm this by reviewing the Server Hello packet sent back to the client.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If there is an issue in the cipher suite negotiation then there will typically",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "be a failure after the Client Hello packet.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Issue-Use-of-invalid-or-untrusted-TLS-certificates",
          "level": 4,
          "text": "Issue: Use of invalid or untrusted TLS certificates",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Ensure you are using a valid TLS certificate.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "For example, make sure that this certificate is set up with a proper chain of",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "trust and also adheres to Apple’s Certificate Transparency policy for Safari.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "You can double check this with a packet trace.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Make sure the leaf certificate being used on your domain follows a valid chain",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "of trust through the intermediate certificates to the root certificate.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "For additional guidance, see ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/requesting_an_apple_pay_payment_session",
              "isActive": true,
              "overridingTitle": "Requesting an Apple Pay Session",
              "overridingTitleInlineContent": [
                {
                  "text": "Requesting an Apple Pay Session",
                  "type": "text"
                }
              ],
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Troubleshooting-payment-session-request-formatting-issues",
          "level": 3,
          "text": "Troubleshooting payment session request formatting issues",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The following topics provide guidance on resolving issues when requesting a",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "payment session from Apple’s servers.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "When you experience an error,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "check the contents of the response body as it may contain a status message",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "to determine where the issue occurred.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Issue-Unable-to-establish-a-secure-connection-or-SSL-handshake-failure",
          "level": 4,
          "text": "Issue: Unable to establish a secure connection or SSL handshake failure",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "This error typically indicates a merchant identity certificate issue.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "To resolve this error, please confirm the following:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The payment session request:",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                },
                {
                  "items": [
                    {
                      "content": [
                        {
                          "inlineContent": [
                            {
                              "text": "Uses the ",
                              "type": "text"
                            },
                            {
                              "code": "POST",
                              "type": "codeVoice"
                            },
                            {
                              "text": " method, not ",
                              "type": "text"
                            },
                            {
                              "code": "GET",
                              "type": "codeVoice"
                            },
                            {
                              "text": ".",
                              "type": "text"
                            }
                          ],
                          "type": "paragraph"
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "inlineContent": [
                            {
                              "text": "Values don’t contain accidental whitespace or spelling mistakes.",
                              "type": "text"
                            }
                          ],
                          "type": "paragraph"
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "inlineContent": [
                            {
                              "text": "Uses the URL provided by the ",
                              "type": "text"
                            },
                            {
                              "code": "validationURL",
                              "type": "codeVoice"
                            },
                            {
                              "text": " attribute.",
                              "type": "text"
                            }
                          ],
                          "type": "paragraph"
                        }
                      ]
                    }
                  ],
                  "type": "unorderedList"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The ",
                      "type": "text"
                    },
                    {
                      "code": "validationURL",
                      "type": "codeVoice"
                    },
                    {
                      "text": " attribute uses the ",
                      "type": "text"
                    },
                    {
                      "code": "https://",
                      "type": "codeVoice"
                    },
                    {
                      "text": " scheme.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The certificate is configured correctly.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The correct certificate is used for the payment session,",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "especially when managing multiple certificates.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The correct private key is associated to the certificate.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Your server is correctly configured.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "See ",
                      "type": "text"
                    },
                    {
                      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website#Troubleshooting-invalid-server-configurations",
                      "isActive": true,
                      "overridingTitle": "Troubleshooting invalid server configurations",
                      "overridingTitleInlineContent": [
                        {
                          "text": "Troubleshooting invalid server configurations",
                          "type": "text"
                        }
                      ],
                      "type": "reference"
                    },
                    {
                      "text": ".",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "To learn more about configuring a merchant identity certificate,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "see ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/configuring_your_environment",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ". Additionally, see",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server",
              "isActive": true,
              "overridingTitle": "Setting Up Your Server",
              "overridingTitleInlineContent": [
                {
                  "text": "Setting Up Your Server",
                  "type": "text"
                }
              ],
              "type": "reference"
            },
            {
              "text": " to verify your server configuration is valid.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Issue-Received-a-payment-session-response-error",
          "level": 4,
          "text": "Issue: Received a payment session response error",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "inlineContent": [
                {
                  "text": "Error: 400 – Bad Request.",
                  "type": "text"
                }
              ],
              "type": "strong"
            },
            {
              "text": " This error typically indicates a formatting issue.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Review your request to ensure the request body isn’t empty and contains all",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "required parameters.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "inlineContent": [
                {
                  "text": "Error: 404 – Not Found.",
                  "type": "text"
                }
              ],
              "type": "strong"
            },
            {
              "text": " When you begin the Apple Pay session,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Apple responds with an ",
              "type": "text"
            },
            {
              "code": "onvalidatemerchant",
              "type": "codeVoice"
            },
            {
              "text": " callback that includes",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "a ",
              "type": "text"
            },
            {
              "code": "validationURL",
              "type": "codeVoice"
            },
            {
              "text": ".",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "This ",
              "type": "text"
            },
            {
              "code": "validationURL",
              "type": "codeVoice"
            },
            {
              "text": " is the endpoint your server must use to validate itself",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "and obtain a merchant session object.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If you receive this error,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "make sure you are sending the payload to the exact URL provided in the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "code": "validationURL",
              "type": "codeVoice"
            },
            {
              "text": " field.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Use a strict allow list for the merchant validation URLs.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Send the payment session request from your server;",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "never request the session from the client.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "inlineContent": [
                {
                  "text": "Error: 417 – Expectation Failed.",
                  "type": "text"
                }
              ],
              "type": "strong"
            },
            {
              "text": " The merchant ID is either not registered",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "for Apple Pay service or not registered for the domain.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If you receive this error,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "navigate to your Apple Developer account and confirm the following:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "You are passing the correct merchant ID,",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "which is associated to the merchant identity certificate,",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "within the request.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "There are both:",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                },
                {
                  "items": [
                    {
                      "content": [
                        {
                          "inlineContent": [
                            {
                              "text": "A fully configured payment processing certificate; and",
                              "type": "text"
                            }
                          ],
                          "type": "paragraph"
                        }
                      ]
                    },
                    {
                      "content": [
                        {
                          "inlineContent": [
                            {
                              "text": "A merchant identity certificate associated with the merchant ID.",
                              "type": "text"
                            }
                          ],
                          "type": "paragraph"
                        }
                      ]
                    }
                  ],
                  "type": "unorderedList"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Your domain is registered and completed merchant domain",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "verification successfully.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The ",
                      "type": "text"
                    },
                    {
                      "code": "initiativeContext",
                      "type": "codeVoice"
                    },
                    {
                      "text": " value is identical to the domain registered for your",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Apple Developer account.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "Ensure the value provided in the ",
              "type": "text"
            },
            {
              "code": "initiativeContext",
              "type": "codeVoice"
            },
            {
              "text": " request parameter is",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "identical to the merchant ID registered for your Apple Developer account.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If you have multiple merchant IDs,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "ensure the domain is registered to the same merchant ID associated with the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "merchant identity certificate used to secure the request.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The ",
              "type": "text"
            },
            {
              "code": "initiativeContext",
              "type": "codeVoice"
            },
            {
              "text": " value should include subdomains, but shouldn’t",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "contain the URL scheme (e.g. ",
              "type": "text"
            },
            {
              "code": "https://",
              "type": "codeVoice"
            },
            {
              "text": ") or any paths. For example:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "Valid:",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "code": "\"secure.example.com\"",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "Invalid:",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "code": "\"https://secure.example.com/request-session\"",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "If you plan to process payments on a root domain and subdomain—for example,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "code": "example.com",
              "type": "codeVoice"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "code": "test.example.com",
              "type": "codeVoice"
            },
            {
              "text": "—register and verify",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "each domain.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "Apple considers ",
                  "type": "text"
                },
                {
                  "code": "www.",
                  "type": "codeVoice"
                },
                {
                  "text": " a subdomain, so if you plan to process payments",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "for ",
                  "type": "text"
                },
                {
                  "code": "example.com",
                  "type": "codeVoice"
                },
                {
                  "text": ", but customers can access your site at ",
                  "type": "text"
                },
                {
                  "code": "www.example.com",
                  "type": "codeVoice"
                },
                {
                  "text": ",",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "you may need to ensure you register and verify both domains.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "inlineContent": [
                {
                  "text": "Error 500 – Internal Server Error.",
                  "type": "text"
                }
              ],
              "type": "strong"
            },
            {
              "text": " This error indicates the request",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "couldn’t be processed, or the request body is malformed or invalid.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Please ensure your request body is a valid JSON.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Troubleshooting-merchant-validation-issues",
          "level": 3,
          "text": "Troubleshooting merchant validation issues",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The following topics provide guidance on resolving issues when debugging",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Apple Pay merchant validation.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "The most common merchant validation issues occur during your payment session,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "including:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Mishandling of payment session merchant validation events.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Requesting a payment session with invalid certificates or values.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Failure to complete merchant validation on a payment session.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "To learn more about validating sessions and your merchant payment requests,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "see ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/requesting_an_apple_pay_payment_session",
              "isActive": true,
              "overridingTitle": "Requesting an Apple Pay Payment Session",
              "overridingTitleInlineContent": [
                {
                  "text": "Requesting an Apple Pay Payment Session",
                  "type": "text"
                }
              ],
              "type": "reference"
            },
            {
              "text": " for more information.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Issue-Mishandling-of-payment-session-merchant-validation-events",
          "level": 4,
          "text": "Issue: Mishandling of payment session merchant validation events",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When the ",
              "type": "text"
            },
            {
              "code": "onvalidatemerchant",
              "type": "codeVoice"
            },
            {
              "text": " event is triggered,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "your client-side code should ask your server to request an Apple Pay payment",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "session from Apple over an mTLS connection.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "The most common issues while handling merchant validation events occur when:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "You request an Apple Pay payment session from Apple.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "You invoke ",
                      "type": "text"
                    },
                    {
                      "code": "completeMerchantValidation",
                      "type": "codeVoice"
                    },
                    {
                      "text": " after successfully receiving",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "a payment session from Apple.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "Please ensure your implementation is following the expected flows for these",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "merchant validation events. For more information,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "see ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/providing_merchant_validation",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Issue-Requesting-a-payment-session-with-invalid-certificates-or-values",
          "level": 4,
          "text": "Issue: Requesting a payment session with invalid certificates or values.",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "You should create a new Apple Pay payment session for each transaction for",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "your merchant.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Your server posts a request using a mutual TLS (mTLS) connection by calling the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Apple Pay server’s ",
              "type": "text"
            },
            {
              "code": "/paymentSession",
              "type": "codeVoice"
            },
            {
              "text": " endpoint.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Please confirm the following are true for your payment session request:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The merchant identity certificate — a TLS certificate",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "associated with your merchant ID — is used to authenticate your requests.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The ",
                      "type": "text"
                    },
                    {
                      "code": "merchantIdentifier",
                      "type": "codeVoice"
                    },
                    {
                      "text": " request parameter matches the same merchant ID value.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "For Apple Pay on the Web, use ",
                      "type": "text"
                    },
                    {
                      "code": "\"web\"",
                      "type": "codeVoice"
                    },
                    {
                      "text": " for the ",
                      "type": "text"
                    },
                    {
                      "code": "intiative",
                      "type": "codeVoice"
                    },
                    {
                      "text": " parameter.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "For the ",
                      "type": "text"
                    },
                    {
                      "code": "initiativeContext",
                      "type": "codeVoice"
                    },
                    {
                      "text": " parameter, provide your fully qualified domain name",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "associated with your Merchant Identity Certificate.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "In resposne to the ",
              "type": "text"
            },
            {
              "code": "POST",
              "type": "codeVoice"
            },
            {
              "text": " request, your server receives an opaque Apple Pay session",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "object.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "The session expires after five (5) minutes.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "For Apple Pay on the WEb, you pass the session object to the completion method,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "code": "completeMerchantValidation",
              "type": "codeVoice"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Issue-Failure-to-complete-merchant-validation",
          "level": 4,
          "text": "Issue: Failure to complete merchant validation",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "If you are able to successfully generate a payment session but encounter issues",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "when you pass this session into ",
              "type": "text"
            },
            {
              "code": "completeMerchantValidation",
              "type": "codeVoice"
            },
            {
              "text": ",",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "this suggests one of a few potential issues:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "The session data is not formatted as a JSON Object.",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": "",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "The ",
                      "type": "text"
                    },
                    {
                      "code": "completeMerchantValidation",
                      "type": "codeVoice"
                    },
                    {
                      "text": " method does not support this data in string format;",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "the data must be parsed as a JSON object before it can be successfully passed",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "to the completion method.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "The session data is incomplete or has been modified.",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": "",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "You should treat the payment session data you receive as ",
                      "type": "text"
                    },
                    {
                      "inlineContent": [
                        {
                          "text": "opaque",
                          "type": "text"
                        }
                      ],
                      "type": "emphasis"
                    },
                    {
                      "text": " and should not",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "modify or change any of its contents.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "The contents or format of this data can change periodically,",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "so it’s better to mapping this data to a strongly-typed object while it",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "is in transit through your server and passed to your client-side code.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "The ",
                          "type": "text"
                        },
                        {
                          "code": "initiativeContext",
                          "type": "codeVoice"
                        },
                        {
                          "text": " for the session does not match the browser domain",
                          "type": "text"
                        },
                        {
                          "text": " ",
                          "type": "text"
                        },
                        {
                          "text": "or is not correctly formatted.",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": "",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "The value provided as the ",
                      "type": "text"
                    },
                    {
                      "code": "initiativeContext",
                      "type": "codeVoice"
                    },
                    {
                      "text": " in the payment session request",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "should exactly match the domain shown in the browser’s address bar.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "The ",
                      "type": "text"
                    },
                    {
                      "code": "initiativeContext",
                      "type": "codeVoice"
                    },
                    {
                      "text": " value should include subdomains but should not contain",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "the URL scheme (e.g. ",
                      "type": "text"
                    },
                    {
                      "code": "https://",
                      "type": "codeVoice"
                    },
                    {
                      "text": ") or any paths.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "You are mixing environments.",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " Ensure you are using the correct",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "code": "merchantIdentifier",
                      "type": "codeVoice"
                    },
                    {
                      "text": " and ",
                      "type": "text"
                    },
                    {
                      "code": "intiativeContext",
                      "type": "codeVoice"
                    },
                    {
                      "text": " for the environment you are",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "requesting a payment session from (Sandbox or Production).",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "anchor": "Possible-reasons-why-the-payment-sheet-dismisses-after-initial-presentation",
          "level": 2,
          "text": "Possible reasons why the payment sheet dismisses after initial presentation",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When the Apple Pay payment sheet is presented but dismisses within a few seconds",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "— for example, after the customer has clicked or tapped the Apple Pay button —",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "typically one of the following issues has occurred:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Merchant validation failed.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "At least one of the payment sheet event handler methods is implemented,",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "but the equivalent completion method isn’t properly configured.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "To determine if this payment sheet dismissal is due to a merchant",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "validation failure,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "use ",
              "type": "text"
            },
            {
              "identifier": "https://webkit.org/web-inspector/enabling-web-inspector/",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " to log errors and objects when debugging",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "merchant validation.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Otherwise,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "please ensure the object passed to the event’s completion method is well-formed,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "contains valid data, and all required parameters.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "For Apple Pay, each event handler has a thirty (30) second timeout.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If the related completion method is not invoked within 30 seconds from the start",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "of the event,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the payment sheet will dismiss with an error.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "When the customer changes or updates fields on the payment sheet,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "their selections are shared through event handlers,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "allowing your website to respond to user input.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "For example, for any of the customer-selected payment methods on",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the W3C ",
              "type": "text"
            },
            {
              "code": "PaymentRequest",
              "type": "codeVoice"
            },
            {
              "text": " object",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "— such as ",
              "type": "text"
            },
            {
              "code": "shippingaddresschange",
              "type": "codeVoice"
            },
            {
              "text": " —",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "when the browser calls one of these event handlers,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "you have 30 seconds to process the event and invoke the equivalent",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "code": "updateWith",
              "type": "codeVoice"
            },
            {
              "text": " callback.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Ensure any server requests to validate the shipping address occur within this",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "30-second period.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "For more information about using the W3C Payment Request API,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "see ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/payment_request_api/setting_up_the_payment_request_api_to_accept_apple_pay",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "For the ",
                  "type": "text"
                },
                {
                  "code": "onpaymentauthorized",
                  "type": "codeVoice"
                },
                {
                  "text": " event,",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "if your system takes longer than 30 seconds to process the payment,",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "the customer may see the payment sheet dismiss with an error,",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "even though you may eventually process the payment successfully.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Important",
          "style": "important",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "text": "If the payment sheet dismisses without user interaction,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "please confirm the following:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Your event handler implementations invoke the equivalent completion method.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Do not stub out any of these event handler or completion methods.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Your event handler implementations don’t take longer than 30 seconds to execute.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Check for any long-running operations in your client or server code that may",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "prevent the completion methods from returning in a timely manner.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Your event handler implementations aren’t triggering an exception, breakpoint,",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "or error,",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "preventing the equivalent completion methods invocation.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The object provided to the completion handler is a well-formed and valid",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "JSON object.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Validate the structure outlined in the documentation for each event’s",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "completion method.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Additionally, ensure all required parameters are populated correctly.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "text": "Use Safari Web Inspector to identify which event handler completion",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "method is related to an issue and then diagnose the underlying cause of the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "issue for that specific event,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "including both the event handler and completion method.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Possible-reasons-why-the-payment-sheet-dismisses-after-customer-authentication",
          "level": 2,
          "text": "Possible reasons why the payment sheet dismisses after customer authentication",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "You may experience situations where the payment sheet does not display a successful",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "payment confirmation (the “Done” checkmark) after payment authentication,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "even though the transaction itself may have been successful.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "When this occurs, you have most likely failed to send a successful payment",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "response back to Apple.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Revision-History",
          "level": 2,
          "text": "Revision History",
          "type": "heading"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "2024-06-25",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " First published.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "doc://com.apple.technotes/documentation/Technotes": {
      "abstract": [
        {
          "text": "Learn about specific development topics through these in-depth technical articles.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes",
      "kind": "article",
      "role": "collection",
      "title": "Technotes",
      "type": "topic",
      "url": "/documentation/technotes"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3111-ios-wifi-api-overview": {
      "abstract": [
        {
          "text": "Explore the various Wi-Fi APIs available on iOS and their expected use cases.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3111-ios-wifi-api-overview",
      "kind": "article",
      "role": "article",
      "title": "TN3111: iOS Wi-Fi API overview",
      "type": "topic",
      "url": "/documentation/technotes/tn3111-ios-wifi-api-overview"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3124-debugging-coordinate-transformations": {
      "abstract": [
        {
          "text": "Learn techniques to help debug any coordinate space issue.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3124-debugging-coordinate-transformations",
      "kind": "article",
      "role": "article",
      "title": "TN3124: Debugging coordinate space issues",
      "type": "topic",
      "url": "/documentation/technotes/tn3124-debugging-coordinate-transformations"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3158-resolving-xcode-15-device-connection-issues": {
      "abstract": [
        {
          "text": "Identify software preventing Xcode 15 from connecting to Apple devices, and modify your configuration to allow these connections.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3158-resolving-xcode-15-device-connection-issues",
      "kind": "article",
      "role": "article",
      "title": "TN3158: Resolving Xcode 15 device connection issues",
      "type": "topic",
      "url": "/documentation/technotes/tn3158-resolving-xcode-15-device-connection-issues"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3168-making-your-app-clip-available-app-store": {
      "abstract": [
        {
          "text": "Learn how to configure your App Clip to prevent it from being unavailable in the App Store.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3168-making-your-app-clip-available-app-store",
      "kind": "article",
      "role": "article",
      "title": "TN3168: Making your App Clip available in the App Store",
      "type": "topic",
      "url": "/documentation/technotes/tn3168-making-your-app-clip-available-app-store"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3173-troubleshooting-issues-with-your-apple-pay-merchant-id-configuration": {
      "abstract": [
        {
          "text": "Diagnose errors due to invalid Apple Pay merchant identifier configurations by",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "identifying the underlying causes of common errors and explore their",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "potential solutions.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3173-troubleshooting-issues-with-your-apple-pay-merchant-id-configuration",
      "kind": "article",
      "role": "article",
      "title": "TN3173: Troubleshooting issues with your Apple Pay merchant identifier configuration",
      "type": "topic",
      "url": "/documentation/technotes/tn3173-troubleshooting-issues-with-your-apple-pay-merchant-id-configuration"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website#Troubleshooting-invalid-server-configurations": {
      "abstract": [],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website#Troubleshooting-invalid-server-configurations",
      "kind": "section",
      "title": "Troubleshooting invalid server configurations",
      "type": "topic",
      "url": "/documentation/technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website#Troubleshooting-invalid-server-configurations"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3175-diagnosing-issues-with-displaying-the-apple-pay-button-on-your-website": {
      "abstract": [
        {
          "text": "Diagnose common errors received while displaying the Apple Pay button on your",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "website by identifying the underlying causes, and explore potential solutions.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3175-diagnosing-issues-with-displaying-the-apple-pay-button-on-your-website",
      "kind": "article",
      "role": "article",
      "title": "TN3175: Diagnosing issues with displaying the Apple Pay button on your website",
      "type": "topic",
      "url": "/documentation/technotes/tn3175-diagnosing-issues-with-displaying-the-apple-pay-button-on-your-website"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3176-troubleshooting-apple-pay-payment-processing-issues": {
      "abstract": [
        {
          "text": "Diagnose errors that occur when processing Apple Pay payments,",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "identify common causes, and explore potential solutions.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3176-troubleshooting-apple-pay-payment-processing-issues",
      "kind": "article",
      "role": "article",
      "title": "TN3176: Troubleshooting Apple Pay payment processing issues",
      "type": "topic",
      "url": "/documentation/technotes/tn3176-troubleshooting-apple-pay-payment-processing-issues"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files": {
      "abstract": [
        {
          "text": "Learn how alternate groups collect audio tracks, and how to choose which audio track to use in your app.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files",
      "kind": "article",
      "role": "article",
      "title": "TN3177: Understanding alternate audio track groups in movie files",
      "type": "topic",
      "url": "/documentation/technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3178-checking-for-and-resolving-build-uuid-problems": {
      "abstract": [
        {
          "text": "Ensure that every Mach-O image has a UUID, and that every distinct Mach-O image has its own unique UUID.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3178-checking-for-and-resolving-build-uuid-problems",
      "kind": "article",
      "role": "article",
      "title": "TN3178: Checking for and resolving build UUID problems",
      "type": "topic",
      "url": "/documentation/technotes/tn3178-checking-for-and-resolving-build-uuid-problems"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3179-understanding-local-network-privacy": {
      "abstract": [
        {
          "text": "Learn how local network privacy affects your software.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3179-understanding-local-network-privacy",
      "kind": "article",
      "role": "article",
      "title": "TN3179: Understanding local network privacy",
      "type": "topic",
      "url": "/documentation/technotes/tn3179-understanding-local-network-privacy"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3180-reverting-app-store-server-notifications-v1": {
      "abstract": [
        {
          "text": "Migrate from version 2 to version 1 of App Store Server Notifications using the Modify an App endpoint.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3180-reverting-app-store-server-notifications-v1",
      "kind": "article",
      "role": "article",
      "title": "TN3180: Reverting to App Store Server Notifications V1",
      "type": "topic",
      "url": "/documentation/technotes/tn3180-reverting-app-store-server-notifications-v1"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3181-debugging-invalid-privacy-manifest": {
      "abstract": [
        {
          "text": "Identify common configurations that cause unsuccessful privacy manifest validation with the App Store.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3181-debugging-invalid-privacy-manifest",
      "kind": "article",
      "role": "article",
      "title": "TN3181: Debugging an invalid privacy manifest",
      "type": "topic",
      "url": "/documentation/technotes/tn3181-debugging-invalid-privacy-manifest"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest": {
      "abstract": [
        {
          "text": "Declare the tracking domains you use in your app or third-party SDK in a privacy manifest.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest",
      "kind": "article",
      "role": "article",
      "title": "TN3182: Adding privacy tracking keys to your privacy manifest",
      "type": "topic",
      "url": "/documentation/technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3183-adding-required-reason-api-entries-to-your-privacy-manifest": {
      "abstract": [
        {
          "text": "Declare the APIs that can potentially fingerprint devices in your app or third-party SDK in a privacy manifest.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3183-adding-required-reason-api-entries-to-your-privacy-manifest",
      "kind": "article",
      "role": "article",
      "title": "TN3183: Adding required reason API entries to your privacy manifest",
      "type": "topic",
      "url": "/documentation/technotes/tn3183-adding-required-reason-api-entries-to-your-privacy-manifest"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3184-adding-data-collection-details-to-your-privacy-manifest": {
      "abstract": [
        {
          "text": "Declare the data your app or third-party SDK collects in a privacy manifest.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3184-adding-data-collection-details-to-your-privacy-manifest",
      "kind": "article",
      "role": "article",
      "title": "TN3184: Adding data collection details to your privacy manifest",
      "type": "topic",
      "url": "/documentation/technotes/tn3184-adding-data-collection-details-to-your-privacy-manifest"
    },
    "https://developer.apple.com/account/resources": {
      "identifier": "https://developer.apple.com/account/resources",
      "title": "Certificates, Identifiers & Profiles",
      "titleInlineContent": [
        {
          "text": "Certificates, Identifiers & Profiles",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/account/resources"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/providing_merchant_validation": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/providing_merchant_validation",
      "title": "Providing Merchant Validation",
      "titleInlineContent": [
        {
          "text": "Providing Merchant Validation",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/providing_merchant_validation"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/requesting_an_apple_pay_payment_session": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/requesting_an_apple_pay_payment_session",
      "title": "Requesting an Apple Pay Payment Session",
      "titleInlineContent": [
        {
          "text": "Requesting an Apple Pay Payment Session",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/requesting_an_apple_pay_payment_session"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymentrequest/2216121-requiredshippingcontactfields": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymentrequest/2216121-requiredshippingcontactfields",
      "title": "requiredShippingContactFields",
      "titleInlineContent": [
        {
          "code": "requiredShippingContactFields",
          "type": "codeVoice"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaypaymentrequest/2216121-requiredshippingcontactfields"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepayrequest/2951611-merchantidentifier": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepayrequest/2951611-merchantidentifier",
      "title": "merchantIdentifier",
      "titleInlineContent": [
        {
          "code": "merchantIdentifier",
          "type": "codeVoice"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepayrequest/2951611-merchantidentifier"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1777995-completepaymentmethodselection": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1777995-completepaymentmethodselection",
      "title": "completePaymentMethodSelection",
      "titleInlineContent": [
        {
          "code": "completePaymentMethodSelection",
          "type": "codeVoice"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1777995-completepaymentmethodselection"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778009-onshippingcontactselected": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778009-onshippingcontactselected",
      "title": "onshippingcontactselected",
      "titleInlineContent": [
        {
          "code": "onshippingcontactselected",
          "type": "codeVoice"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778009-onshippingcontactselected"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778012-completepayment": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778012-completepayment",
      "title": "completePayment",
      "titleInlineContent": [
        {
          "code": "completePayment",
          "type": "codeVoice"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778012-completepayment"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778013-onpaymentmethodselected": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778013-onpaymentmethodselected",
      "title": "onpaymentmethodselected",
      "titleInlineContent": [
        {
          "code": "onpaymentmethodselected",
          "type": "codeVoice"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778013-onpaymentmethodselected"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778015-completemerchantvalidation": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778015-completemerchantvalidation",
      "title": "completeMerchantValidation",
      "titleInlineContent": [
        {
          "code": "completeMerchantValidation",
          "type": "codeVoice"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778015-completemerchantvalidation"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778020-onpaymentauthorized": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778020-onpaymentauthorized",
      "title": "onpaymentauthorized",
      "titleInlineContent": [
        {
          "code": "onpaymentauthorized",
          "type": "codeVoice"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778020-onpaymentauthorized"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778021-onvalidatemerchant": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778021-onvalidatemerchant",
      "title": "onvalidatemerchant",
      "titleInlineContent": [
        {
          "code": "onvalidatemerchant",
          "type": "codeVoice"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepaysession/1778021-onvalidatemerchant"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/configuring_your_environment": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/configuring_your_environment",
      "title": "Configuring Your Environment",
      "titleInlineContent": [
        {
          "text": "Configuring Your Environment",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/configuring_your_environment"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/payment_request_api/setting_up_the_payment_request_api_to_accept_apple_pay": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/payment_request_api/setting_up_the_payment_request_api_to_accept_apple_pay",
      "title": "Setting up the payment request API to accept Apple Pay",
      "titleInlineContent": [
        {
          "text": "Setting up the payment request API to accept Apple Pay",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/payment_request_api/setting_up_the_payment_request_api_to_accept_apple_pay"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server",
      "title": "Setting up your Server",
      "titleInlineContent": [
        {
          "text": "Setting up your Server",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server"
    },
    "https://developer.apple.com/documentation/network/recording_a_packet_trace": {
      "identifier": "https://developer.apple.com/documentation/network/recording_a_packet_trace",
      "title": "record a packet trace",
      "titleInlineContent": [
        {
          "text": "record a packet trace",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/network/recording_a_packet_trace"
    },
    "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay#create-a-merchant-identifier": {
      "identifier": "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay#create-a-merchant-identifier",
      "title": "registered",
      "titleInlineContent": [
        {
          "text": "registered",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay#create-a-merchant-identifier"
    },
    "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay#create-a-payment-processing-certificate": {
      "identifier": "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay#create-a-payment-processing-certificate",
      "title": "payment processing certificate",
      "titleInlineContent": [
        {
          "text": "payment processing certificate",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay#create-a-payment-processing-certificate"
    },
    "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay-on-the-web#create-a-merchant-identity-certificate": {
      "identifier": "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay-on-the-web#create-a-merchant-identity-certificate",
      "title": "merchant identity certificate",
      "titleInlineContent": [
        {
          "text": "merchant identity certificate",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/help/account/configure-app-capabilities/configure-apple-pay-on-the-web#create-a-merchant-identity-certificate"
    },
    "https://developer.apple.com/videos/play/tech-talks/111381/": {
      "identifier": "https://developer.apple.com/videos/play/tech-talks/111381/",
      "title": "Getting started with Apple Pay on the Web",
      "titleInlineContent": [
        {
          "text": "Getting started with Apple Pay on the Web",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/videos/play/tech-talks/111381/"
    },
    "https://webkit.org/web-inspector/enabling-web-inspector/": {
      "identifier": "https://webkit.org/web-inspector/enabling-web-inspector/",
      "title": "Safari Web Inspector",
      "titleInlineContent": [
        {
          "text": "Safari Web Inspector",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://webkit.org/web-inspector/enabling-web-inspector/"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Latest",
      "generated": true,
      "identifiers": [
        "doc://com.apple.technotes/documentation/Technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest",
        "doc://com.apple.technotes/documentation/Technotes/tn3183-adding-required-reason-api-entries-to-your-privacy-manifest",
        "doc://com.apple.technotes/documentation/Technotes/tn3184-adding-data-collection-details-to-your-privacy-manifest",
        "doc://com.apple.technotes/documentation/Technotes/tn3181-debugging-invalid-privacy-manifest",
        "doc://com.apple.technotes/documentation/Technotes/tn3180-reverting-app-store-server-notifications-v1",
        "doc://com.apple.technotes/documentation/Technotes/tn3179-understanding-local-network-privacy",
        "doc://com.apple.technotes/documentation/Technotes/tn3178-checking-for-and-resolving-build-uuid-problems",
        "doc://com.apple.technotes/documentation/Technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files",
        "doc://com.apple.technotes/documentation/Technotes/tn3111-ios-wifi-api-overview",
        "doc://com.apple.technotes/documentation/Technotes/tn3176-troubleshooting-apple-pay-payment-processing-issues",
        "doc://com.apple.technotes/documentation/Technotes/tn3175-diagnosing-issues-with-displaying-the-apple-pay-button-on-your-website",
        "doc://com.apple.technotes/documentation/Technotes/tn3173-troubleshooting-issues-with-your-apple-pay-merchant-id-configuration",
        "doc://com.apple.technotes/documentation/Technotes/tn3168-making-your-app-clip-available-app-store",
        "doc://com.apple.technotes/documentation/Technotes/tn3124-debugging-coordinate-transformations",
        "doc://com.apple.technotes/documentation/Technotes/tn3158-resolving-xcode-15-device-connection-issues"
      ],
      "title": "Latest"
    }
  ]
}

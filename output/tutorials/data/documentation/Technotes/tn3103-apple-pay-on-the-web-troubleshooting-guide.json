{
  "abstract": [
    {
      "text": "Troubleshooting guide for implementing Apple Pay on the Web.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.technotes/documentation/Technotes"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "swift",
    "url": "doc://com.apple.technotes/documentation/Technotes/tn3103-apple-pay-on-the-web-troubleshooting-guide"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "role": "article",
    "roleHeading": "Article",
    "title": "TN3103: Apple Pay on the Web troubleshooting guide"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "Overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "This document is intended to be used as a general guide to debugging common issues",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "with Apple Pay on the Web. Note that this document does not cover third-party tooling",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "or integrations. If you are experiencing issues with third-party code, libraries,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "or server side configurations, you will need to talk to these vendors directly.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "This document assumes that you are building Apple Pay on the Web from your own",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "website and then integrating with a third-party Payment Service Provider.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Creating-merchant-assets",
          "level": 2,
          "text": "Creating merchant assets",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Your Developer Account registers a Merchant by creating a new Merchant Identifier",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "(Merchant ID) in Certificates, Identifiers & Profiles. A Merchant ID is the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "unique identifier for your Merchant Domain, Merchant Identity Certificate,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Payment Processing Certificate, and Merchant Assets. A Merchant ID will be in",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "reverse-DNS format: ",
              "type": "text"
            },
            {
              "code": "merchant.com.testbed.applepay",
              "type": "codeVoice"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "If you are working with a Payment Service Provider who can give you access to Apple Pay without an Apple Developer Account, the process outlined below will be different and you should contact the the Payment Service Provider for additional help on configuring your Merchant Assets.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "text": "After you have created your Merchant Identifier you will need to create a Payment",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Processing Certificate using a 256-bit ECC key pair. However, if you are using a",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "third-party Payment Service Provider, they may provide this certificate for you.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If so, skip to Step 2 below.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Create-a-payment-processing-identity",
          "level": 3,
          "text": "Create a payment processing identity",
          "type": "heading"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "On your Mac, launch Keychain Access to create a ",
                      "type": "text"
                    },
                    {
                      "identifier": "https://help.apple.com/developer-account/#/devbfa00fef7?sub=devf31990e3f",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": "",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "(CSR).",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Upload this CSR to the Merchant Configuration page to generate a Payment",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Processing Certificate.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Create a Payment Processing Identity (p12 / key and cert) by downloading the",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "generated Payment Processing Certificate and installing it into the Keychain on",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "the same Mac used to create the initial CSR.  If you created the CSR outside",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "of a Mac then the key and certificate will need to be stored on the device the",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "CSR was created. ",
                      "type": "text"
                    },
                    {
                      "inlineContent": [
                        {
                          "text": "Important",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": ": Do not lose this Payment Processing Identity,",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "because it will be used by your Payment Processor.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "orderedList"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The process described here details a situation where you, as the Developer, are setting up the Merchant Assets. It could also be the case that your Payment Service Provider creates the CSR and gives it to you, the Merchant, to upload to the Merchant ID Configuration page to generate a Payment Certificate. The benefit of this workflow is you would not need to export your Payment Processing Identity from your Keychain to provide it to the Payment Processor, they would already have the required private key from the CSR that they had previously generated.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "anchor": "Create-a-merchant-identity-certificate",
          "level": 3,
          "text": "Create a merchant identity certificate",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "In the Merchant ID Configuration page under your Merchant Identifier, you",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "will need to create a ",
              "type": "text"
            },
            {
              "identifier": "https://help.apple.com/developer-account/#/dev1731126fb",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": "",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "in the same place you created the Payment Processing Certificate.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "On your Mac, launch Keychain Access to create a ",
                      "type": "text"
                    },
                    {
                      "identifier": "https://help.apple.com/developer-account/#/devbfa00fef7?sub=devf31990e3f",
                      "isActive": true,
                      "overridingTitle": "certificate signing request",
                      "overridingTitleInlineContent": [
                        {
                          "text": "certificate signing request",
                          "type": "text"
                        }
                      ],
                      "type": "reference"
                    },
                    {
                      "text": "",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "(CSR) with an RSA 2048-bit RSA key pair.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Upload this CSR to the Merchant Configuration page to generate a Merchant",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Identity Certificate.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Create a Merchant Identity (p12 / key and cert) by downloading the generated",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Payment Merchant Certificate and installing it into the Keychain on the same Mac",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "used to create the initial CSR. If you created the CSR outside of a Mac then the",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "key and certificate will need to be stored on the device the CSR was created.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "orderedList"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A CSR does not have to be created in the Keychain of a macOS computer. A CSR can technically be created from an external source such as a server, another workstation, or from your Payment Service Provider, with a tool like OpenSSL.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "text": "The important thing to remember is that when a CSR is created, so is a private key.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "After uploading the CSR to the Apple Developer Portal and receiving a certificate,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "you will need to store the certificate and the private key in a secure location",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "so that a PKCS#12 (or p12) can be created from both the private key and certificate.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "The Keychain on macOS does this for you and so you do not have to worry about",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "it, but if using an external tool, you will need to do this by hand. The",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "creation of a p12 from a private key and certificate is what makes up a digital",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "identity, and this is what is used to authenticate your team as a Merchant to",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the Apple Pay servers. For example, the creation of a Merchant Identity in the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "form of a p12, or a stacked PEM, contains your private key and Merchant Certificate.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "These assets that are tied to your Merchant account are then used to perform client",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "authentication when requesting a payment session from the Apple Pay servers.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "It is important that the digital identity in this context be correctly formatted",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "and stored in a secure location if created outside of macOS. If you do end up",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "creating this identity outside macOS, you will be responsible for converting",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "certificate and private key into a format that can be used for Merchant Authentication.",
              "type": "text"
            },
            {
              "text": "\n",
              "type": "text"
            },
            {
              "text": "The Payment Processing Identity will be used to decrypt your payment tokens by",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "your Payment Processor.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Registering-a-merchant-domain",
          "level": 3,
          "text": "Registering a merchant domain",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "You will need to add a Merchant domain to your Merchant Identifier so",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "that your domain can process payments. You will need to register each domain",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "that you plan to process payments from. For example, if you plan to process",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "payments on ",
              "type": "text"
            },
            {
              "code": "example.com",
              "type": "codeVoice"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "code": "test.example.com",
              "type": "codeVoice"
            },
            {
              "text": " you will need to register",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "and verify each domain. Note, if you plan to process payments for",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "code": "example.com",
              "type": "codeVoice"
            },
            {
              "text": ", and you will actually be using ",
              "type": "text"
            },
            {
              "code": "www.example.com",
              "type": "codeVoice"
            },
            {
              "text": ", make sure to",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "include the fully qualified domain name (FQDN) in the registration process.",
              "type": "text"
            },
            {
              "text": "\n",
              "type": "text"
            },
            {
              "text": "An FQDN in this context would be ",
              "type": "text"
            },
            {
              "code": "www.example.com",
              "type": "codeVoice"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Domain-verification",
          "level": 2,
          "text": "Domain verification",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Once your domain is configured in the Merchant ID Configuration page for ",
              "type": "text"
            },
            {
              "code": "example.com",
              "type": "codeVoice"
            },
            {
              "text": ",",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "you will be asked to verify your domain with a ",
              "type": "text"
            },
            {
              "code": "apple-developer-merchantid-domain-association.txt",
              "type": "codeVoice"
            },
            {
              "text": "",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "file. On your server, download the file and place it in the ",
              "type": "text"
            },
            {
              "code": ".well-known",
              "type": "codeVoice"
            },
            {
              "text": " location:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "https://example.com/.well-known/apple-developer-merchantid-domain-association.txt"
          ],
          "syntax": "text",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "This file above will need to be placed at the root level of your server.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The domain verification file expires after ",
                  "type": "text"
                },
                {
                  "inlineContent": [
                    {
                      "text": "7 days",
                      "type": "text"
                    }
                  ],
                  "type": "strong"
                },
                {
                  "text": ", so if you",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "are not able to verify your domain after 7 days you will need to regenerate this",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "file and replace it on your server.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Important",
          "style": "important",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "text": "To perform domain verification, click the Verify button in the Merchant ID",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Configuration page to verify the domain. If all goes well, your domain should be",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "verified and show up as “Verified” in the Merchant ID Configuration page. If you",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "experience issues, please read further to resolve common reasons domain verification",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "fails.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Common-reasons-domain-verification-fails",
          "level": 2,
          "text": "Common reasons domain verification fails",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Domain verification can fail for many reasons.  Here are a few of the most common",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "reasons:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "TLS-handshake-cannot-be-established",
          "level": 3,
          "text": "TLS handshake cannot be established",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "There are many reasons why a TLS handshake can fail during the domain verification",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "process. For example, your server may be misconfigured in the following ways:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The server does not support TLS 1.2 or above",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The server does not support one of the specified cipher suites for Apple Pay",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "The server is using an invalid TLS certificate",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "anchor": "Supporting-TLS-12-or-above",
          "level": 4,
          "text": "Supporting TLS 1.2 or above",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Servers supporting Apple Pay on the Web need to being using TLS 1.2 or above.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Servers also need to be accessible by the domain verification client and not be",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "sitting behind a proxy.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Validating-usage-of-a-TLS-cipher-suite",
          "level": 4,
          "text": "Validating usage of a TLS cipher suite",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Servers negotiating TLS connections for Apple Pay on the Web need to use one of",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the supported cipher suites described in ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "To debug which cipher suites is being negotiated between Apple’s domain verification",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "client and your server, take a packet trace and take a look at the the cipher suites",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "being offered by Apple’s domain verification client in the ",
              "type": "text"
            },
            {
              "code": "Client Hello",
              "type": "codeVoice"
            },
            {
              "text": " packet.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If all goes well, you will be able to see one of the supported cipher suites being",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "selected by your server in the ",
              "type": "text"
            },
            {
              "code": "Server Hello",
              "type": "codeVoice"
            },
            {
              "text": " packet being sent back to the client.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If there is an issue in the cipher suite negotiation then there will typically be",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "a failure after the ",
              "type": "text"
            },
            {
              "code": "Client Hello",
              "type": "codeVoice"
            },
            {
              "text": " packet.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Validating-TLS-12-certificates",
          "level": 4,
          "text": "Validating TLS 1.2 certificates",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Make sure that you are using a valid TLS certificate. For example, make sure that",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "this certificate is setup with a proper chain of trust and also adheres to ",
              "type": "text"
            },
            {
              "identifier": "https://support.apple.com/en-us/HT205280",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": "",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "for Safari. You can double check this with a packet trace. Make sure the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "leaf certificate being used on your domain follows a correct chain of trust through",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the intermediate certificates to the root certificate.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "The-Apple-Developer-Portal-cannot-reach-your-server",
          "level": 3,
          "text": "The Apple Developer Portal cannot reach your server",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "One common problem is that the domain verification request seems to error out,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "but there is no apparent reason why this is happening. To debug this, try reviewing",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "your server’s access logs, or try setting your server application logs to be as",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "verbose as possible. Next, make sure that the domain verification request is reaching",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "your server. If the request is not reaching the server then you know there is an",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "issue with Apple’s domain verification client reaching your server. If the request",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "is reaching your server, and it is not a TLS issue, then your server side logs should",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "provide more insight here on where the issue is taking place.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Your-domain-sits-behind-a-proxy-or-in-a-private-network",
          "level": 3,
          "text": "Your domain sits behind a proxy or in a private network",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "One common issue is that a domain sits behind a network proxy or a load balancer",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "that is not correctly routing traffic. In the case of the proxy, this is problematic",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "because Apple’s domain verification client is trying to validate your domain",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "verification file, but also read client specific information about your TLS",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "certificate. When this request flows through a proxy it will pickup incorrect",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "information about your domain’s certificate because of the proxy.",
              "type": "text"
            },
            {
              "text": "\n",
              "type": "text"
            },
            {
              "text": "The proxy will need to be removed.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Domain verification issues for a server sitting behind a load balancer are not",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "common but can happen when the load balancer is routing traffic incorrectly. If",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "you think this is the case for network, double check the routing algorithm on",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "your load balancer to ensure that traffic always makes it to your server.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Lastly, if you domain sits inside of a private network and needs to be verified,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "make sure that Apple’s domain verification client IP addresses are allowed in your",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "network’s firewall. See more on these ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server#3179116",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Building-your-client-application",
          "level": 2,
          "text": "Building your client application",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Building the client application is done with either ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " or the ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/payment_request_api",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "This document will use examples from ApplePay JS. There are many paths you can take",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "here, but as a prerequisite, you need to first make sure that the browser supports",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Apple Pay. For more details on this see ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/checking_for_apple_pay_availability",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "After your application has verified that the browser supports Apple Pay, then it",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "is time to build out the payment workflow. For a complete step by step example of",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "how this is done, see the ",
              "type": "text"
            },
            {
              "identifier": "https://applepaydemo.apple.com",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "This demo includes sample code that outlines each step in the payment workflow,",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "and can come in handy when determining how to build your application.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "When building out your payment workflow you should consider how you will build",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "out your payment request. For example, in the ",
              "type": "text"
            },
            {
              "identifier": "https://applepaydemo.apple.com/#createAPayment",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": "",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "below, only the required information needed to completion the shopping cart",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "transaction is added, and this is the recommendation.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "    \"countryCode\": \"US\",",
            "    \"currencyCode\": \"USD\",",
            "    \"merchantCapabilities\": [",
            "        \"supports3DS\"",
            "    ],",
            "    \"supportedNetworks\": [",
            "        \"visa\",",
            "        \"masterCard\",",
            "        \"amex\",",
            "       \"discover\"",
            "    ],",
            "    \"total\": {",
            "        \"label\": \"Demo (Card is not charged)\",",
            "        \"type\": \"final\",",
            "        \"amount\": \"1.99\"",
            "    }",
            "}"
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "For example, if you are charging one flat fee for shipping, or are not charging",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "for shipping at all, then the following payment request would be sufficient.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "However, if you need to calculate transaction totals based on location or address",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "then you have two options. The first is to gather this shipping information as",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "part of your payment workflow before the payment request is created. That way you",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "have this information up front before the payment workflow. The second option is",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "to pass in information for ",
              "type": "text"
            },
            {
              "code": "requiredShippingContactFields",
              "type": "codeVoice"
            },
            {
              "text": " into your payment request:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "\"requiredShippingContactFields\": [",
            "    \"postalAddress\",",
            "    \"name\",",
            "    \"phone\",",
            "    \"email\"",
            "]"
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Using the ",
              "type": "text"
            },
            {
              "code": "requiredShippingContactFields",
              "type": "codeVoice"
            },
            {
              "text": " field tells the Apple Pay SDK that you",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "would like to receive redacted shipping and contact information to calculate",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "shipping and further fees on the transaction. These fields will show up in the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "code": "onshippingcontactselected",
              "type": "codeVoice"
            },
            {
              "text": " with just enough information to calculate shipping fees.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "onshippingcontactselected:",
            "{",
            "    \"administrativeArea\": \"CA\",",
            "    \"country\": \"United States\",",
            "    \"countryCode\": \"US\",",
            "    \"locality\": \"San Francisco\",",
            "    \"postalCode\": \"94114\"",
            "}",
            "// Note that you need to pass in a populated object here to `completeShippingContactSelection`",
            "session.onshippingcontactselected = event => {",
            "     // You will receive redacted shipping and contact info here.",
            "     const update = {};",
            "     // Construct update object to pass in below, do now pass in blank object.",
            "    // For example, `required ApplePayLineItem newTotal` is required in this case.",
            "    session.completeShippingContactSelection(update);",
            "};"
          ],
          "syntax": "javascript",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "After the transaction is authorized you will receive the complete shipping information.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Merchant-validation",
          "level": 2,
          "text": "Merchant validation",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "After the payment request is created your application will need to go through the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/providing_merchant_validation",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": "",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "to authenticate itself as a valid Merchant to process a transaction. Upon successful",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "authentication, your server will receive a payment session to submit with your",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "payment request to the Apple Pay SDK. This process is where most Apple Pay on",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the Web issues take place because there are a lot of moving parts. Here is an",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "overview of that process as well as suggestions on how to resolve common errors",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "in this workflow:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Call your server with the URL that your client side application received in",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepayvalidatemerchantevent/1778026-validationurl",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": ".",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "In this step your JavaScript client application will send an HTTPS request to your",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "server side application passing it the validationURL.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Your server side application will receive the HTTPS request from step one,",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "and use the validationURL to create a POST request to obtain a payment session",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "from the server to Apple’s servers. This is where your application uses the",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Merchant Identity Certificate to identify itself as a valid Merchant to the",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Apple Pay Servers. ",
                      "type": "text"
                    },
                    {
                      "inlineContent": [
                        {
                          "text": "DO NOT",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " make this request from your client side JavaScript",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "application as it will expose your private key. Make sure this request utilizes",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "the correct format of your p12/PEM to perform client authentication with the Apple",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "Pay servers. If you receive a TLS or SSL failure while making this request then",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "examine the format of the p12/PEM in this payment session request.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Once the Apple Pay server has a payment session it should respond to your server",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "with this session and your client application should pass the session into",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "code": "completeMerchantValidation(paymentSession);",
                      "type": "codeVoice"
                    },
                    {
                      "text": ".",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "orderedList"
        },
        {
          "inlineContent": [
            {
              "text": "Step two above is where a lot of issues take place. To validate that your",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "server side APIs are not causing an issue, you can test a payment session",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "request using CURL. Assuming that your Merchant Identity Certificate is in",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "your Keychain, export that as a p12 and extract the certificate/key in PEM format.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "$ openssl pkcs12 -in Certificates.p12 -out apple-pay-cert.pem -nodes -clcerts",
            ""
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Then use the CURL command to request a payment session by going around your server.",
              "type": "text"
            },
            {
              "text": "\n",
              "type": "text"
            },
            {
              "text": "If this works, then you know you have a server side API issue.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "$ curl -gv --data '{\"merchantIdentifier\":\"merchant.com.testbed.applepay\", \"initiativeContext\":\"example.com\", \"initiative\":\"web\", \"displayName\":\"Apple Pay Testbed\"}' --cert /path/to/pem/apple-pay-cert.pem https://apple-pay-gateway.apple.com/paymentservices/paymentSession"
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "code": [
            "{",
            "    \"merchantIdentifier\":\"merchant.com.testbed.applepay\",",
            "    \"initiativeContext\":\"example.com\",",
            "    \"initiative\":\"web\",",
            "    \"displayName\":\"Apple Pay Testbed\"",
            "}"
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "A successful response here will contain a valid JSON payload with a valid payment",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "session tied to your Merchant ID.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Payment-services-exception",
          "level": 3,
          "text": "Payment services exception",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "If you send a request to the Apple Pay servers to get a Payment Session, and come back",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "with a 400 server response error, the first thing you will want to do is check",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "that your request was formatted correctly. A 400 server response means “Bad Request.”",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "If the request looks fine, then you will want to double check the Merchant ID",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "and the Merchant Identity Certificate that are used on the request. Consider",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "this error:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "\"statusMessage\": \"Payment Services Exception merchantId=bdb3ed0005c72b1e8c2a536bb65a0ec22de030578c08b45dde6cdc13cd925f03 unauthorized to process transactions on behalf of merchantId=12953b72a8db15cf4a079b49a87ddd5eed1b0ba2eb249c7907265a7b04cff6ce reason=\\\"12953b72a8db15cf4a079b49a87ddd5eed1b0ba2eb249c7907265a7b04cff6ce never authorized mass enablement transactions to occur via bdb3ed0005c72b1e8c2a536bb65a0ec22de030578c08b45dde6cdc13cd925f03\\\"\",",
            "\"statusCode\": \"400\"",
            "}"
          ],
          "syntax": "json",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Now, this looks hard to read, but to debug this you need to check the ",
              "type": "text"
            },
            {
              "code": "merchantId=",
              "type": "codeVoice"
            },
            {
              "text": "",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "value against a ",
              "type": "text"
            },
            {
              "code": "sha256",
              "type": "codeVoice"
            },
            {
              "text": " hash of the Merchant ID to see if they match.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Looking at the hash of my Merchant ID for ",
              "type": "text"
            },
            {
              "code": "merchant.com.testbed.applepay",
              "type": "codeVoice"
            },
            {
              "text": ":",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "echo -n \"merchant.com.testbed.applepay\" | shasum -a 256",
            "12953b72a8db15cf4a079b49a87ddd5eed1b0ba2eb249c7907265a7b04cff6ce "
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "It looks like something went wrong with the Merchant ID that was used in this",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "request. In this case go back and check the Merchant ID used in the payment session",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "request.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "completeMerchantValidation-fails",
          "level": 3,
          "text": "completeMerchantValidation fails",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "If you pass a valid payment session into ",
              "type": "text"
            },
            {
              "code": "completeMerchantValidation",
              "type": "codeVoice"
            },
            {
              "text": " and receive",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "an error, there are a few things you can try:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Isolate the issue to a device that is being used for Sandbox testing.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "For example, make sure you only have a Sandbox test user signed into a device",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "and that you are using the device only for a Sandbox test account. Do not mix",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "production and Sandbox cards and accounts. ",
                      "type": "text"
                    },
                    {
                      "identifier": "https://developer.apple.com/apple-pay/sandbox-testing/",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": ".",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Make sure the test device is properly authenticating the transaction",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "with Face ID, Touch ID, or watchOS confirmation.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "If you continue to have trouble, and can reproduce this issue on macOS, try logging",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "the events from ",
                      "type": "text"
                    },
                    {
                      "code": "passd",
                      "type": "codeVoice"
                    },
                    {
                      "text": " when the issue is reproduced on macOS with Safari.",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "For example, on macOS, open two terminal windows and run each of these commands",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "in separate Terminal windows:",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "orderedList"
        },
        {
          "code": [
            "$ log stream --level debug --predicate 'process == \"passd\"'",
            "$ log stream --level debug --predicate 'subsystem == \"com.apple.passkit”'"
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Then reproduce your issue in Safari on macOS. Typically you will see logs that",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "end up like this from these daemons:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "com.apple.PassKit.PaymentAuthorizationUIExtension: (PassKitCore) [com.apple.passkit:Payment] ",
            "Evaluating merchant session using PROD trust policy.",
            "",
            "com.apple.PassKit.PaymentAuthorizationUIExtension: (PassKitCore) [com.apple.passkit:Payment] ",
            "Application failed to provide a valid merchant session. We can't proceed to authorize the transaction."
          ],
          "syntax": null,
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "There are a few different reasons these errors can happen:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "A request for a payment session contains a domain other than what is being",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "tested on. For example, testing on ",
                      "type": "text"
                    },
                    {
                      "code": "www.example.com",
                      "type": "codeVoice"
                    },
                    {
                      "text": " and the request",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "a payment session request is being sent for ",
                      "type": "text"
                    },
                    {
                      "code": "staging.example.com",
                      "type": "codeVoice"
                    },
                    {
                      "text": ".",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "A Merchant Session is considered to have a bad signature because of",
                      "type": "text"
                    },
                    {
                      "text": " ",
                      "type": "text"
                    },
                    {
                      "text": "issues with a Merchant Identity Certificate or Merchant Domain.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "You have not ",
                      "type": "text"
                    },
                    {
                      "identifier": "https://support.apple.com/guide/safari/pay-with-apple-pay-ibrw8e207504/mac",
                      "isActive": true,
                      "type": "reference"
                    },
                    {
                      "text": " with watchOS, macOS, or iOS.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "anchor": "Decrypting-the-payment-token",
          "level": 2,
          "text": "Decrypting the payment token",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Once you have completed the payment workflow you will need to pass the payment",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "token to your Payment Processor. This is where your Payment Processing Identity",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "comes into play. Your Payment Processor will need your Payment Processing Identity",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "to decrypt the payment token that was encrypted with the public key of your Payment",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Processing Certificate.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "If you attempt to decrypt a payment token and receive something other than a",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "parseable JSON output then the most common reason for this issue is that you have",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "a key mis-match. For example, a payment token is trying to be decrypted",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "with a private key that does not match the public key that the token was encrypted with.",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "When the payment token is encrypted, it is encrypted with Payment Processing Certificate’s public",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "key. This public key should be embedded in the private key as well. If you are",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "able to extract the public key from the private key and compare a sha256 hash",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "of each key, they should match. If the public key hashes do not match then the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "Payment Processor has the wrong private key. To extract the public key from the",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "private key you should be able to use a tool like OpenSSL to do so.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "For a complete overview of how to decrypt the Apple Pay Payment token and how",
              "type": "text"
            },
            {
              "text": " ",
              "type": "text"
            },
            {
              "text": "the payment token is structured, please see the ",
              "type": "text"
            },
            {
              "identifier": "https://developer.apple.com/library/archive/documentation/PassKit/Reference/PaymentTokenJSON/PaymentTokenJSON.html",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Revision-History",
          "level": 2,
          "text": "Revision History",
          "type": "heading"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "2022-05-24",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " Made minor editorial changes.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "2022-03-29",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " Made minor editorial changes.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "2022-02-08",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " Republished as TN3103.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "inlineContent": [
                        {
                          "text": "2021-09-13",
                          "type": "text"
                        }
                      ],
                      "type": "strong"
                    },
                    {
                      "text": " First published as “Apply Pay on the Web Debugging Guide” on the Apple Developer Forums.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "doc://com.apple.technotes/documentation/Technotes": {
      "abstract": [
        {
          "text": "Learn about specific development topics through these in-depth technical articles.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes",
      "kind": "article",
      "role": "collection",
      "title": "Technotes",
      "type": "topic",
      "url": "/documentation/technotes"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3111-ios-wifi-api-overview": {
      "abstract": [
        {
          "text": "Explore the various Wi-Fi APIs available on iOS and their expected use cases.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3111-ios-wifi-api-overview",
      "kind": "article",
      "role": "article",
      "title": "TN3111: iOS Wi-Fi API overview",
      "type": "topic",
      "url": "/documentation/technotes/tn3111-ios-wifi-api-overview"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3124-debugging-coordinate-transformations": {
      "abstract": [
        {
          "text": "Learn techniques to help debug any coordinate space issue.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3124-debugging-coordinate-transformations",
      "kind": "article",
      "role": "article",
      "title": "TN3124: Debugging coordinate space issues",
      "type": "topic",
      "url": "/documentation/technotes/tn3124-debugging-coordinate-transformations"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3168-making-your-app-clip-available-app-store": {
      "abstract": [
        {
          "text": "Learn how to configure your App Clip to prevent it from being unavailable in the App Store.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3168-making-your-app-clip-available-app-store",
      "kind": "article",
      "role": "article",
      "title": "TN3168: Making your App Clip available in the App Store",
      "type": "topic",
      "url": "/documentation/technotes/tn3168-making-your-app-clip-available-app-store"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3173-troubleshooting-issues-with-your-apple-pay-merchant-id-configuration": {
      "abstract": [
        {
          "text": "Diagnose errors due to invalid Apple Pay merchant identifier configurations by",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "identifying the underlying causes of common errors and explore their",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "potential solutions.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3173-troubleshooting-issues-with-your-apple-pay-merchant-id-configuration",
      "kind": "article",
      "role": "article",
      "title": "TN3173: Troubleshooting issues with your Apple Pay merchant identifier configuration",
      "type": "topic",
      "url": "/documentation/technotes/tn3173-troubleshooting-issues-with-your-apple-pay-merchant-id-configuration"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website": {
      "abstract": [
        {
          "text": "Diagnose errors received while presenting the Apple Pay payment sheet on",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "your website by identifying the underlying causes of common errors and explore",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "their potential solutions.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website",
      "kind": "article",
      "role": "article",
      "title": "TN3174: Diagnosing issues with the Apple Pay payment sheet on your website",
      "type": "topic",
      "url": "/documentation/technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3175-diagnosing-issues-with-displaying-the-apple-pay-button-on-your-website": {
      "abstract": [
        {
          "text": "Diagnose common errors received while displaying the Apple Pay button on your",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "website by identifying the underlying causes, and explore potential solutions.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3175-diagnosing-issues-with-displaying-the-apple-pay-button-on-your-website",
      "kind": "article",
      "role": "article",
      "title": "TN3175: Diagnosing issues with displaying the Apple Pay button on your website",
      "type": "topic",
      "url": "/documentation/technotes/tn3175-diagnosing-issues-with-displaying-the-apple-pay-button-on-your-website"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3176-troubleshooting-apple-pay-payment-processing-issues": {
      "abstract": [
        {
          "text": "Diagnose errors that occur when processing Apple Pay payments,",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "identify common causes, and explore potential solutions.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3176-troubleshooting-apple-pay-payment-processing-issues",
      "kind": "article",
      "role": "article",
      "title": "TN3176: Troubleshooting Apple Pay payment processing issues",
      "type": "topic",
      "url": "/documentation/technotes/tn3176-troubleshooting-apple-pay-payment-processing-issues"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files": {
      "abstract": [
        {
          "text": "Learn how alternate groups collect audio tracks, and how to choose which audio track to use in your app.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files",
      "kind": "article",
      "role": "article",
      "title": "TN3177: Understanding alternate audio track groups in movie files",
      "type": "topic",
      "url": "/documentation/technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3178-checking-for-and-resolving-build-uuid-problems": {
      "abstract": [
        {
          "text": "Ensure that every Mach-O image has a UUID, and that every distinct Mach-O image has its own unique UUID.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3178-checking-for-and-resolving-build-uuid-problems",
      "kind": "article",
      "role": "article",
      "title": "TN3178: Checking for and resolving build UUID problems",
      "type": "topic",
      "url": "/documentation/technotes/tn3178-checking-for-and-resolving-build-uuid-problems"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3179-understanding-local-network-privacy": {
      "abstract": [
        {
          "text": "Learn how local network privacy affects your software.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3179-understanding-local-network-privacy",
      "kind": "article",
      "role": "article",
      "title": "TN3179: Understanding local network privacy",
      "type": "topic",
      "url": "/documentation/technotes/tn3179-understanding-local-network-privacy"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3180-reverting-app-store-server-notifications-v1": {
      "abstract": [
        {
          "text": "Migrate from version 2 to version 1 of App Store Server Notifications using the Modify an App endpoint.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3180-reverting-app-store-server-notifications-v1",
      "kind": "article",
      "role": "article",
      "title": "TN3180: Reverting to App Store Server Notifications V1",
      "type": "topic",
      "url": "/documentation/technotes/tn3180-reverting-app-store-server-notifications-v1"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3181-debugging-invalid-privacy-manifest": {
      "abstract": [
        {
          "text": "Identify common configurations that cause unsuccessful privacy manifest validation with the App Store.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3181-debugging-invalid-privacy-manifest",
      "kind": "article",
      "role": "article",
      "title": "TN3181: Debugging an invalid privacy manifest",
      "type": "topic",
      "url": "/documentation/technotes/tn3181-debugging-invalid-privacy-manifest"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest": {
      "abstract": [
        {
          "text": "Declare the tracking domains you use in your app or third-party SDK in a privacy manifest.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest",
      "kind": "article",
      "role": "article",
      "title": "TN3182: Adding privacy tracking keys to your privacy manifest",
      "type": "topic",
      "url": "/documentation/technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3183-adding-required-reason-api-entries-to-your-privacy-manifest": {
      "abstract": [
        {
          "text": "Declare the APIs that can potentially fingerprint devices in your app or third-party SDK in a privacy manifest.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3183-adding-required-reason-api-entries-to-your-privacy-manifest",
      "kind": "article",
      "role": "article",
      "title": "TN3183: Adding required reason API entries to your privacy manifest",
      "type": "topic",
      "url": "/documentation/technotes/tn3183-adding-required-reason-api-entries-to-your-privacy-manifest"
    },
    "doc://com.apple.technotes/documentation/Technotes/tn3184-adding-data-collection-details-to-your-privacy-manifest": {
      "abstract": [
        {
          "text": "Declare the data your app or third-party SDK collects in a privacy manifest.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.technotes/documentation/Technotes/tn3184-adding-data-collection-details-to-your-privacy-manifest",
      "kind": "article",
      "role": "article",
      "title": "TN3184: Adding data collection details to your privacy manifest",
      "type": "topic",
      "url": "/documentation/technotes/tn3184-adding-data-collection-details-to-your-privacy-manifest"
    },
    "https://applepaydemo.apple.com": {
      "identifier": "https://applepaydemo.apple.com",
      "title": "Apple Pay on the Web Interactive Demo",
      "titleInlineContent": [
        {
          "text": "Apple Pay on the Web Interactive Demo",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://applepaydemo.apple.com"
    },
    "https://applepaydemo.apple.com/#createAPayment": {
      "identifier": "https://applepaydemo.apple.com/#createAPayment",
      "title": "payment request",
      "titleInlineContent": [
        {
          "text": "payment request",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://applepaydemo.apple.com/#createAPayment"
    },
    "https://developer.apple.com/apple-pay/sandbox-testing/": {
      "identifier": "https://developer.apple.com/apple-pay/sandbox-testing/",
      "title": "Create a Sandbox Tester Account",
      "titleInlineContent": [
        {
          "text": "Create a Sandbox Tester Account",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/apple-pay/sandbox-testing/"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api",
      "title": "ApplePay JS",
      "titleInlineContent": [
        {
          "text": "ApplePay JS",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/checking_for_apple_pay_availability": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/checking_for_apple_pay_availability",
      "title": "Checking for Apple Pay Availability",
      "titleInlineContent": [
        {
          "text": "Checking for",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "Apple Pay Availability",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/checking_for_apple_pay_availability"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/providing_merchant_validation": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/providing_merchant_validation",
      "title": "Merchant Validation process",
      "titleInlineContent": [
        {
          "text": "Merchant Validation process",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/apple_pay_js_api/providing_merchant_validation"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/applepayvalidatemerchantevent/1778026-validationurl": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepayvalidatemerchantevent/1778026-validationurl",
      "title": "validationURL",
      "titleInlineContent": [
        {
          "text": "validationURL",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/applepayvalidatemerchantevent/1778026-validationurl"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/payment_request_api": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/payment_request_api",
      "title": "Payment Request API",
      "titleInlineContent": [
        {
          "text": "Payment Request API",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/payment_request_api"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server",
      "title": "Setting up your Server",
      "titleInlineContent": [
        {
          "text": "Setting up your Server",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server"
    },
    "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server#3179116": {
      "identifier": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server#3179116",
      "title": "IP Ranges here",
      "titleInlineContent": [
        {
          "text": "IP Ranges here",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/documentation/apple_pay_on_the_web/setting_up_your_server#3179116"
    },
    "https://developer.apple.com/library/archive/documentation/PassKit/Reference/PaymentTokenJSON/PaymentTokenJSON.html": {
      "identifier": "https://developer.apple.com/library/archive/documentation/PassKit/Reference/PaymentTokenJSON/PaymentTokenJSON.html",
      "title": "Payment Token Format documentation here",
      "titleInlineContent": [
        {
          "text": "Payment Token Format documentation",
          "type": "text"
        },
        {
          "text": " ",
          "type": "text"
        },
        {
          "text": "here",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://developer.apple.com/library/archive/documentation/PassKit/Reference/PaymentTokenJSON/PaymentTokenJSON.html"
    },
    "https://help.apple.com/developer-account/#/dev1731126fb": {
      "identifier": "https://help.apple.com/developer-account/#/dev1731126fb",
      "title": "Merchant Identity Certificate",
      "titleInlineContent": [
        {
          "text": "Merchant Identity Certificate",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://help.apple.com/developer-account/#/dev1731126fb"
    },
    "https://help.apple.com/developer-account/#/devbfa00fef7?sub=devf31990e3f": {
      "identifier": "https://help.apple.com/developer-account/#/devbfa00fef7?sub=devf31990e3f",
      "title": "certificate signing request",
      "titleInlineContent": [
        {
          "text": "certificate signing request",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://help.apple.com/developer-account/#/devbfa00fef7?sub=devf31990e3f"
    },
    "https://support.apple.com/en-us/HT205280": {
      "identifier": "https://support.apple.com/en-us/HT205280",
      "title": "Apple’s Certificate Transparency policy",
      "titleInlineContent": [
        {
          "text": "Apple’s Certificate Transparency policy",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://support.apple.com/en-us/HT205280"
    },
    "https://support.apple.com/guide/safari/pay-with-apple-pay-ibrw8e207504/mac": {
      "identifier": "https://support.apple.com/guide/safari/pay-with-apple-pay-ibrw8e207504/mac",
      "title": "authorized your payment",
      "titleInlineContent": [
        {
          "text": "authorized your payment",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://support.apple.com/guide/safari/pay-with-apple-pay-ibrw8e207504/mac"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "seeAlsoSections": [
    {
      "anchor": "Latest",
      "generated": true,
      "identifiers": [
        "doc://com.apple.technotes/documentation/Technotes/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest",
        "doc://com.apple.technotes/documentation/Technotes/tn3183-adding-required-reason-api-entries-to-your-privacy-manifest",
        "doc://com.apple.technotes/documentation/Technotes/tn3184-adding-data-collection-details-to-your-privacy-manifest",
        "doc://com.apple.technotes/documentation/Technotes/tn3181-debugging-invalid-privacy-manifest",
        "doc://com.apple.technotes/documentation/Technotes/tn3180-reverting-app-store-server-notifications-v1",
        "doc://com.apple.technotes/documentation/Technotes/tn3179-understanding-local-network-privacy",
        "doc://com.apple.technotes/documentation/Technotes/tn3178-checking-for-and-resolving-build-uuid-problems",
        "doc://com.apple.technotes/documentation/Technotes/tn3177-understanding-alternate-audio-track-groups-in-movie-files",
        "doc://com.apple.technotes/documentation/Technotes/tn3111-ios-wifi-api-overview",
        "doc://com.apple.technotes/documentation/Technotes/tn3176-troubleshooting-apple-pay-payment-processing-issues",
        "doc://com.apple.technotes/documentation/Technotes/tn3175-diagnosing-issues-with-displaying-the-apple-pay-button-on-your-website",
        "doc://com.apple.technotes/documentation/Technotes/tn3174-diagnosing-issues-with-the-apple-pay-payment-sheet-on-your-website",
        "doc://com.apple.technotes/documentation/Technotes/tn3173-troubleshooting-issues-with-your-apple-pay-merchant-id-configuration",
        "doc://com.apple.technotes/documentation/Technotes/tn3168-making-your-app-clip-available-app-store",
        "doc://com.apple.technotes/documentation/Technotes/tn3124-debugging-coordinate-transformations"
      ],
      "title": "Latest"
    }
  ]
}

{
  "abstract": [
    {
      "text": "Validate an authorization grant code delivered to your app to obtain tokens, or validate an existing refresh token.",
      "type": "text"
    }
  ],
  "documentVersion": 0,
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "data",
    "url": "doc://com.apple.documentation/documentation/signinwithapplerestapi/generate_and_validate_tokens"
  },
  "kind": "symbol",
  "legacy_identifier": 3230960,
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "externalID": "rest:appleid_signin_server_api:post:auth-token",
    "modules": [
      {
        "name": "Sign in with Apple REST API"
      }
    ],
    "platforms": [
      {
        "current": "1.0",
        "introducedAt": "1.0",
        "name": "Sign in with Apple REST API"
      }
    ],
    "role": "restRequestSymbol",
    "roleHeading": "Web Service Endpoint",
    "symbolKind": "httpPost",
    "title": "Generate and validate tokens"
  },
  "primaryContentSections": [
    {
      "kind": "restEndpoint",
      "title": "URL",
      "tokens": [
        {
          "kind": "method",
          "text": "POST"
        },
        {
          "kind": "text",
          "text": " "
        },
        {
          "kind": "baseURL",
          "text": "https://appleid.apple.com"
        },
        {
          "kind": "path",
          "text": "/auth/token"
        }
      ]
    },
    {
      "bodyContentType": [
        {
          "kind": "text",
          "text": "form-data"
        }
      ],
      "content": [
        {
          "inlineContent": [
            {
              "text": "The list of input parameters required for the server to validate the authorization code or refresh token.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "restBody",
      "mimeType": "application/x-www-form-urlencoded",
      "parameters": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The identifier (App ID or Services ID) for your app. The identifier must not include your Team ID, to help prevent the possibility of exposing sensitive data to the end user.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimetype": "text/plain",
          "name": "client_id",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "A secret JSON Web Token, generated by the developer, that uses the Sign in with Apple private key associated with your developer account. Authorization code and refresh token validation requests require this parameter. To create this token, see ",
                  "type": "text"
                },
                {
                  "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/creating-a-client-secret",
                  "isActive": true,
                  "type": "reference"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimetype": "text/plain",
          "name": "client_secret",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The authorization code received in an authorization response sent to your app. The code is single-use only and valid for five minutes. Authorization code validation requests require this parameter.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimetype": "text/plain",
          "name": "code",
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The grant type determines how the client app interacts with the validation server. Authorization code and refresh token validation requests require this parameter. For authorization code validation, use ",
                  "type": "text"
                },
                {
                  "code": "authorization_code",
                  "type": "codeVoice"
                },
                {
                  "text": ". For refresh token validation requests, use ",
                  "type": "text"
                },
                {
                  "code": "refresh_token",
                  "type": "codeVoice"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimetype": "text/plain",
          "name": "grant_type",
          "required": true,
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The refresh token received from the validation server during an authorization request. Refresh token validation requests require this parameter.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimetype": "text/plain",
          "name": "refresh_token",
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The destination URI provided in the authorization request when authorizing a user with your app, if applicable. The URI must use the HTTPS protocol, include a domain name, and canâ€™t contain an IP address or ",
                  "type": "text"
                },
                {
                  "code": "localhost",
                  "type": "codeVoice"
                },
                {
                  "text": ". Authorization code requests require this parameter.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimetype": "text/plain",
          "name": "redirect_uri",
          "type": [
            {
              "kind": "text",
              "text": "string"
            }
          ],
          "typeDetails": [
            {
              "baseType": "string"
            }
          ]
        }
      ],
      "title": "HTTP Body"
    },
    {
      "items": [
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The request was successful.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimetype": "application/json",
          "reason": "OK",
          "status": 200,
          "type": [
            {
              "identifier": "doc://com.apple.documentation/documentation/signinwithapplerestapi/tokenresponse",
              "kind": "typeIdentifier",
              "preciseIdentifier": "data:appleid_signin_server_api:TokenResponse",
              "text": "TokenResponse"
            }
          ]
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "The server was unable to process the request.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "mimetype": "application/json",
          "reason": "Bad Request",
          "status": 400,
          "type": [
            {
              "identifier": "doc://com.apple.documentation/documentation/signinwithapplerestapi/errorresponse",
              "kind": "typeIdentifier",
              "preciseIdentifier": "data:appleid_signin_server_api:ErrorResponse",
              "text": "ErrorResponse"
            }
          ]
        }
      ],
      "kind": "restResponses",
      "title": "Response Codes"
    },
    {
      "content": [
        {
          "anchor": "discussion",
          "level": 2,
          "text": "Discussion",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The validation server returns a ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/signinwithapplerestapi/tokenresponse",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " object in the response body of a successful validation request. Use this endpoint to either authorize a user by validating the authorization code received by your app, or by validating an existing refresh token to verify a user session or obtain access tokens.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "3605121",
          "level": 3,
          "text": "Validate the authorization grant code",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When you send an authorization request to the validation server, include the following form data parameters:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "client_id",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "client_secret",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "code",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "grant_type",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "redirect_uri ",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "When authorizing a user with your app, include the ",
                  "type": "text"
                },
                {
                  "code": "redirect_uri",
                  "type": "codeVoice"
                },
                {
                  "text": " parameter only if the application provided a ",
                  "type": "text"
                },
                {
                  "code": "redirect_uri",
                  "type": "codeVoice"
                },
                {
                  "text": " in theÂ initial authorization request.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "text": "The following is an example authorization validation request URL via ",
              "type": "text"
            },
            {
              "code": "cURL",
              "type": "codeVoice"
            },
            {
              "text": ":",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "curl -v POST \"https://appleid.apple.com/auth/token\" \\",
            "-H 'content-type: application/x-www-form-urlencoded' \\",
            "-d 'client_id=CLIENT_ID' \\",
            "-d 'client_secret=CLIENT_SECRET' \\",
            "-d 'code=CODE' \\",
            "-d 'grant_type=authorization_code' \\",
            "-d 'redirect_uri=REDIRECT_URI'"
          ],
          "metadata": {
            "anchor": "3605123",
            "title": "Listing 1"
          },
          "syntax": "other",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "After the server validates the authorization code, the endpoint returns the identity token, an access token, and a refresh token. The following is an example authorization validation response:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"access_token\": \"adg61...67Or9\",",
            "  \"token_type\": \"Bearer\",",
            "  \"expires_in\": 3600,",
            "  \"refresh_token\": \"rca7...lABoQ\",",
            "  \"id_token\": \"eyJra...96sZg\"",
            "}"
          ],
          "metadata": {
            "anchor": "3786723",
            "title": "Listing 2"
          },
          "syntax": "other",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Use the refresh token to verify the user session from the server and obtain access tokens.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "3605122",
          "level": 3,
          "text": "Validate an existing refresh token",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When performing a validation request, you must include the following form data parameters:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "client_id",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "client_secret",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "grant_type",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "code": "refresh_token",
                      "type": "codeVoice"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "inlineContent": [
            {
              "code": "",
              "type": "codeVoice"
            },
            {
              "text": "The following is an example validation request URL using ",
              "type": "text"
            },
            {
              "code": "cURL",
              "type": "codeVoice"
            },
            {
              "text": ":",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "curl -v POST \"https://appleid.apple.com/auth/token\" \\",
            "-H 'content-type: application/x-www-form-urlencoded' \\",
            "-d 'client_id=CLIENT_ID' \\",
            "-d 'client_secret=CLIENT_SECRET' \\",
            "-d 'grant_type=refresh_token' \\",
            "-d 'refresh_token=REFRESH_TOKEN'"
          ],
          "metadata": {
            "anchor": "3605124",
            "title": "Listing 3"
          },
          "syntax": "other",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "After the server validates the refresh token, the endpoint returns the identity token and an access token. The following is an example refresh token validation response:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"access_token\": \"beg510...67Or9\",",
            "  \"token_type\": \"Bearer\",",
            "  \"expires_in\": 3600,",
            "  \"id_token\": \"eyJra...96sZg\"",
            "}"
          ],
          "metadata": {
            "anchor": "3786724",
            "title": "Listing 4"
          },
          "syntax": "other",
          "type": "codeListing"
        },
        {
          "inlineContent": [],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/signinwithapplerestapi/errorresponse": {
      "identifier": "doc://com.apple.documentation/documentation/signinwithapplerestapi/errorresponse",
      "kind": "symbol",
      "role": "dictionarySymbol",
      "title": "ErrorResponse",
      "type": "topic",
      "url": "/documentation/signinwithapplerestapi/errorresponse"
    },
    "doc://com.apple.documentation/documentation/signinwithapplerestapi/tokenresponse": {
      "identifier": "doc://com.apple.documentation/documentation/signinwithapplerestapi/tokenresponse",
      "kind": "symbol",
      "role": "dictionarySymbol",
      "title": "TokenResponse",
      "type": "topic",
      "url": "/documentation/signinwithapplerestapi/tokenresponse"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/creating-a-client-secret": {
      "identifier": "doc://org.swift.docc.AccountOrganizationalDataSharing/documentation/AccountOrganizationalDataSharing/creating-a-client-secret",
      "kind": "article",
      "role": "article",
      "title": "Creating a client secret",
      "type": "topic",
      "url": "/documentation/accountorganizationaldatasharing/creating-a-client-secret"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "paths": [
        "documentation/signinwithapplerestapi/generate_and_validate_tokens"
      ],
      "traits": [
        {
          "interfaceLanguage": "data"
        }
      ]
    }
  ]
}

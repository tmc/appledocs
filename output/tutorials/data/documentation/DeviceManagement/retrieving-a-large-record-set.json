{
  "abstract": [
    {
      "text": "Efficiently work with large record sets.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.devicemanagement/documentation/DeviceManagement",
        "doc://com.apple.devicemanagement/documentation/DeviceManagement/app-and-book-management",
        "doc://com.apple.devicemanagement/documentation/DeviceManagement/app-and-book-management-legacy",
        "doc://com.apple.devicemanagement/documentation/DeviceManagement/managing-apps-and-books-through-web-services-legacy"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "data",
    "url": "doc://com.apple.devicemanagement/documentation/DeviceManagement/retrieving-a-large-record-set"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "Device Management"
      }
    ],
    "role": "article",
    "roleHeading": "Article",
    "title": "Retrieving a Large Record Set"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When the number of records in a response exceeds a server-controlled limit, the response will be batched. You can also retrieve only the records that have changed since your last query by using the ",
              "type": "text"
            },
            {
              "code": "sinceModifiedToken",
              "type": "codeVoice"
            },
            {
              "text": ".  Requests can be made in parallel to reduce the time it takes to retrieve the entire result set.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "These concepts apply to the following endpoints:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement/Get-Licenses",
                      "isActive": true,
                      "type": "reference"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement/Get-Users-5boi1",
                      "isActive": true,
                      "type": "reference"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "unorderedList"
        },
        {
          "anchor": "About-SinceModifiedToken",
          "level": 3,
          "text": "About SinceModifiedToken",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The ",
              "type": "text"
            },
            {
              "code": "sinceModifiedToken",
              "type": "codeVoice"
            },
            {
              "text": " may be used to keep your MDM system up-to-date with changes, without having to retrieve all records.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Once all records have been returned for a request, the server includes a ",
              "type": "text"
            },
            {
              "code": "sinceModifiedToken",
              "type": "codeVoice"
            },
            {
              "text": " in the response.  Your MDM server can pass this ",
              "type": "text"
            },
            {
              "code": "sinceModifiedToken",
              "type": "codeVoice"
            },
            {
              "text": " in subsequent requests to get records modified since that token was generated.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "Even if no records are returned, the response still includes a ",
                  "type": "text"
                },
                {
                  "code": "sinceModifiedToken",
                  "type": "codeVoice"
                },
                {
                  "text": " for use in subsequent requests.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "anchor": "Batched-Responses",
          "level": 3,
          "text": "Batched Responses",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "A ",
              "type": "text"
            },
            {
              "code": "batchToken",
              "type": "codeVoice"
            },
            {
              "text": " is used to retrieve multiple batches of records when the total number of records exceeds a limit.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "To use a ",
              "type": "text"
            },
            {
              "code": "batchToken",
              "type": "codeVoice"
            },
            {
              "text": ", your MDM server should do the following:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Make an initial request with no ",
                      "type": "text"
                    },
                    {
                      "code": "batchToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " (or ",
                      "type": "text"
                    },
                    {
                      "code": "sinceModifiedToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": "). This request returns all records associated with the provided sToken.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "If the number of records exceeds a server-controlled limit (on the order of several hundred), a ",
                      "type": "text"
                    },
                    {
                      "code": "batchToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " value is included in the response, along with the first batch of records.  Your MDM server should pass this ",
                      "type": "text"
                    },
                    {
                      "code": "batchToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " value in a subsequent request to get the next batch of records. As long as additional batches remain, the server returns a new ",
                      "type": "text"
                    },
                    {
                      "code": "batchToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " value in its response.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            },
            {
              "content": [
                {
                  "inlineContent": [
                    {
                      "text": "Once all records have been returned for the request, the server includes a ",
                      "type": "text"
                    },
                    {
                      "code": "sinceModifiedToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " value in the response.  Your MDM server can pass this ",
                      "type": "text"
                    },
                    {
                      "code": "sinceModifiedToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " in subsequent requests to get records modified since that token was generated. Again, if the number of modified records exceeds the limit, a ",
                      "type": "text"
                    },
                    {
                      "code": "batchToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " will be included in the response, which can be used to get the next batch of modified records.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            }
          ],
          "type": "orderedList"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "Using ",
                  "type": "text"
                },
                {
                  "code": "sinceModifiedToken",
                  "type": "codeVoice"
                },
                {
                  "text": " can result in batches with zero records in them. This is not an error or an end signal; just move to the next batch.",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Note",
          "style": "note",
          "type": "aside"
        },
        {
          "inlineContent": [
            {
              "text": "The following fields are used with batched responses:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "header": "row",
          "rows": [
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "batchToken",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "A token used to signify which batch is being returned. The ",
                      "type": "text"
                    },
                    {
                      "code": "batchToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " is generated by the server and can be several kilobytes in size.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "batchCount",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "The number of records returned in the current batch.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "totalBatchCount",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "The total number of round trips needed to get the complete result set.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "overrideIndex",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "A value from ",
                      "type": "text"
                    },
                    {
                      "code": "1",
                      "type": "codeVoice"
                    },
                    {
                      "text": " to the ",
                      "type": "text"
                    },
                    {
                      "code": "totalBatchCount",
                      "type": "codeVoice"
                    },
                    {
                      "text": " value that specifies the batch of results to return. For requests with a value equal to the ",
                      "type": "text"
                    },
                    {
                      "code": "totalBatchCount",
                      "type": "codeVoice"
                    },
                    {
                      "text": " value, the ",
                      "type": "text"
                    },
                    {
                      "code": "sinceModifiedToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " value is returned.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ],
            [
              [
                {
                  "inlineContent": [
                    {
                      "text": "totalCount",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ],
              [
                {
                  "inlineContent": [
                    {
                      "text": "An estimate of the total number of records that will be returned. This value is only returned for requests that don’t include ",
                      "type": "text"
                    },
                    {
                      "code": "batchToken",
                      "type": "codeVoice"
                    },
                    {
                      "text": " and the request that started the batch process. The actual number of records returned can be different by the time the client has finished retrieving all records.",
                      "type": "text"
                    }
                  ],
                  "type": "paragraph"
                }
              ]
            ]
          ],
          "type": "table"
        },
        {
          "content": [
            {
              "inlineContent": [
                {
                  "text": "",
                  "type": "text"
                },
                {
                  "text": " ",
                  "type": "text"
                },
                {
                  "text": "One of a set of sequential batch requests may return an error. It is also possible to get a response that includes no token, but also no error number. Because requests should return either a ",
                  "type": "text"
                },
                {
                  "code": "batchToken",
                  "type": "codeVoice"
                },
                {
                  "text": " or ",
                  "type": "text"
                },
                {
                  "code": "sinceModifiedToken",
                  "type": "codeVoice"
                },
                {
                  "text": ", do not interpret an error or the lack of a ",
                  "type": "text"
                },
                {
                  "code": "batchToken",
                  "type": "codeVoice"
                },
                {
                  "text": " for an individual batch to mean that the last batch has been received. The last batch is signified by the inclusion of a ",
                  "type": "text"
                },
                {
                  "code": "sinceModifiedToken",
                  "type": "codeVoice"
                },
                {
                  "text": ". If an individual batch request fails, the MDM server should retry the same batch using the same ",
                  "type": "text"
                },
                {
                  "code": "batchToken",
                  "type": "codeVoice"
                },
                {
                  "text": ".",
                  "type": "text"
                }
              ],
              "type": "paragraph"
            }
          ],
          "name": "Tip",
          "style": "tip",
          "type": "aside"
        },
        {
          "anchor": "Parallel-Requests",
          "level": 3,
          "text": "Parallel Requests",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Both the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement/Get-Licenses",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " and ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement/Get-Users-5boi1",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " endpoints can accept multiple requests in parallel, instead of sequentially, which can significantly reduce the amount of time required to request all licenses and users. You start by making an initial request to receive a ",
              "type": "text"
            },
            {
              "code": "batchToken",
              "type": "codeVoice"
            },
            {
              "text": ". Subsequent requests can be submitted in parallel, by submitting the same ",
              "type": "text"
            },
            {
              "code": "batchToken",
              "type": "codeVoice"
            },
            {
              "text": " and including an ",
              "type": "text"
            },
            {
              "code": "overrideIndex",
              "type": "codeVoice"
            },
            {
              "text": " value from 1 to ",
              "type": "text"
            },
            {
              "code": "totalBatchCount",
              "type": "codeVoice"
            },
            {
              "text": ". The request in which the ",
              "type": "text"
            },
            {
              "code": "overrideIndex",
              "type": "codeVoice"
            },
            {
              "text": " value is equal to the ",
              "type": "text"
            },
            {
              "code": "totalBatchCount",
              "type": "codeVoice"
            },
            {
              "text": " returns the new ",
              "type": "text"
            },
            {
              "code": "sinceModifiedToken",
              "type": "codeVoice"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "For performance reasons, you shouldn’t submit more than five requests simultaneously.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.devicemanagement/documentation/DeviceManagement": {
      "abstract": [
        {
          "text": "Manage your organization’s devices remotely.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement",
      "kind": "symbol",
      "role": "collection",
      "title": "Device Management",
      "type": "topic",
      "url": "/documentation/devicemanagement"
    },
    "doc://com.apple.devicemanagement/documentation/DeviceManagement/Get-Licenses": {
      "abstract": [
        {
          "text": "Get the set of licenses managed by your organization.",
          "type": "text"
        }
      ],
      "deprecated": true,
      "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement/Get-Licenses",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Get Licenses"
        }
      ],
      "role": "symbol",
      "title": "Get Licenses",
      "type": "topic",
      "url": "/documentation/devicemanagement/get-licenses"
    },
    "doc://com.apple.devicemanagement/documentation/DeviceManagement/Get-Users-5boi1": {
      "abstract": [
        {
          "text": "Get information about a set of users.",
          "type": "text"
        }
      ],
      "deprecated": true,
      "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement/Get-Users-5boi1",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Get Users"
        }
      ],
      "role": "symbol",
      "title": "Get Users",
      "type": "topic",
      "url": "/documentation/devicemanagement/get-users-5boi1"
    },
    "doc://com.apple.devicemanagement/documentation/DeviceManagement/app-and-book-management": {
      "abstract": [
        {
          "text": "Manage apps and books for your students and employees.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement/app-and-book-management",
      "kind": "article",
      "role": "collectionGroup",
      "title": "App and Book Management",
      "type": "topic",
      "url": "/documentation/devicemanagement/app-and-book-management"
    },
    "doc://com.apple.devicemanagement/documentation/DeviceManagement/app-and-book-management-legacy": {
      "abstract": [
        {
          "text": "Manage apps and books for your students and employees.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement/app-and-book-management-legacy",
      "kind": "article",
      "role": "collectionGroup",
      "title": "App and Book Management (Legacy)",
      "type": "topic",
      "url": "/documentation/devicemanagement/app-and-book-management-legacy"
    },
    "doc://com.apple.devicemanagement/documentation/DeviceManagement/managing-apps-and-books-through-web-services-legacy": {
      "abstract": [
        {
          "text": "Associate volume purchases with users or devices using endpoints for Mobile Device Management (MDM), provided by the Volume Purchase Program (VPP).",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.devicemanagement/documentation/DeviceManagement/managing-apps-and-books-through-web-services-legacy",
      "kind": "article",
      "role": "collectionGroup",
      "title": "Managing Apps and Books Through Web Services",
      "type": "topic",
      "url": "/documentation/devicemanagement/managing-apps-and-books-through-web-services-legacy"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "paths": [
        "/documentation/devicemanagement/retrieving-a-large-record-set"
      ],
      "traits": [
        {
          "interfaceLanguage": "data"
        }
      ]
    }
  ]
}

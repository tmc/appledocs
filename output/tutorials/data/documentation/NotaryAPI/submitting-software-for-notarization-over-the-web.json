{
  "abstract": [
    {
      "text": "Eliminate a dependency on macOS in your notarization workflow by interfacing directly with the notary service.",
      "type": "text"
    }
  ],
  "hierarchy": {
    "paths": [
      [
        "doc://com.apple.documentation/documentation/technologies",
        "doc://com.apple.notaryapi/documentation/NotaryAPI"
      ]
    ]
  },
  "identifier": {
    "interfaceLanguage": "data",
    "url": "doc://com.apple.notaryapi/documentation/NotaryAPI/submitting-software-for-notarization-over-the-web"
  },
  "kind": "article",
  "legalNotices": {
    "copyright": "Copyright &copy; 2025 Apple Inc. All rights reserved.",
    "privacyPolicy": "https://www.apple.com/privacy/privacy-policy",
    "termsOfUse": "https://www.apple.com/legal/internet-services/terms/site.html"
  },
  "metadata": {
    "modules": [
      {
        "name": "Notary API"
      }
    ],
    "role": "article",
    "roleHeading": "Article",
    "title": "Submitting software for notarization over the web"
  },
  "primaryContentSections": [
    {
      "content": [
        {
          "anchor": "overview",
          "level": 2,
          "text": "Overview",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "If you notarize macOS software that you distribute with Developer ID, and if you use a custom notarization workflow, you can use ",
              "type": "text"
            },
            {
              "code": "notarytool",
              "type": "codeVoice"
            },
            {
              "text": " (included with Xcode) to interact with the notary service. However, if you want to avoid a macOS dependency for this part of the workflow, you can use the notary service’s REST API.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "For an overview of the entire custom notarization workflow, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/Security/customizing-the-notarization-workflow",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ". This article describes how to use the notary service API to replace the parts of that article that depend on ",
              "type": "text"
            },
            {
              "code": "notarytool",
              "type": "codeVoice"
            },
            {
              "text": ", namely uploading your software and checking on the status of your request.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Create-a-private-key",
          "level": 3,
          "text": "Create a private key",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "When you access the notary service, you authenticate the access by including a token that you sign with a private key. Use the same key to sign tokens for the notary service that you use for the App Store Connect API. For details on how to create a key, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/creating-api-keys-for-app-store-connect-api",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "Keep the key secure and private. You only need to create a key once, but if you lose the key, or if the key becomes compromised, revoke it immediately and create a new one. For more information, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/revoking-api-keys",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Include-a-signed-token-with-each-API-access",
          "level": 3,
          "text": "Include a signed token with each API access",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "The notary service requires a JSON Web Token (JWT) to authorize each API request. JWT is an open standard (",
              "type": "text"
            },
            {
              "identifier": "https://tools.ietf.org/html/rfc7519",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ") that defines a way to securely transmit information by using a private key to cryptographically sign a message in JSON format. You use the key to create a JWT for each request. For more information, see ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/generating-tokens-for-api-requests",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "inlineContent": [
            {
              "text": "After creating the signed token, include it in the header for all of your notary service API calls. For example, to use the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Previous-Submissions",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " endpoint to get a list of up to 100 of your team’s previous notarization submissions, replace ",
              "type": "text"
            },
            {
              "code": "<token>",
              "type": "codeVoice"
            },
            {
              "text": " in the following call to the ",
              "type": "text"
            },
            {
              "code": "curl",
              "type": "codeVoice"
            },
            {
              "text": " command with your signed token:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "% curl -v -H \"Authorization: Bearer <token>\" \"https://appstoreconnect.apple.com/notary/v2/submissions\""
          ],
          "syntax": "shell",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Create a token that expires a short time after you create it — for example, 20 minutes. You can reuse a token until it expires.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Start-a-submission",
          "level": 3,
          "text": "Start a submission",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "To submit a new version of your software for notarization, start by calling the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Submit-Software",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " endpoint. This call doesn’t upload your software; it tells the notary service to prepare for a new upload, and returns information that you use to perform the upload. Prepare the body of the request with a name and a hash of the software that you want to notarize, as well as optional information about how to notify you when notarization completes. For example, you can create a ",
              "type": "text"
            },
            {
              "code": "body",
              "type": "codeVoice"
            },
            {
              "text": " variable in Python for a file named ",
              "type": "text"
            },
            {
              "code": "OvernightTextEditor_11.6.8.zip",
              "type": "codeVoice"
            },
            {
              "text": ":",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "#!/usr/bin/env python3",
            "",
            "import hashlib",
            "",
            "with open(\"OvernightTextEditor_11.6.8.zip\", \"rb\") as file:",
            "    hash = hashlib.sha256()",
            "    hash.update(file.read())",
            "    sha256 = hash.hexdigest()",
            "",
            "body = {",
            "    \"submissionName\": \"OvernightTextEditor_11.6.8.zip\",",
            "    \"sha256\": sha256,",
            "    \"notifications\": [{\"channel\": \"webhook\", \"target\": \"https://example.com\" }]",
            "}"
          ],
          "syntax": "bash",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "The ",
              "type": "text"
            },
            {
              "code": "body",
              "type": "codeVoice"
            },
            {
              "text": " consists of three keys, one of which is optional:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "items": [
            {
              "definition": {
                "content": [
                  {
                    "inlineContent": [
                      {
                        "text": "Indicates the name of the file that you plan to submit. Use a unique file name for each submission to make it easier when reviewing log files and other status information about the submission. The example above does this by including a version string as part of the file name.",
                        "type": "text"
                      }
                    ],
                    "type": "paragraph"
                  }
                ]
              },
              "term": {
                "inlineContent": [
                  {
                    "code": "submissionName",
                    "type": "codeVoice"
                  }
                ]
              }
            },
            {
              "definition": {
                "content": [
                  {
                    "inlineContent": [
                      {
                        "text": "A hash that acts as a signature the service can use to match against the software that you upload later. Use the Secure Hashing Algorithm 2 (SHA-2) with a 256-bit digest. The above example uses the ",
                        "type": "text"
                      },
                      {
                        "code": "hashlib",
                        "type": "codeVoice"
                      },
                      {
                        "text": " library to compute the hash.",
                        "type": "text"
                      }
                    ],
                    "type": "paragraph"
                  }
                ]
              },
              "term": {
                "inlineContent": [
                  {
                    "code": "sha256",
                    "type": "codeVoice"
                  }
                ]
              }
            },
            {
              "definition": {
                "content": [
                  {
                    "inlineContent": [
                      {
                        "text": "An optional array that contains a dictionary with a ",
                        "type": "text"
                      },
                      {
                        "code": "target",
                        "type": "codeVoice"
                      },
                      {
                        "text": " URL that the notary service accesses when it completes the notarization process. Use notifications to avoid polling the service to find out when notarization completes. If you ask for a notification, be sure to verify its cryptographic signature. For a description of the notification format, see ",
                        "type": "text"
                      },
                      {
                        "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/NewSubmissionRequest/Notifications-data.dictionary",
                        "isActive": true,
                        "type": "reference"
                      },
                      {
                        "text": ". Omit the ",
                        "type": "text"
                      },
                      {
                        "code": "notifications",
                        "type": "codeVoice"
                      },
                      {
                        "text": " key and its associated array if you don’t need a callback.",
                        "type": "text"
                      }
                    ],
                    "type": "paragraph"
                  }
                ]
              },
              "term": {
                "inlineContent": [
                  {
                    "code": "notifications",
                    "type": "codeVoice"
                  }
                ]
              }
            }
          ],
          "type": "termList"
        },
        {
          "inlineContent": [
            {
              "text": "Use the ",
              "type": "text"
            },
            {
              "code": "body",
              "type": "codeVoice"
            },
            {
              "text": ", plus the token described in the previous section, to call the endpoint and get a response. The following code continues from the previous Python example:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "import requests",
            "",
            "token = generate_token() # Defined elsewhere.",
            "resp = requests.post(\"https://appstoreconnect.apple.com/notary/v2/submissions\", json=body, headers={\"Authorization\": \"Bearer \" + token})",
            "resp.raise_for_status()",
            "output = resp.json()"
          ],
          "syntax": "python",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "The service responds with an identifier that you use to track your submission, and temporary security credentials that you use to upload your software to an Amazon S3 endpoint. An example response looks like this:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "{",
            "  \"data\": {",
            "    \"attributes\": {",
            "      \"awsAccessKeyId\": \"ASIAIOSFODNN7EXAMPLE\",",
            "      \"awsSecretAccessKey\": \"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\",",
            "      \"awsSessionToken\": \"AQoDYXdzEJr...\",",
            "      \"bucket\": \"EXAMPLE-BUCKET\",",
            "      \"object\": \"EXAMPLE-KEY-NAME\"",
            "    },",
            "    \"id\": \"2efe2717-52ef-43a5-96dc-0797e4ca1041\",",
            "    \"type\": \"submissionsPostResponse\"",
            "  },",
            "  \"meta\": {",
            "  }",
            "} "
          ],
          "syntax": "javascript",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "Store the identifier (",
              "type": "text"
            },
            {
              "code": "id",
              "type": "codeVoice"
            },
            {
              "text": ") so you can use it to ask the notary service about the status of the submission, and to retrieve information about the outcome of the notarization. If you lose the identifier, you can use the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Previous-Submissions",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " endpoint to get a list of the 100 most recent submissions associated with your team.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Upload-your-software",
          "level": 3,
          "text": "Upload your software",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Use the ",
              "type": "text"
            },
            {
              "code": "attributes",
              "type": "codeVoice"
            },
            {
              "text": " object that appears in the response from the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Submit-Software",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " call to upload your software to Amazon S3. A good way to do this is with the ",
              "type": "text"
            },
            {
              "code": "boto3",
              "type": "codeVoice"
            },
            {
              "text": " library, provided by Amazon:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "import boto3",
            "",
            "aws_info = output[\"data\"][\"attributes\"]",
            "bucket = aws_info[\"bucket\"]",
            "key = aws_info[\"object\"]",
            "sub_id = output[\"data\"][\"id\"]",
            "",
            "s3 = boto3.client(",
            "         \"s3\",",
            "         aws_access_key_id=aws_info[\"awsAccessKeyId\"],",
            "         aws_secret_access_key=aws_info[\"awsSecretAccessKey\"],",
            "         aws_session_token=aws_info[\"awsSessionToken\"],",
            "         config=Config(s3={\"use_accelerate_endpoint\": True})",
            ")",
            "",
            "resp = s3.upload_file(\"OvernightTextEditor_11.6.8.zip\", bucket, key)"
          ],
          "syntax": "python",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "The temporary S3 credentials contained in the attributes object expire 12 hours after you get them from the notary service. If you don’t use the credentials before they expire, you’ll have to restart the upload process. For more information about using this library and accessing Amazon S3, see the documentation on ",
              "type": "text"
            },
            {
              "identifier": "https://aws.amazon.com",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": ".",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "anchor": "Check-the-status-of-your-submission",
          "level": 3,
          "text": "Check the status of your submission",
          "type": "heading"
        },
        {
          "inlineContent": [
            {
              "text": "Notarization typically takes just a few minutes after you complete the upload. To verify the status of your submission, you can call the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Submission-Status",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " endpoint by using the following ",
              "type": "text"
            },
            {
              "code": "curl",
              "type": "codeVoice"
            },
            {
              "text": " command along with the identifier that the service returned when you started the submission:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "% curl -v -H \"Authorization: Bearer <token>\" \"https://appstoreconnect.apple.com/notary/v2/submissions/2efe2717-52ef-43a5-96dc-0797e4ca1041\""
          ],
          "syntax": "shell",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "After notarization completes, use the ",
              "type": "text"
            },
            {
              "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Submission-Log",
              "isActive": true,
              "type": "reference"
            },
            {
              "text": " endpoint to get a log file that contains any notarization errors or warnings:",
              "type": "text"
            }
          ],
          "type": "paragraph"
        },
        {
          "code": [
            "% curl -v -H \"Authorization: Bearer <token>\" \"https://appstoreconnect.apple.com/notary/v2/submissions/2EFE2717-52EF-43A5-96DC-0797E4CA1041/logs\""
          ],
          "syntax": "shell",
          "type": "codeListing"
        },
        {
          "inlineContent": [
            {
              "text": "This call returns a URL that you can use to download a log file in JSON format. The log file provides details about the notarization outcome for this particular submission. The log file URL is valid for only a few hours, but you can ask for a new URL later if you need the log again. Always check the log file, even if notarization succeeds, because it might contain warnings that you can fix prior to your next submission.",
              "type": "text"
            }
          ],
          "type": "paragraph"
        }
      ],
      "kind": "content"
    }
  ],
  "references": {
    "doc://com.apple.documentation/documentation/AppStoreConnectAPI/creating-api-keys-for-app-store-connect-api": {
      "abstract": [
        {
          "text": "Create API keys to sign JSON Web Tokens (JWTs) and authorize API requests.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/creating-api-keys-for-app-store-connect-api",
      "kind": "article",
      "role": "article",
      "title": "Creating API Keys for App Store Connect API",
      "type": "topic",
      "url": "/documentation/AppStoreConnectAPI/creating-api-keys-for-app-store-connect-api"
    },
    "doc://com.apple.documentation/documentation/AppStoreConnectAPI/generating-tokens-for-api-requests": {
      "abstract": [
        {
          "text": "Create JSON Web Tokens (JWTs) signed with your private key to authorize API requests.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/generating-tokens-for-api-requests",
      "kind": "article",
      "role": "article",
      "title": "Generating Tokens for API Requests",
      "type": "topic",
      "url": "/documentation/AppStoreConnectAPI/generating-tokens-for-api-requests"
    },
    "doc://com.apple.documentation/documentation/AppStoreConnectAPI/revoking-api-keys": {
      "abstract": [
        {
          "text": "Revoke unused, lost, or compromised private keys.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/AppStoreConnectAPI/revoking-api-keys",
      "kind": "article",
      "role": "article",
      "title": "Revoking API Keys",
      "type": "topic",
      "url": "/documentation/AppStoreConnectAPI/revoking-api-keys"
    },
    "doc://com.apple.documentation/documentation/Security/customizing-the-notarization-workflow": {
      "abstract": [
        {
          "text": "Notarize your app from the command line to handle special distribution cases.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/Security/customizing-the-notarization-workflow",
      "kind": "article",
      "role": "article",
      "title": "Customizing the notarization workflow",
      "type": "topic",
      "url": "/documentation/Security/customizing-the-notarization-workflow"
    },
    "doc://com.apple.documentation/documentation/technologies": {
      "abstract": [
        {
          "text": "",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.documentation/documentation/technologies",
      "kind": "technologies",
      "role": "overview",
      "title": "Technologies",
      "type": "topic",
      "url": "/documentation/technologies"
    },
    "doc://com.apple.notaryapi/documentation/NotaryAPI": {
      "abstract": [
        {
          "text": "Submit your macOS software for notarization through a web interface.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI",
      "kind": "symbol",
      "role": "collection",
      "title": "Notary API",
      "type": "topic",
      "url": "/documentation/notaryapi"
    },
    "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Previous-Submissions": {
      "abstract": [
        {
          "text": "Fetch a list of your team’s previous notarization submissions.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Previous-Submissions",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Get Previous Submissions"
        }
      ],
      "role": "symbol",
      "title": "Get Previous Submissions",
      "type": "topic",
      "url": "/documentation/notaryapi/get-previous-submissions"
    },
    "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Submission-Log": {
      "abstract": [
        {
          "text": "Fetch details about a single completed notarization.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Submission-Log",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Get Submission Log"
        }
      ],
      "role": "symbol",
      "title": "Get Submission Log",
      "type": "topic",
      "url": "/documentation/notaryapi/get-submission-log"
    },
    "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Submission-Status": {
      "abstract": [
        {
          "text": "Fetch the status of a software notarization submission.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Get-Submission-Status",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Get Submission Status"
        }
      ],
      "role": "symbol",
      "title": "Get Submission Status",
      "type": "topic",
      "url": "/documentation/notaryapi/get-submission-status"
    },
    "doc://com.apple.notaryapi/documentation/NotaryAPI/NewSubmissionRequest/Notifications-data.dictionary": {
      "abstract": [
        {
          "text": "A notification that the notary service sends you when notarization finishes.",
          "type": "text"
        }
      ],
      "fragments": [
        {
          "kind": "text",
          "text": "object "
        },
        {
          "kind": "identifier",
          "text": "NewSubmissionRequest.Notifications"
        }
      ],
      "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/NewSubmissionRequest/Notifications-data.dictionary",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "NewSubmissionRequest.Notifications"
        }
      ],
      "role": "symbol",
      "title": "NewSubmissionRequest.Notifications",
      "type": "topic",
      "url": "/documentation/notaryapi/newsubmissionrequest/notifications-data.dictionary"
    },
    "doc://com.apple.notaryapi/documentation/NotaryAPI/Submit-Software": {
      "abstract": [
        {
          "text": "Start the process of uploading a new version of your software to the notary service.",
          "type": "text"
        }
      ],
      "identifier": "doc://com.apple.notaryapi/documentation/NotaryAPI/Submit-Software",
      "kind": "symbol",
      "navigatorTitle": [
        {
          "kind": "identifier",
          "text": "Submit Software"
        }
      ],
      "role": "symbol",
      "title": "Submit Software",
      "type": "topic",
      "url": "/documentation/notaryapi/submit-software"
    },
    "https://aws.amazon.com": {
      "identifier": "https://aws.amazon.com",
      "title": "https://aws.amazon.com",
      "titleInlineContent": [
        {
          "text": "https://aws.amazon.com",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://aws.amazon.com"
    },
    "https://tools.ietf.org/html/rfc7519": {
      "identifier": "https://tools.ietf.org/html/rfc7519",
      "title": "RFC 7519",
      "titleInlineContent": [
        {
          "text": "RFC 7519",
          "type": "text"
        }
      ],
      "type": "link",
      "url": "https://tools.ietf.org/html/rfc7519"
    }
  },
  "schemaVersion": {
    "major": 0,
    "minor": 3,
    "patch": 0
  },
  "sections": [],
  "variants": [
    {
      "paths": [
        "/documentation/notaryapi/submitting-software-for-notarization-over-the-web"
      ],
      "traits": [
        {
          "interfaceLanguage": "data"
        }
      ]
    }
  ]
}
